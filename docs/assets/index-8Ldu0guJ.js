var Xs=Object.defineProperty;var qs=(t,e,r)=>e in t?Xs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var nn=(t,e,r)=>(qs(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const i of u.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();function $e(){}function zi(t){return t()}function nu(){return Object.create(null)}function Ye(t){t.forEach(zi)}function Bi(t){return typeof t=="function"}function xt(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let vr;function au(t,e){return t===e?!0:(vr||(vr=document.createElement("a")),vr.href=e,t===vr.href)}function Ys(t){return Object.keys(t).length===0}function m(t,e){t.appendChild(e)}function X(t,e,r){t.insertBefore(e,r||null)}function V(t){t.parentNode&&t.parentNode.removeChild(t)}function Wi(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function x(t){return document.createElement(t)}function ke(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ee(t){return document.createTextNode(t)}function W(){return Ee(" ")}function Ar(){return Ee("")}function le(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function Js(t){return function(e){e.target===this&&t.call(this,e)}}function c(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function Qs(t){return Array.from(t.childNodes)}function Lt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Pe(t,e){t.value=e??""}function me(t,e,r,n){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,"")}function Er(t,e,r){for(let n=0;n<t.options.length;n+=1){const a=t.options[n];if(a.__value===e){a.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function Hi(t){const e=t.querySelector(":checked");return e&&e.__value}function uu(t,e,r){t.classList.toggle(e,!!r)}function Ks(t,e,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:n})}let Kt;function Yt(t){Kt=t}function ra(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function na(t){ra().$$.on_mount.push(t)}function el(t){ra().$$.on_destroy.push(t)}function Ir(){const t=ra();return(e,r,{cancelable:n=!1}={})=>{const a=t.$$.callbacks[e];if(a){const u=Ks(e,r,{cancelable:n});return a.slice().forEach(i=>{i.call(t,u)}),!u.defaultPrevented}return!0}}const It=[],Rt=[];let jt=[];const Mn=[],tl=Promise.resolve();let Ln=!1;function rl(){Ln||(Ln=!0,tl.then(Zi))}function er(t){jt.push(t)}function Gi(t){Mn.push(t)}const an=new Set;let $t=0;function Zi(){if($t!==0)return;const t=Kt;do{try{for(;$t<It.length;){const e=It[$t];$t++,Yt(e),nl(e.$$)}}catch(e){throw It.length=0,$t=0,e}for(Yt(null),It.length=0,$t=0;Rt.length;)Rt.pop()();for(let e=0;e<jt.length;e+=1){const r=jt[e];an.has(r)||(an.add(r),r())}jt.length=0}while(It.length);for(;Mn.length;)Mn.pop()();Ln=!1,an.clear(),Yt(t)}function nl(t){if(t.fragment!==null){t.update(),Ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(er)}}function al(t){const e=[],r=[];jt.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),jt=e}const xr=new Set;let yt;function Vi(){yt={r:0,c:[],p:yt}}function Xi(){yt.r||Ye(yt.c),yt=yt.p}function qe(t,e){t&&t.i&&(xr.delete(t),t.i(e))}function ot(t,e,r,n){if(t&&t.o){if(xr.has(t))return;xr.add(t),yt.c.push(()=>{xr.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function Nt(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ul(t,e){t.d(1),e.delete(t.key)}function il(t,e,r,n,a,u,i,o,l,d,f,h){let v=t.length,b=u.length,w=v;const _={};for(;w--;)_[t[w].key]=w;const y=[],k=new Map,P=new Map,j=[];for(w=b;w--;){const U=h(a,u,w),Y=r(U);let oe=i.get(Y);oe?j.push(()=>oe.p(U,e)):(oe=d(Y,U),oe.c()),k.set(Y,y[w]=oe),Y in _&&P.set(Y,Math.abs(w-_[Y]))}const L=new Set,F=new Set;function q(U){qe(U,1),U.m(o,f),i.set(U.key,U),f=U.first,b--}for(;v&&b;){const U=y[b-1],Y=t[v-1],oe=U.key,K=Y.key;U===Y?(f=U.first,v--,b--):k.has(K)?!i.has(oe)||L.has(oe)?q(U):F.has(K)?v--:P.get(oe)>P.get(K)?(F.add(oe),q(U)):(L.add(K),v--):(l(Y,i),v--)}for(;v--;){const U=t[v];k.has(U.key)||l(U,i)}for(;b;)q(y[b-1]);return Ye(j),y}function qi(t,e,r){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function Mt(t){t&&t.c()}function wt(t,e,r){const{fragment:n,after_update:a}=t.$$;n&&n.m(e,r),er(()=>{const u=t.$$.on_mount.map(zi).filter(Bi);t.$$.on_destroy?t.$$.on_destroy.push(...u):Ye(u),t.$$.on_mount=[]}),a.forEach(er)}function _t(t,e){const r=t.$$;r.fragment!==null&&(al(r.after_update),Ye(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function ol(t,e){t.$$.dirty[0]===-1&&(It.push(t),rl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function St(t,e,r,n,a,u,i=null,o=[-1]){const l=Kt;Yt(t);const d=t.$$={fragment:null,ctx:[],props:u,update:$e,not_equal:a,bound:nu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:nu(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};i&&i(d.root);let f=!1;if(d.ctx=r?r(t,e.props||{},(h,v,...b)=>{const w=b.length?b[0]:v;return d.ctx&&a(d.ctx[h],d.ctx[h]=w)&&(!d.skip_bound&&d.bound[h]&&d.bound[h](w),f&&ol(t,h)),v}):[],d.update(),f=!0,Ye(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const h=Qs(e.target);d.fragment&&d.fragment.l(h),h.forEach(V)}else d.fragment&&d.fragment.c();e.intro&&qe(t.$$.fragment),wt(t,e.target,e.anchor),Zi()}Yt(l)}class Ct{constructor(){nn(this,"$$");nn(this,"$$set")}$destroy(){_t(this,1),this.$destroy=$e}$on(e,r){if(!Bi(r))return $e;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const a=n.indexOf(r);a!==-1&&n.splice(a,1)}}$set(e){this.$$set&&!Ys(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const sl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(sl);var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ct=function(t){return typeof t=="object"?t!==null:typeof t=="function"},ll=ct,Je=function(t){if(!ll(t))throw TypeError(t+" is not an object!");return t},Dr=function(t){if(t==null)throw TypeError("Can't call method on  "+t);return t},dl=Dr,pt=function(t){return Object(dl(t))},cl=Math.ceil,fl=Math.floor,Mr=function(t){return isNaN(t=+t)?0:(t>0?fl:cl)(t)},hl=Mr,pl=Math.min,Et=function(t){return t>0?pl(hl(t),9007199254740991):0},vl=Mr,gl=Dr,Yi=function(t){return function(e,r){var n=String(gl(e)),a=vl(r),u=n.length,i,o;return a<0||a>=u?t?"":void 0:(i=n.charCodeAt(a),i<55296||i>56319||a+1===u||(o=n.charCodeAt(a+1))<56320||o>57343?t?n.charAt(a):i:t?n.slice(a,a+2):(i-55296<<10)+(o-56320)+65536)}},ml=Yi(!0),ua=function(t,e,r){return e+(r?ml(t,e).length:1)},bl={}.toString,Lr=function(t){return bl.call(t).slice(8,-1)},Ji={exports:{}},Qi={exports:{}},Ki={exports:{}},yl=Ki.exports={version:"2.6.12"};typeof __e=="number"&&(__e=yl);var zt=Ki.exports,eo={exports:{}},wl=eo.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=wl);var tt=eo.exports,_l=!1,kl=zt,iu=tt,ou="__core-js_shared__",su=iu[ou]||(iu[ou]={});(Qi.exports=function(t,e){return su[t]||(su[t]=e!==void 0?e:{})})("versions",[]).push({version:kl.version,mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"});var jr=Qi.exports,xl=0,Sl=Math.random(),nr=function(t){return"Symbol(".concat(t===void 0?"":t,")_",(++xl+Sl).toString(36))},jn=jr("wks"),Cl=nr,Rn=tt.Symbol,lu=typeof Rn=="function",El=Ji.exports=function(t){return jn[t]||(jn[t]=lu&&Rn[t]||(lu?Rn:Cl)("Symbol."+t))};El.store=jn;var Ie=Ji.exports,Nn=Lr,Ol=Ie("toStringTag"),Tl=Nn(function(){return arguments}())=="Arguments",Ul=function(t,e){try{return t[e]}catch{}},ia=function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=Ul(e=Object(t),Ol))=="string"?r:Tl?Nn(e):(n=Nn(e))=="Object"&&typeof e.callee=="function"?"Arguments":n},Pl=ia,$l=RegExp.prototype.exec,oa=function(t,e){var r=t.exec;if(typeof r=="function"){var n=r.call(t,e);if(typeof n!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if(Pl(t)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return $l.call(t,e)},Al=Je,Rr=function(){var t=Al(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Il=Rr,Or=RegExp.prototype.exec,Dl=String.prototype.replace,to=Or,Tr="lastIndex",Fn=function(){var t=/a/,e=/b*/g;return Or.call(t,"a"),Or.call(e,"a"),t[Tr]!==0||e[Tr]!==0}(),zn=/()??/.exec("")[1]!==void 0,Ml=Fn||zn;Ml&&(to=function(e){var r=this,n,a,u,i;return zn&&(a=new RegExp("^"+r.source+"$(?!\\s)",Il.call(r))),Fn&&(n=r[Tr]),u=Or.call(r,e),Fn&&u&&(r[Tr]=r.global?u.index+u[0].length:n),zn&&u&&u.length>1&&Dl.call(u[0],a,function(){for(i=1;i<arguments.length-2;i++)arguments[i]===void 0&&(u[i]=void 0)}),u});var sa=to,rt={},it=function(t){try{return!!t()}catch{return!0}},nt=!it(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),un,du;function ro(){if(du)return un;du=1;var t=ct,e=tt.document,r=t(e)&&t(e.createElement);return un=function(n){return r?e.createElement(n):{}},un}var no=!nt&&!it(function(){return Object.defineProperty(ro()("div"),"a",{get:function(){return 7}}).a!=7}),gr=ct,la=function(t,e){if(!gr(t))return t;var r,n;if(e&&typeof(r=t.toString)=="function"&&!gr(n=r.call(t))||typeof(r=t.valueOf)=="function"&&!gr(n=r.call(t))||!e&&typeof(r=t.toString)=="function"&&!gr(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},cu=Je,Ll=no,jl=la,Rl=Object.defineProperty;rt.f=nt?Object.defineProperty:function(e,r,n){if(cu(e),r=jl(r,!0),cu(n),Ll)try{return Rl(e,r,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[r]=n.value),e};var ar=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}},Nl=rt,Fl=ar,vt=nt?function(t,e,r){return Nl.f(t,e,Fl(1,r))}:function(t,e,r){return t[e]=r,t},ao={exports:{}},zl={}.hasOwnProperty,Ot=function(t,e){return zl.call(t,e)},Bl=jr("native-function-to-string",Function.toString),Wl=tt,mr=vt,fu=Ot,on=nr("src"),da=Bl,uo="toString",Hl=(""+da).split(uo);zt.inspectSource=function(t){return da.call(t)};(ao.exports=function(t,e,r,n){var a=typeof r=="function";a&&(fu(r,"name")||mr(r,"name",e)),t[e]!==r&&(a&&(fu(r,on)||mr(r,on,t[e]?""+t[e]:Hl.join(String(e)))),t===Wl?t[e]=r:n?t[e]?t[e]=r:mr(t,e,r):(delete t[e],mr(t,e,r)))})(Function.prototype,uo,function(){return typeof this=="function"&&this[on]||da.call(this)});var ft=ao.exports,Nr=function(t){if(typeof t!="function")throw TypeError(t+" is not a function!");return t},Gl=Nr,Fr=function(t,e,r){if(Gl(t),e===void 0)return t;switch(r){case 1:return function(n){return t.call(e,n)};case 2:return function(n,a){return t.call(e,n,a)};case 3:return function(n,a,u){return t.call(e,n,a,u)}}return function(){return t.apply(e,arguments)}},Dt=tt,Sr=zt,Zl=vt,Vl=ft,hu=Fr,sn="prototype",ze=function(t,e,r){var n=t&ze.F,a=t&ze.G,u=t&ze.S,i=t&ze.P,o=t&ze.B,l=a?Dt:u?Dt[e]||(Dt[e]={}):(Dt[e]||{})[sn],d=a?Sr:Sr[e]||(Sr[e]={}),f=d[sn]||(d[sn]={}),h,v,b,w;a&&(r=e);for(h in r)v=!n&&l&&l[h]!==void 0,b=(v?l:r)[h],w=o&&v?hu(b,Dt):i&&typeof b=="function"?hu(Function.call,b):b,l&&Vl(l,h,b,t&ze.U),d[h]!=b&&Zl(d,h,w),i&&f[h]!=b&&(f[h]=b)};Dt.core=Sr;ze.F=1;ze.G=2;ze.S=4;ze.P=8;ze.B=16;ze.W=32;ze.U=64;ze.R=128;var Ve=ze,pu=sa;Ve({target:"RegExp",proto:!0,forced:pu!==/./.exec},{exec:pu});var Xl=ft,ql=vt,Bn=it,Yl=Dr,io=Ie,Jl=sa,Ql=io("species"),Kl=!Bn(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(t,"$<a>")!=="7"}),ed=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return r.length===2&&r[0]==="a"&&r[1]==="b"}(),ca=function(t,e,r){var n=io(t),a=!Bn(function(){var f={};return f[n]=function(){return 7},""[t](f)!=7}),u=a?!Bn(function(){var f=!1,h=/a/;return h.exec=function(){return f=!0,null},t==="split"&&(h.constructor={},h.constructor[Ql]=function(){return h}),h[n](""),!f}):void 0;if(!a||!u||t==="replace"&&!Kl||t==="split"&&!ed){var i=/./[n],o=r(Yl,n,""[t],function(h,v,b,w,_){return v.exec===Jl?a&&!_?{done:!0,value:i.call(v,b,w)}:{done:!0,value:h.call(b,v,w)}:{done:!1}}),l=o[0],d=o[1];Xl(String.prototype,t,l),ql(RegExp.prototype,n,e==2?function(f,h){return d.call(f,this,h)}:function(f){return d.call(f,this)})}},td=Je,rd=pt,nd=Et,ad=Mr,ud=ua,id=oa,od=Math.max,sd=Math.min,ld=Math.floor,dd=/\$([$&`']|\d\d?|<[^>]*>)/g,cd=/\$([$&`']|\d\d?)/g,fd=function(t){return t===void 0?t:String(t)};ca("replace",2,function(t,e,r,n){return[function(i,o){var l=t(this),d=i==null?void 0:i[e];return d!==void 0?d.call(i,l,o):r.call(String(l),i,o)},function(u,i){var o=n(r,u,this,i);if(o.done)return o.value;var l=td(u),d=String(this),f=typeof i=="function";f||(i=String(i));var h=l.global;if(h){var v=l.unicode;l.lastIndex=0}for(var b=[];;){var w=id(l,d);if(w===null||(b.push(w),!h))break;var _=String(w[0]);_===""&&(l.lastIndex=ud(d,nd(l.lastIndex),v))}for(var y="",k=0,P=0;P<b.length;P++){w=b[P];for(var j=String(w[0]),L=od(sd(ad(w.index),d.length),0),F=[],q=1;q<w.length;q++)F.push(fd(w[q]));var U=w.groups;if(f){var Y=[j].concat(F,L,d);U!==void 0&&Y.push(U);var oe=String(i.apply(void 0,Y))}else oe=a(j,d,L,F,U,i);L>=k&&(y+=d.slice(k,L)+oe,k=L+j.length)}return y+d.slice(k)}];function a(u,i,o,l,d,f){var h=o+u.length,v=l.length,b=cd;return d!==void 0&&(d=rd(d),b=dd),r.call(f,b,function(w,_){var y;switch(_.charAt(0)){case"$":return"$";case"&":return u;case"`":return i.slice(0,o);case"'":return i.slice(h);case"<":y=d[_.slice(1,-1)];break;default:var k=+_;if(k===0)return w;if(k>v){var P=ld(k/10);return P===0?w:P<=v?l[P-1]===void 0?_.charAt(1):l[P-1]+_.charAt(1):w}y=l[k-1]}return y===void 0?"":y})}});var hd=Lr,fa=Object("z").propertyIsEnumerable(0)?Object:function(t){return hd(t)=="String"?t.split(""):Object(t)},pd=fa,vd=Dr,Tt=function(t){return pd(vd(t))},gd=Mr,md=Math.max,bd=Math.min,yd=function(t,e){return t=gd(t),t<0?md(t+e,0):bd(t,e)},wd=Tt,_d=Et,kd=yd,oo=function(t){return function(e,r,n){var a=wd(e),u=_d(a.length),i=kd(n,u),o;if(t&&r!=r){for(;u>i;)if(o=a[i++],o!=o)return!0}else for(;u>i;i++)if((t||i in a)&&a[i]===r)return t||i||0;return!t&&-1}},xd=it,ur=function(t,e){return!!t&&xd(function(){e?t.call(null,function(){},1):t.call(null)})},ln=Ve,Sd=oo(!1),Wn=[].indexOf,vu=!!Wn&&1/[1].indexOf(1,-0)<0;ln(ln.P+ln.F*(vu||!ur(Wn)),"Array",{indexOf:function(e){return vu?Wn.apply(this,arguments)||0:Sd(this,e,arguments[1])}});var so=/[a-z]{1,6}(?:[._][a-z]{1,2})?/i,ha=/\!'#%&'\(\)*\+,\\\-\.\/:;<=>\?@\[\]\^_{|}~\$/,zr={},Br={};Br.f={}.propertyIsEnumerable;var Cd=Br,Ed=ar,Od=Tt,Td=la,Ud=Ot,Pd=no,gu=Object.getOwnPropertyDescriptor;zr.f=nt?gu:function(e,r){if(e=Od(e),r=Td(r,!0),Pd)try{return gu(e,r)}catch{}if(Ud(e,r))return Ed(!Cd.f.call(e,r),e[r])};var $d=ct,Ad=Je,mu=function(t,e){if(Ad(t),!$d(e)&&e!==null)throw TypeError(e+": can't set as prototype!")},Id={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=Fr(Function.call,zr.f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch{e=!0}return function(a,u){return mu(a,u),e?a.__proto__=u:r(a,u),a}}({},!1):void 0),check:mu},Dd=ct,bu=Id.set,Md=function(t,e,r){var n=e.constructor,a;return n!==r&&typeof n=="function"&&(a=n.prototype)!==r.prototype&&Dd(a)&&bu&&bu(t,a),t},ir={},yu=jr("keys"),Ld=nr,pa=function(t){return yu[t]||(yu[t]=Ld(t))},wu=Ot,jd=Tt,Rd=oo(!1),Nd=pa("IE_PROTO"),lo=function(t,e){var r=jd(t),n=0,a=[],u;for(u in r)u!=Nd&&wu(r,u)&&a.push(u);for(;e.length>n;)wu(r,u=e[n++])&&(~Rd(a,u)||a.push(u));return a},va="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Fd=lo,zd=va.concat("length","prototype");ir.f=Object.getOwnPropertyNames||function(e){return Fd(e,zd)};var Bd=ct,Wd=Lr,Hd=Ie("match"),co=function(t){var e;return Bd(t)&&((e=t[Hd])!==void 0?!!e:Wd(t)=="RegExp")},dn,_u;function Gd(){if(_u)return dn;_u=1;var t=tt,e=rt,r=nt,n=Ie("species");return dn=function(a){var u=t[a];r&&u&&!u[n]&&e.f(u,n,{configurable:!0,get:function(){return this}})},dn}var fo=tt,Zd=Md,Vd=rt.f,Xd=ir.f,qd=co,Yd=Rr,Re=fo.RegExp,Zt=Re,cn=Re.prototype,Qt=/a/g,fn=/a/g,ku=new Re(Qt)!==Qt;if(nt&&(!ku||it(function(){return fn[Ie("match")]=!1,Re(Qt)!=Qt||Re(fn)==fn||Re(Qt,"i")!="/a/i"}))){Re=function(e,r){var n=this instanceof Re,a=qd(e),u=r===void 0;return!n&&a&&e.constructor===Re&&u?e:Zd(ku?new Zt(a&&!u?e.source:e,r):Zt((a=e instanceof Re)?e.source:e,a&&u?Yd.call(e):r),n?this:cn,Re)};for(var Jd=function(t){t in Re||Vd(Re,t,{configurable:!0,get:function(){return Zt[t]},set:function(e){Zt[t]=e}})},xu=Xd(Zt),Su=0;xu.length>Su;)Jd(xu[Su++]);cn.constructor=Re,Re.prototype=cn,ft(fo,"RegExp",Re)}Gd()("RegExp");function be(t,e,r){return r=r||"",typeof t!="string"&&(t.global&&r.indexOf("g")<0&&(r+="g"),t.ignoreCase&&r.indexOf("i")<0&&(r+="i"),t.multiline&&r.indexOf("m")<0&&(r+="m"),t=t.source),new RegExp(t.replace(/#\{(\w+)\}/g,function(n,a){var u=e[a]||"";return typeof u!="string"&&(u=u.source),u}),r)}var ga=/\x09-\x0D\x20\x85\xA0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000/;const ma=be(/[#{spacesGroup}]/,{spacesGroup:ga});var ho=be("(^|#{spaces})(\\$)(#{cashtag})(?=$|\\s|[#{punct}])",{cashtag:so,spaces:ma,punct:ha},"gi");function Wr(t){if(!t||t.indexOf("$")===-1)return[];var e=[];return t.replace(ho,function(r,n,a,u,i,o){var l=i+n.length,d=l+u.length+1;e.push({cashtag:u,indices:[l,d]})}),e}var Qd=Je,Kd=Et,ec=ua,Cu=oa;ca("match",1,function(t,e,r,n){return[function(u){var i=t(this),o=u==null?void 0:u[e];return o!==void 0?o.call(u,i):new RegExp(u)[e](String(i))},function(a){var u=n(r,a,this);if(u.done)return u.value;var i=Qd(a),o=String(this);if(!i.global)return Cu(i,o);var l=i.unicode;i.lastIndex=0;for(var d=[],f=0,h;(h=Cu(i,o))!==null;){var v=String(h[0]);d[f]=v,v===""&&(i.lastIndex=ec(o,Kd(i.lastIndex),l)),f++}return f===0?null:d}]});var Hr=/[#＃]/,po=be(/^(?:#{hashSigns}|:\/\/)/,{hashSigns:Hr}),ba=be(RegExp("(?:(?:한국|香港|澳門|新加坡|台灣|台湾|中國|中国|გე|ລາວ|ไทย|ලංකා|ഭാരതം|ಭಾರತ|భారత్|சிங்கப்பூர்|இலங்கை|இந்தியா|ଭାରତ|ભારત|ਭਾਰਤ|ভাৰত|ভারত|বাংলা|भारोत|भारतम्|भारत|ڀارت|پاکستان|موريتانيا|مليسيا|مصر|قطر|فلسطين|عمان|عراق|سورية|سودان|تونس|بھارت|بارت|ایران|امارات|المغرب|السعودية|الجزائر|البحرين|الاردن|հայ|қаз|укр|срб|рф|мон|мкд|ею|бел|бг|ευ|ελ|zw|zm|za|yt|ye|ws|wf|vu|vn|vi|vg|ve|vc|va|uz|uy|us|um|uk|ug|ua|tz|tw|tv|tt|tr|tp|to|tn|tm|tl|tk|tj|th|tg|tf|td|tc|sz|sy|sx|sv|su|st|ss|sr|so|sn|sm|sl|sk|sj|si|sh|sg|se|sd|sc|sb|sa|rw|ru|rs|ro|re|qa|py|pw|pt|ps|pr|pn|pm|pl|pk|ph|pg|pf|pe|pa|om|nz|nu|nr|np|no|nl|ni|ng|nf|ne|nc|na|mz|my|mx|mw|mv|mu|mt|ms|mr|mq|mp|mo|mn|mm|ml|mk|mh|mg|mf|me|md|mc|ma|ly|lv|lu|lt|ls|lr|lk|li|lc|lb|la|kz|ky|kw|kr|kp|kn|km|ki|kh|kg|ke|jp|jo|jm|je|it|is|ir|iq|io|in|im|il|ie|id|hu|ht|hr|hn|hm|hk|gy|gw|gu|gt|gs|gr|gq|gp|gn|gm|gl|gi|gh|gg|gf|ge|gd|gb|ga|fr|fo|fm|fk|fj|fi|eu|et|es|er|eh|eg|ee|ec|dz|do|dm|dk|dj|de|cz|cy|cx|cw|cv|cu|cr|co|cn|cm|cl|ck|ci|ch|cg|cf|cd|cc|ca|bz|by|bw|bv|bt|bs|br|bq|bo|bn|bm|bl|bj|bi|bh|bg|bf|be|bd|bb|ba|az|ax|aw|au|at|as|ar|aq|ao|an|am|al|ai|ag|af|ae|ad|ac)(?=[^0-9a-zA-Z@+-]|$))")),vo=/\u202A-\u202E\u061C\u200E\u200F\u2066\u2067\u2068\u2069/,Gr=/\uFFFE\uFEFF\uFFFF/;function ya(t,e){return t.replace(/#\{(\w+)\}/g,function(r,n){return e[n]||""})}var go=ya("#{punct}#{spacesGroup}#{invalidCharsGroup}#{directionalMarkersGroup}",{punct:ha,spacesGroup:ga,invalidCharsGroup:Gr,directionalMarkersGroup:vo}),wa=be(/[^#{invalidDomainChars}]/,{invalidDomainChars:go}),mo=be(/(?:(?:#{validDomainChars}(?:-|#{validDomainChars})*)?#{validDomainChars}\.)/,{validDomainChars:wa}),_a=be(RegExp("(?:(?:삼성|닷컴|닷넷|香格里拉|餐厅|食品|飞利浦|電訊盈科|集团|通販|购物|谷歌|诺基亚|联通|网络|网站|网店|网址|组织机构|移动|珠宝|点看|游戏|淡马锡|机构|書籍|时尚|新闻|政府|政务|招聘|手表|手机|我爱你|慈善|微博|广东|工行|家電|娱乐|天主教|大拿|大众汽车|在线|嘉里大酒店|嘉里|商标|商店|商城|公益|公司|八卦|健康|信息|佛山|企业|中文网|中信|世界|ポイント|ファッション|セール|ストア|コム|グーグル|クラウド|みんな|คอม|संगठन|नेट|कॉम|همراه|موقع|موبايلي|كوم|كاثوليك|عرب|شبكة|بيتك|بازار|العليان|ارامكو|اتصالات|ابوظبي|קום|сайт|рус|орг|онлайн|москва|ком|католик|дети|zuerich|zone|zippo|zip|zero|zara|zappos|yun|youtube|you|yokohama|yoga|yodobashi|yandex|yamaxun|yahoo|yachts|xyz|xxx|xperia|xin|xihuan|xfinity|xerox|xbox|wtf|wtc|wow|world|works|work|woodside|wolterskluwer|wme|winners|wine|windows|win|williamhill|wiki|wien|whoswho|weir|weibo|wedding|wed|website|weber|webcam|weatherchannel|weather|watches|watch|warman|wanggou|wang|walter|walmart|wales|vuelos|voyage|voto|voting|vote|volvo|volkswagen|vodka|vlaanderen|vivo|viva|vistaprint|vista|vision|visa|virgin|vip|vin|villas|viking|vig|video|viajes|vet|versicherung|vermögensberatung|vermögensberater|verisign|ventures|vegas|vanguard|vana|vacations|ups|uol|uno|university|unicom|uconnect|ubs|ubank|tvs|tushu|tunes|tui|tube|trv|trust|travelersinsurance|travelers|travelchannel|travel|training|trading|trade|toys|toyota|town|tours|total|toshiba|toray|top|tools|tokyo|today|tmall|tkmaxx|tjx|tjmaxx|tirol|tires|tips|tiffany|tienda|tickets|tiaa|theatre|theater|thd|teva|tennis|temasek|telefonica|telecity|tel|technology|tech|team|tdk|tci|taxi|tax|tattoo|tatar|tatamotors|target|taobao|talk|taipei|tab|systems|symantec|sydney|swiss|swiftcover|swatch|suzuki|surgery|surf|support|supply|supplies|sucks|style|study|studio|stream|store|storage|stockholm|stcgroup|stc|statoil|statefarm|statebank|starhub|star|staples|stada|srt|srl|spreadbetting|spot|sport|spiegel|space|soy|sony|song|solutions|solar|sohu|software|softbank|social|soccer|sncf|smile|smart|sling|skype|sky|skin|ski|site|singles|sina|silk|shriram|showtime|show|shouji|shopping|shop|shoes|shiksha|shia|shell|shaw|sharp|shangrila|sfr|sexy|sex|sew|seven|ses|services|sener|select|seek|security|secure|seat|search|scot|scor|scjohnson|science|schwarz|schule|school|scholarships|schmidt|schaeffler|scb|sca|sbs|sbi|saxo|save|sas|sarl|sapo|sap|sanofi|sandvikcoromant|sandvik|samsung|samsclub|salon|sale|sakura|safety|safe|saarland|ryukyu|rwe|run|ruhr|rugby|rsvp|room|rogers|rodeo|rocks|rocher|rmit|rip|rio|ril|rightathome|ricoh|richardli|rich|rexroth|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reliance|reit|reisen|reise|rehab|redumbrella|redstone|red|recipes|realty|realtor|realestate|read|raid|radio|racing|qvc|quest|quebec|qpon|pwc|pub|prudential|pru|protection|property|properties|promo|progressive|prof|productions|prod|pro|prime|press|praxi|pramerica|post|porn|politie|poker|pohl|pnc|plus|plumbing|playstation|play|place|pizza|pioneer|pink|ping|pin|pid|pictures|pictet|pics|piaget|physio|photos|photography|photo|phone|philips|phd|pharmacy|pfizer|pet|pccw|pay|passagens|party|parts|partners|pars|paris|panerai|panasonic|pamperedchef|page|ovh|ott|otsuka|osaka|origins|orientexpress|organic|org|orange|oracle|open|ooo|onyourside|online|onl|ong|one|omega|ollo|oldnavy|olayangroup|olayan|okinawa|office|off|observer|obi|nyc|ntt|nrw|nra|nowtv|nowruz|now|norton|northwesternmutual|nokia|nissay|nissan|ninja|nikon|nike|nico|nhk|ngo|nfl|nexus|nextdirect|next|news|newholland|new|neustar|network|netflix|netbank|net|nec|nba|navy|natura|nationwide|name|nagoya|nadex|nab|mutuelle|mutual|museum|mtr|mtpc|mtn|msd|movistar|movie|mov|motorcycles|moto|moscow|mortgage|mormon|mopar|montblanc|monster|money|monash|mom|moi|moe|moda|mobily|mobile|mobi|mma|mls|mlb|mitsubishi|mit|mint|mini|mil|microsoft|miami|metlife|merckmsd|meo|menu|men|memorial|meme|melbourne|meet|media|med|mckinsey|mcdonalds|mcd|mba|mattel|maserati|marshalls|marriott|markets|marketing|market|map|mango|management|man|makeup|maison|maif|madrid|macys|luxury|luxe|lupin|lundbeck|ltda|ltd|lplfinancial|lpl|love|lotto|lotte|london|lol|loft|locus|locker|loans|loan|llp|llc|lixil|living|live|lipsy|link|linde|lincoln|limo|limited|lilly|like|lighting|lifestyle|lifeinsurance|life|lidl|liaison|lgbt|lexus|lego|legal|lefrak|leclerc|lease|lds|lawyer|law|latrobe|latino|lat|lasalle|lanxess|landrover|land|lancome|lancia|lancaster|lamer|lamborghini|ladbrokes|lacaixa|kyoto|kuokgroup|kred|krd|kpn|kpmg|kosher|komatsu|koeln|kiwi|kitchen|kindle|kinder|kim|kia|kfh|kerryproperties|kerrylogistics|kerryhotels|kddi|kaufen|juniper|juegos|jprs|jpmorgan|joy|jot|joburg|jobs|jnj|jmp|jll|jlc|jio|jewelry|jetzt|jeep|jcp|jcb|java|jaguar|iwc|iveco|itv|itau|istanbul|ist|ismaili|iselect|irish|ipiranga|investments|intuit|international|intel|int|insure|insurance|institute|ink|ing|info|infiniti|industries|inc|immobilien|immo|imdb|imamat|ikano|iinet|ifm|ieee|icu|ice|icbc|ibm|hyundai|hyatt|hughes|htc|hsbc|how|house|hotmail|hotels|hoteles|hot|hosting|host|hospital|horse|honeywell|honda|homesense|homes|homegoods|homedepot|holiday|holdings|hockey|hkt|hiv|hitachi|hisamitsu|hiphop|hgtv|hermes|here|helsinki|help|healthcare|health|hdfcbank|hdfc|hbo|haus|hangout|hamburg|hair|guru|guitars|guide|guge|gucci|guardian|group|grocery|gripe|green|gratis|graphics|grainger|gov|got|gop|google|goog|goodyear|goodhands|goo|golf|goldpoint|gold|godaddy|gmx|gmo|gmbh|gmail|globo|global|gle|glass|glade|giving|gives|gifts|gift|ggee|george|genting|gent|gea|gdn|gbiz|gay|garden|gap|games|game|gallup|gallo|gallery|gal|fyi|futbol|furniture|fund|fun|fujixerox|fujitsu|ftr|frontier|frontdoor|frogans|frl|fresenius|free|fox|foundation|forum|forsale|forex|ford|football|foodnetwork|food|foo|fly|flsmidth|flowers|florist|flir|flights|flickr|fitness|fit|fishing|fish|firmdale|firestone|fire|financial|finance|final|film|fido|fidelity|fiat|ferrero|ferrari|feedback|fedex|fast|fashion|farmers|farm|fans|fan|family|faith|fairwinds|fail|fage|extraspace|express|exposed|expert|exchange|everbank|events|eus|eurovision|etisalat|esurance|estate|esq|erni|ericsson|equipment|epson|epost|enterprises|engineering|engineer|energy|emerck|email|education|edu|edeka|eco|eat|earth|dvr|dvag|durban|dupont|duns|dunlop|duck|dubai|dtv|drive|download|dot|doosan|domains|doha|dog|dodge|doctor|docs|dnp|diy|dish|discover|discount|directory|direct|digital|diet|diamonds|dhl|dev|design|desi|dentist|dental|democrat|delta|deloitte|dell|delivery|degree|deals|dealer|deal|dds|dclk|day|datsun|dating|date|data|dance|dad|dabur|cyou|cymru|cuisinella|csc|cruises|cruise|crs|crown|cricket|creditunion|creditcard|credit|cpa|courses|coupons|coupon|country|corsica|coop|cool|cookingchannel|cooking|contractors|contact|consulting|construction|condos|comsec|computer|compare|company|community|commbank|comcast|com|cologne|college|coffee|codes|coach|clubmed|club|cloud|clothing|clinique|clinic|click|cleaning|claims|cityeats|city|citic|citi|citadel|cisco|circle|cipriani|church|chrysler|chrome|christmas|chloe|chintai|cheap|chat|chase|charity|channel|chanel|cfd|cfa|cern|ceo|center|ceb|cbs|cbre|cbn|cba|catholic|catering|cat|casino|cash|caseih|case|casa|cartier|cars|careers|career|care|cards|caravan|car|capitalone|capital|capetown|canon|cancerresearch|camp|camera|cam|calvinklein|call|cal|cafe|cab|bzh|buzz|buy|business|builders|build|bugatti|budapest|brussels|brother|broker|broadway|bridgestone|bradesco|box|boutique|bot|boston|bostik|bosch|boots|booking|book|boo|bond|bom|bofa|boehringer|boats|bnpparibas|bnl|bmw|bms|blue|bloomberg|blog|blockbuster|blanco|blackfriday|black|biz|bio|bingo|bing|bike|bid|bible|bharti|bet|bestbuy|best|berlin|bentley|beer|beauty|beats|bcn|bcg|bbva|bbt|bbc|bayern|bauhaus|basketball|baseball|bargains|barefoot|barclays|barclaycard|barcelona|bar|bank|band|bananarepublic|banamex|baidu|baby|azure|axa|aws|avianca|autos|auto|author|auspost|audio|audible|audi|auction|attorney|athleta|associates|asia|asda|arte|art|arpa|army|archi|aramco|arab|aquarelle|apple|app|apartments|aol|anz|anquan|android|analytics|amsterdam|amica|amfam|amex|americanfamily|americanexpress|alstom|alsace|ally|allstate|allfinanz|alipay|alibaba|alfaromeo|akdn|airtel|airforce|airbus|aigo|aig|agency|agakhan|africa|afl|afamilycompany|aetna|aero|aeg|adult|ads|adac|actor|active|aco|accountants|accountant|accenture|academy|abudhabi|abogado|able|abc|abbvie|abbott|abb|abarth|aarp|aaa|onion)(?=[^0-9a-zA-Z@+-]|$))")),ka=/(?:xn--[\-0-9a-z]+)/,bo=be(/(?:(?:#{validDomainChars}(?:[_-]|#{validDomainChars})*)?#{validDomainChars}\.)/,{validDomainChars:wa}),yo=be(/(?:#{validSubdomain}*#{validDomainName}(?:#{validGTLD}|#{validCCTLD}|#{validPunycode}))/,{validDomainName:mo,validSubdomain:bo,validGTLD:_a,validCCTLD:ba,validPunycode:ka}),wo=/[0-9]+/,xa=/\u0400-\u04FF/,or=/\xC0-\xD6\xD8-\xF6\xF8-\xFF\u0100-\u024F\u0253\u0254\u0256\u0257\u0259\u025B\u0263\u0268\u026F\u0272\u0289\u028B\u02BB\u0300-\u036F\u1E00-\u1EFF/,Sa=be(/[a-z#{cyrillicLettersAndMarks}0-9!\*';:=\+,\.\$\/%#\[\]\-\u2013_~@\|&#{latinAccentChars}]/i,{cyrillicLettersAndMarks:xa,latinAccentChars:or}),Ca=be("\\((?:#{validGeneralUrlPathChars}+|(?:#{validGeneralUrlPathChars}*\\(#{validGeneralUrlPathChars}+\\)#{validGeneralUrlPathChars}*))\\)",{validGeneralUrlPathChars:Sa},"i"),_o=be(/[\+\-a-z#{cyrillicLettersAndMarks}0-9=_#\/#{latinAccentChars}]|(?:#{validUrlBalancedParens})/i,{cyrillicLettersAndMarks:xa,latinAccentChars:or,validUrlBalancedParens:Ca}),ko=be("(?:(?:#{validGeneralUrlPathChars}*(?:#{validUrlBalancedParens}#{validGeneralUrlPathChars}*)*#{validUrlPathEndingChars})|(?:@#{validGeneralUrlPathChars}+/))",{validGeneralUrlPathChars:Sa,validUrlBalancedParens:Ca,validUrlPathEndingChars:_o},"i"),xo=be(/(?:[^A-Za-z0-9@＠$#＃#{invalidCharsGroup}]|[#{directionalMarkersGroup}]|^)/,{invalidCharsGroup:Gr,directionalMarkersGroup:vo}),Ea=/[a-z0-9!?\*'@\(\);:&=\+\$\/%#\[\]\-_\.,~|]/i,Oa=/[a-z0-9\-_&=#\/]/i,Hn=be("((#{validUrlPrecedingChars})((https?:\\/\\/)?(#{validDomain})(?::(#{validPortNumber}))?(\\/#{validUrlPath}*)?(\\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?))",{validUrlPrecedingChars:xo,validDomain:yo,validPortNumber:wo,validUrlPath:ko,validUrlQueryChars:Ea,validUrlQueryEndingChars:Oa},"gi"),So=/[-_.\/]$/,Eu=Je,tc=Nr,rc=Ie("species"),nc=function(t,e){var r=Eu(t).constructor,n;return r===void 0||(n=Eu(r)[rc])==null?e:tc(n)},ac=co,uc=Je,ic=nc,oc=ua,sc=Et,Ou=oa,lc=sa,dc=it,cc=Math.min,fc=[].push,gt="split",Ke="length",hn="lastIndex",Gn=4294967295,Vt=!dc(function(){RegExp(Gn,"y")});ca("split",2,function(t,e,r,n){var a;return"abbc"[gt](/(b)*/)[1]=="c"||"test"[gt](/(?:)/,-1)[Ke]!=4||"ab"[gt](/(?:ab)*/)[Ke]!=2||"."[gt](/(.?)(.?)/)[Ke]!=4||"."[gt](/()()/)[Ke]>1||""[gt](/.?/)[Ke]?a=function(u,i){var o=String(this);if(u===void 0&&i===0)return[];if(!ac(u))return r.call(o,u,i);for(var l=[],d=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(u.sticky?"y":""),f=0,h=i===void 0?Gn:i>>>0,v=new RegExp(u.source,d+"g"),b,w,_;(b=lc.call(v,o))&&(w=v[hn],!(w>f&&(l.push(o.slice(f,b.index)),b[Ke]>1&&b.index<o[Ke]&&fc.apply(l,b.slice(1)),_=b[0][Ke],f=w,l[Ke]>=h)));)v[hn]===b.index&&v[hn]++;return f===o[Ke]?(_||!v.test(""))&&l.push(""):l.push(o.slice(f)),l[Ke]>h?l.slice(0,h):l}:"0"[gt](void 0,0)[Ke]?a=function(u,i){return u===void 0&&i===0?[]:r.call(this,u,i)}:a=r,[function(i,o){var l=t(this),d=i==null?void 0:i[e];return d!==void 0?d.call(i,l,o):a.call(String(l),i,o)},function(u,i){var o=n(a,u,this,i,a!==r);if(o.done)return o.value;var l=uc(u),d=String(this),f=ic(l,RegExp),h=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(Vt?"y":"g"),b=new f(Vt?l:"^(?:"+l.source+")",v),w=i===void 0?Gn:i>>>0;if(w===0)return[];if(d.length===0)return Ou(b,d)===null?[d]:[];for(var _=0,y=0,k=[];y<d.length;){b.lastIndex=Vt?y:0;var P=Ou(b,Vt?d:d.slice(y)),j;if(P===null||(j=cc(sc(b.lastIndex+(Vt?0:y)),d.length))===_)y=oc(d,y,h);else{if(k.push(d.slice(_,y)),k.length===w)return k;for(var L=1;L<=P.length-1;L++)if(k.push(P[L]),k.length===w)return k;y=_=j}}return k.push(d.slice(_)),k}]});var Ur={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Ur.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,a=t&&!t.nodeType&&t,u=typeof Jt=="object"&&Jt;(u.global===u||u.window===u||u.self===u)&&(r=u);var i,o=2147483647,l=36,d=1,f=26,h=38,v=700,b=72,w=128,_="-",y=/^xn--/,k=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,j={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=l-d,F=Math.floor,q=String.fromCharCode,U;function Y(O){throw new RangeError(j[O])}function oe(O,R){for(var z=O.length,ae=[];z--;)ae[z]=R(O[z]);return ae}function K(O,R){var z=O.split("@"),ae="";z.length>1&&(ae=z[0]+"@",O=z[1]),O=O.replace(P,".");var H=O.split("."),J=oe(H,R).join(".");return ae+J}function ee(O){for(var R=[],z=0,ae=O.length,H,J;z<ae;)H=O.charCodeAt(z++),H>=55296&&H<=56319&&z<ae?(J=O.charCodeAt(z++),(J&64512)==56320?R.push(((H&1023)<<10)+(J&1023)+65536):(R.push(H),z--)):R.push(H);return R}function ge(O){return oe(O,function(R){var z="";return R>65535&&(R-=65536,z+=q(R>>>10&1023|55296),R=56320|R&1023),z+=q(R),z}).join("")}function he(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:l}function A(O,R){return O+22+75*(O<26)-((R!=0)<<5)}function $(O,R,z){var ae=0;for(O=z?F(O/v):O>>1,O+=F(O/R);O>L*f>>1;ae+=l)O=F(O/L);return F(ae+(L+1)*O/(O+h))}function D(O){var R=[],z=O.length,ae,H=0,J=w,Q=b,ue,de,ve,se,ye,pe,xe,De,Ce;for(ue=O.lastIndexOf(_),ue<0&&(ue=0),de=0;de<ue;++de)O.charCodeAt(de)>=128&&Y("not-basic"),R.push(O.charCodeAt(de));for(ve=ue>0?ue+1:0;ve<z;){for(se=H,ye=1,pe=l;ve>=z&&Y("invalid-input"),xe=he(O.charCodeAt(ve++)),(xe>=l||xe>F((o-H)/ye))&&Y("overflow"),H+=xe*ye,De=pe<=Q?d:pe>=Q+f?f:pe-Q,!(xe<De);pe+=l)Ce=l-De,ye>F(o/Ce)&&Y("overflow"),ye*=Ce;ae=R.length+1,Q=$(H-se,ae,se==0),F(H/ae)>o-J&&Y("overflow"),J+=F(H/ae),H%=ae,R.splice(H++,0,J)}return ge(R)}function Z(O){var R,z,ae,H,J,Q,ue,de,ve,se,ye,pe=[],xe,De,Ce,Fe;for(O=ee(O),xe=O.length,R=w,z=0,J=b,Q=0;Q<xe;++Q)ye=O[Q],ye<128&&pe.push(q(ye));for(ae=H=pe.length,H&&pe.push(_);ae<xe;){for(ue=o,Q=0;Q<xe;++Q)ye=O[Q],ye>=R&&ye<ue&&(ue=ye);for(De=ae+1,ue-R>F((o-z)/De)&&Y("overflow"),z+=(ue-R)*De,R=ue,Q=0;Q<xe;++Q)if(ye=O[Q],ye<R&&++z>o&&Y("overflow"),ye==R){for(de=z,ve=l;se=ve<=J?d:ve>=J+f?f:ve-J,!(de<se);ve+=l)Fe=de-se,Ce=l-se,pe.push(q(A(se+Fe%Ce,0))),de=F(Fe/Ce);pe.push(q(A(de,0))),J=$(z,De,ae==H),z=0,++ae}++z,++R}return pe.join("")}function M(O){return K(O,function(R){return y.test(R)?D(R.slice(4).toLowerCase()):R})}function ne(O){return K(O,function(R){return k.test(R)?"xn--"+Z(R):R})}if(i={version:"1.4.1",ucs2:{decode:ee,encode:ge},decode:D,encode:Z,toASCII:ne,toUnicode:M},n&&a)if(t.exports==n)a.exports=i;else for(U in i)i.hasOwnProperty(U)&&(n[U]=i[U]);else r.punycode=i})(Jt)})(Ur,Ur.exports);var hc=Ur.exports;const pc=aa(hc);var Ta=be(/(?:(?:[\-a-z0-9#{latinAccentChars}]+)\.)+(?:#{validGTLD}|#{validCCTLD}|#{validPunycode})/gi,{latinAccentChars:or,validGTLD:_a,validCCTLD:ba,validPunycode:ka}),vc=63,gc="xn--",mc={toAscii:function(e){if(!(e.substring(0,4)===gc&&!e.match(Ta))){for(var r=e.split("."),n=0;n<r.length;n++){var a=r[n],u=pc.toASCII(a);if(u.length<1||u.length>vc)return}return r.join(".")}}},Co=be(/^https?:\/\/t\.co\/([a-z0-9]+)(?:\?#{validUrlQueryChars}*#{validUrlQueryEndingChars})?/,{validUrlQueryChars:Ea,validUrlQueryEndingChars:Oa},"i"),bc="https://",yc={extractUrlsWithoutProtocol:!0},wc=4096,_c=40,Bt=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:yc;if(!e||(r.extractUrlsWithoutProtocol?!e.match(/\./):!e.match(/:/)))return[];for(var n=[],a=function(){var o=RegExp.$2,l=RegExp.$3,d=RegExp.$4,f=RegExp.$5,h=RegExp.$7,v=Hn.lastIndex,b=v-l.length;if(!kc(l,d||bc,f))return"continue";if(d){if(l.match(Co)){var y=RegExp.$1;if(y&&y.length>_c)return"continue";l=RegExp.lastMatch,v=b+l.length}n.push({url:l,indices:[b,v]})}else{if(!r.extractUrlsWithoutProtocol||o.match(So))return"continue";var w=null,_=0;if(f.replace(Ta,function(k){var P=f.indexOf(k,_);_=P+k.length,w={url:k,indices:[b+P,b+_]},n.push(w)}),w==null)return"continue";h&&(w.url=l.replace(f,w.url),w.indices[1]=v)}};Hn.exec(e);)var u=a();return n},kc=function(e,r,n){var a=e.length,u=mc.toAscii(n);return!u||!u.length?!1:(a=a+u.length-n.length,r.length+a<=wc)},pn=Ve,xc=Nr,Tu=pt,Uu=it,vn=[].sort,Pu=[1,2,3];pn(pn.P+pn.F*(Uu(function(){Pu.sort(void 0)})||!Uu(function(){Pu.sort(null)})||!ur(vn)),"Array",{sort:function(e){return e===void 0?vn.call(Tu(this)):vn.call(Tu(this),xc(e))}});function Ua(t){t.sort(function(n,a){return n.indices[0]-a.indices[0]});for(var e=t[0],r=1;r<t.length;r++)e.indices[1]>t[r].indices[0]?(t.splice(r,1),r--):e=t[r]}var Pa=/\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf30-\udf40\udf42-\udf49\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud801[\udc00-\udc9d\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00-\ude03\ude05\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude33\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48]|\ud804[\udc00-\udc46\udc7f-\udcba\udcd0-\udce8\udd00-\udd34\udd50-\udd73\udd76\udd80-\uddc4\uddda\ude00-\ude11\ude13-\ude37\udeb0-\udeea\udf01-\udf03\udf05-\udf0c\udf0f\udf10\udf13-\udf28\udf2a-\udf30\udf32\udf33\udf35-\udf39\udf3c-\udf44\udf47\udf48\udf4b-\udf4d\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc80-\udcc5\udcc7\udd80-\uddb5\uddb8-\uddc0\ude00-\ude40\ude44\ude80-\udeb7]|\ud806[\udca0-\udcdf\udcff\udec0-\udef8]|\ud808[\udc00-\udf98]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\udf00-\udf44\udf50-\udf7e\udf8f-\udf9f]|\ud82c[\udc00\udc01]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud83a[\udc00-\udcc4\udcd0-\udcd6]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef]/,$a=/A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u065f\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06ef\u06fa-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07ca-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09f0\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a70-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u103f\u1050-\u108f\u109a-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16f1-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u180b-\u180d\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f\u1aa7\u1ab0-\u1abe\u1b00-\u1b4b\u1b6b-\u1b73\u1b80-\u1baf\u1bba-\u1bf3\u1c00-\u1c37\u1c4d-\u1c4f\u1c5a-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u20d0-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005\u3006\u302a-\u302f\u3031-\u3035\u303b\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua672\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6e5\ua6f0\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8e0-\ua8f7\ua8fb\ua90a-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf\ua9e0-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf870-\uf87f\uf882\uf884-\uf89f\uf8b8\uf8c1-\uf8d6\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc/,Zr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/gm,Eo=be(/(?:[#{bmpLetterAndMarks}]|(?=#{nonBmpCodePairs})(?:#{astralLetterAndMarks}))/,{bmpLetterAndMarks:$a,nonBmpCodePairs:Zr,astralLetterAndMarks:Pa}),Oo=/\ud801[\udca0-\udca9]|\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9\udef0-\udef9]|\ud805[\udcd0-\udcd9\ude50-\ude59\udec0-\udec9]|\ud806[\udce0-\udce9]|\ud81a[\ude60-\ude69\udf50-\udf59]|\ud835[\udfce-\udfff]/,To=/0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0de6-\u0def\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\ua9f0-\ua9f9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19/,Uo=/_\u200c\u200d\ua67e\u05be\u05f3\u05f4\uff5e\u301c\u309b\u309c\u30a0\u30fb\u3003\u0f0b\u0f0c\xb7/,Aa=be(/(?:[#{bmpLetterAndMarks}#{bmpNumerals}#{hashtagSpecialChars}]|(?=#{nonBmpCodePairs})(?:#{astralLetterAndMarks}|#{astralNumerals}))/,{bmpLetterAndMarks:$a,bmpNumerals:To,hashtagSpecialChars:Uo,nonBmpCodePairs:Zr,astralLetterAndMarks:Pa,astralNumerals:Oo}),Po=/(?:[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF])/,$o=be(/(?:^|\uFE0E|\uFE0F|$|(?!#{hashtagAlphaNumeric}|&)#{codePoint})/,{codePoint:Po,hashtagAlphaNumeric:Aa}),Ao=be(/(#{hashtagBoundary})(#{hashSigns})(?!\uFE0F|\u20E3)(#{hashtagAlphaNumeric}*#{hashtagAlpha}#{hashtagAlphaNumeric}*)/gi,{hashtagBoundary:$o,hashSigns:Hr,hashtagAlphaNumeric:Aa,hashtagAlpha:Eo}),Vr=function(e,r){if(r||(r={checkUrlOverlap:!0}),!e||!e.match(Hr))return[];var n=[];if(e.replace(Ao,function(o,l,d,f,h,v){var b=v.slice(h+o.length);if(!b.match(po)){var w=h+l.length,_=w+f.length+1;n.push({hashtag:f,indices:[w,_]})}}),r.checkUrlOverlap){var a=Bt(e);if(a.length>0){var u=n.concat(a);Ua(u),n=[];for(var i=0;i<u.length;i++)u[i].hashtag&&n.push(u[i])}}return n},Wt=/[@＠]/,Ia=be(/^(?:#{atSigns}|[#{latinAccentChars}]|:\/\/)/,{atSigns:Wt,latinAccentChars:or}),Io=/(?:^|[^a-zA-Z0-9_!#$%&*@＠]|(?:^|[^a-zA-Z0-9_+~.-])(?:rt|RT|rT|Rt):?)/,Da=be("(#{validMentionPrecedingChars})(#{atSigns})([a-zA-Z0-9_]{1,20})(/[a-zA-Z][a-zA-Z0-9_-]{0,24})?",{validMentionPrecedingChars:Io,atSigns:Wt},"g");function Xr(t){if(!t||!t.match(Wt))return[];var e=[];return t.replace(Da,function(r,n,a,u,i,o,l){var d=l.slice(o+r.length);if(!d.match(Ia)){i=i||"";var f=o+n.length,h=f+u.length+i.length+1;e.push({screenName:u,listSlug:i,indices:[f,h]})}}),e}function Do(t,e){var r=Bt(t,e).concat(Xr(t)).concat(Vr(t,{checkUrlOverlap:!1})).concat(Wr(t));return r.length==0?[]:(Ua(r),r)}function sr(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var Sc={disabled:!0,readonly:!0,multiple:!0,checked:!0},Cc={urlClass:!0,listClass:!0,usernameClass:!0,hashtagClass:!0,cashtagClass:!0,usernameUrlBase:!0,listUrlBase:!0,hashtagUrlBase:!0,cashtagUrlBase:!0,usernameUrlBlock:!0,listUrlBlock:!0,hashtagUrlBlock:!0,linkUrlBlock:!0,usernameIncludeSymbol:!0,suppressLists:!0,suppressNoFollow:!0,targetBlank:!0,suppressDataScreenName:!0,urlEntities:!0,symbolTag:!0,textWithSymbolTag:!0,urlTarget:!0,invisibleTagAttrs:!0,linkAttributeBlock:!0,linkTextBlock:!0,htmlEscapeNonEntities:!0};function Mo(t){var e={};for(var r in t){var n=t[r];Cc[r]||(Sc[r]&&(n=n?r:null),n!=null&&(e[r]=n))}return e}var Ec={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};function ut(t){return t&&t.replace(/[&"'><]/g,function(e){return Ec[e]})}nt&&/./g.flags!="g"&&rt.f(RegExp.prototype,"flags",{configurable:!0,get:Rr});var Oc=Je,Tc=Rr,Uc=nt,Ma="toString",gn=/./[Ma],$u=function(t){ft(RegExp.prototype,Ma,t,!0)};it(function(){return gn.call({source:"a",flags:"b"})!="/a/b"})?$u(function(){var e=Oc(this);return"/".concat(e.source,"/","flags"in e?e.flags:!Uc&&e instanceof RegExp?Tc.call(e):void 0)}):gn.name!=Ma&&$u(function(){return gn.call(this)});var La=Date.prototype,Au="Invalid Date",Lo="toString",Pc=La[Lo],$c=La.getTime;new Date(NaN)+""!=Au&&ft(La,Lo,function(){var e=$c.call(this);return e===e?Pc.call(this):Au});var Ac=ia,jo={};jo[Ie("toStringTag")]="z";jo+""!="[object z]"&&ft(Object.prototype,"toString",function(){return"[object "+Ac(this)+"]"},!0);var Ic={disabled:!0,readonly:!0,multiple:!0,checked:!0};function Ro(t){var e="";for(var r in t){var n=t[r];Ic[r]&&(n=n?r:null),n!=null&&(e+=" ".concat(ut(r),'="').concat(ut(n.toString()),'"'))}return e}function Pr(t,e,r,n){n.suppressNoFollow||(r.rel="nofollow"),n.linkAttributeBlock&&n.linkAttributeBlock(t,r),n.linkTextBlock&&(e=n.linkTextBlock(t,e));var a={text:e,attr:Ro(r)};return ya("<a#{attr}>#{text}</a>",a)}function qr(t,e,r,n,a){var u=a.symbolTag?"<".concat(a.symbolTag,">").concat(e,"</").concat(a.symbolTag,">"):e;r=ut(r);var i=a.textWithSymbolTag?"<".concat(a.textWithSymbolTag,">").concat(r,"</").concat(a.textWithSymbolTag,">"):r;return a.usernameIncludeSymbol||!e.match(Wt)?Pr(t,u+i,n,a):u+Pr(t,i,n,a)}function No(t,e,r){var n=ut(t.cashtag),a=sr(r.htmlAttrs||{});return a.href=r.cashtagUrlBase+n,a.title="$".concat(n),a.class=r.cashtagClass,r.targetBlank&&(a.target="_blank"),qr(t,"$",n,a,r)}var Fo=/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm;function zo(t,e,r){var n=e.substring(t.indices[0],t.indices[0]+1),a=ut(t.hashtag),u=sr(r.htmlAttrs||{});return u.href=r.hashtagUrlBase+a,u.title="#".concat(a),u.class=r.hashtagClass,a.charAt(0).match(Fo)&&(u.class+=" rtl"),r.targetBlank&&(u.target="_blank"),qr(t,n,a,u,r)}function Bo(t,e){var r=t.display_url,n=t.expanded_url,a=r.replace(/…/g,"");if(n.indexOf(a)!=-1){var u=n.indexOf(a),i={displayUrlSansEllipses:a,beforeDisplayUrl:n.substr(0,u),afterDisplayUrl:n.substr(u+a.length),precedingEllipsis:r.match(/^…/)?"…":"",followingEllipsis:r.match(/…$/)?"…":""};for(var o in i)i.hasOwnProperty(o)&&(i[o]=ut(i[o]));return i.invisible=e.invisibleTagAttrs,ya("<span class='tco-ellipsis'>#{precedingEllipsis}<span #{invisible}>&nbsp;</span></span><span #{invisible}>#{beforeDisplayUrl}</span><span class='js-display-url'>#{displayUrlSansEllipses}</span><span #{invisible}>#{afterDisplayUrl}</span><span class='tco-ellipsis'><span #{invisible}>&nbsp;</span>#{followingEllipsis}</span>",i)}return r}var Wo=/^https?:\/\//i;function Ho(t,e,r){var n=t.url,a=n,u=ut(a),i=r.urlEntities&&r.urlEntities[n]||t;i.display_url&&(u=Bo(i,r));var o=sr(r.htmlAttrs||{});return n.match(Wo)||(n="http://".concat(n)),o.href=n,r.targetBlank&&(o.target="_blank"),r.urlClass&&(o.class=r.urlClass),r.urlTarget&&(o.target=r.urlTarget),!r.title&&i.display_url&&(o.title=i.expanded_url),Pr(t,u,o,r)}function Go(t,e,r){var n=e.substring(t.indices[0],t.indices[0]+1),a=ut(t.screenName),u=ut(t.listSlug),i=t.listSlug&&!r.suppressLists,o=sr(r.htmlAttrs||{});return o.class=i?r.listClass:r.usernameClass,o.href=i?r.listUrlBase+a+u:r.usernameUrlBase+a,!i&&!r.suppressDataScreenName&&(o["data-screen-name"]=a),r.targetBlank&&(o.target="_blank"),qr(t,n,i?a+u:a,o,r)}var Dc="tweet-url list-slug",Mc="tweet-url username",Lc="tweet-url hashtag",jc="tweet-url cashtag";function Ut(t,e,n){var n=sr(n||{});n.hashtagClass=n.hashtagClass||Lc,n.hashtagUrlBase=n.hashtagUrlBase||"https://twitter.com/search?q=%23",n.cashtagClass=n.cashtagClass||jc,n.cashtagUrlBase=n.cashtagUrlBase||"https://twitter.com/search?q=%24",n.listClass=n.listClass||Dc,n.usernameClass=n.usernameClass||Mc,n.usernameUrlBase=n.usernameUrlBase||"https://twitter.com/",n.listUrlBase=n.listUrlBase||"https://twitter.com/",n.htmlAttrs=Mo(n),n.invisibleTagAttrs=n.invisibleTagAttrs||"style='position:absolute;left:-9999px;'";var a,u,i;if(n.urlEntities){for(a={},u=0,i=n.urlEntities.length;u<i;u++)a[n.urlEntities[u].url]=n.urlEntities[u];n.urlEntities=a}var o="",l=0;e.sort(function(h,v){return h.indices[0]-v.indices[0]});for(var d=n.htmlEscapeNonEntities?ut:function(h){return h},u=0;u<e.length;u++){var f=e[u];o+=d(t.substring(l,f.indices[0])),f.url?o+=Ho(f,t,n):f.hashtag?o+=zo(f,t,n):f.screenName?o+=Go(f,t,n):f.cashtag&&(o+=No(f,t,n)),l=f.indices[1]}return o+=d(t.substring(l,t.length)),o}function Rc(t,e){var r=Do(t,{extractUrlsWithoutProtocol:!1});return Ut(t,r,e)}function Nc(t,e){var r=Wr(t);return Ut(t,r,e)}function Fc(t,e){var r=Vr(t);return Ut(t,r,e)}function zc(t,e){var r=Bt(t,{extractUrlsWithoutProtocol:!1});return Ut(t,r,e)}function Bc(t,e){var r=Xr(t);return Ut(t,r,e)}var Zo=function(e,r,n){if(r.length!==0){var a=0,u=0;r.sort(function(f,h){return f.indices[0]-h.indices[0]});for(var i=0,o=r[0];a<e.length;){if(o.indices[0]===(n?a:u)){var l=o.indices[1]-o.indices[0];if(o.indices[0]=n?u:a,o.indices[1]=o.indices[0]+l,i++,i===r.length)break;o=r[i]}var d=e.charCodeAt(a);d>=55296&&d<=56319&&a<e.length-1&&(d=e.charCodeAt(a+1),d>=56320&&d<=57343&&a++),u++,a++}}};function Vo(t,e){Zo(t,e,!1)}function Wc(t,e,r){if(e.user_mentions)for(var n=0;n<e.user_mentions.length;n++)e.user_mentions[n].screenName=e.user_mentions[n].screen_name;if(e.hashtags)for(var n=0;n<e.hashtags.length;n++)e.hashtags[n].hashtag=e.hashtags[n].text;if(e.symbols)for(var n=0;n<e.symbols.length;n++)e.symbols[n].cashtag=e.symbols[n].text;var a=[];for(var u in e)a=a.concat(e[u]);return Vo(t,a),Ut(t,a,r)}const Ft={version1:{version:1,maxWeightedTweetLength:140,scale:1,defaultWeight:1,transformedURLLength:23,ranges:[]},version2:{version:2,maxWeightedTweetLength:280,scale:100,defaultWeight:200,transformedURLLength:23,ranges:[{start:0,end:4351,weight:100},{start:8192,end:8205,weight:100},{start:8208,end:8223,weight:100},{start:8242,end:8247,weight:100}]},version3:{version:3,maxWeightedTweetLength:280,scale:100,defaultWeight:200,emojiParsingEnabled:!0,transformedURLLength:23,ranges:[{start:0,end:4351,weight:100},{start:8192,end:8205,weight:100},{start:8208,end:8223,weight:100},{start:8242,end:8247,weight:100}]},defaults:{version:3,maxWeightedTweetLength:280,scale:100,defaultWeight:200,emojiParsingEnabled:!0,transformedURLLength:23,ranges:[{start:0,end:4351,weight:100},{start:8192,end:8205,weight:100},{start:8208,end:8223,weight:100},{start:8242,end:8247,weight:100}]}};function Hc(t,e,r){if(e.length!=0){var n=0,a=0;e.sort(function(d,f){return d.indices[0]-f.indices[0]});for(var u=0,i=e[0];n<t.length;){if(i.indices[0]==(r?n:a)){var o=i.indices[1]-i.indices[0];if(i.indices[0]=r?a:n,i.indices[1]=i.indices[0]+o,u++,u==e.length)break;i=e[u]}var l=t.charCodeAt(n);l>=55296&&l<=56319&&n<t.length-1&&(l=t.charCodeAt(n+1),l>=56320&&l<=57343&&n++),a++,n++}}}function Gc(t){for(var e=[],r=Wr(t),n=0;n<r.length;n++)e.push(r[n].cashtag);return e}function Xo(t){for(var e=[],r=Vr(t),n=0;n<r.length;n++)e.push(r[n].hashtag);return e}function qo(t){for(var e=[],r,n=Xr(t),a=0;a<n.length;a++)r=n[a],r.listSlug===""&&e.push({screenName:r.screenName,indices:r.indices});return e}function Yo(t){for(var e=[],r=qo(t),n=0;n<r.length;n++){var a=r[n].screenName;e.push(a)}return e}var Jo=be(/^(?:#{spaces})*#{atSigns}([a-zA-Z0-9_]{1,20})/,{atSigns:Wt,spaces:ma});function Zc(t){if(!t)return null;var e=t.match(Jo);return!e||RegExp.rightContext.match(Ia)?null:e[1]}function Vc(t,e){for(var r=[],n=Bt(t,e),a=0;a<n.length;a++)r.push(n[a].url);return r}var Xc=Lr,ja=Array.isArray||function(e){return Xc(e)=="Array"},Iu=Ve;Iu(Iu.S,"Array",{isArray:ja});var qc=function(e,r){var n=r.defaultWeight,a=r.ranges,u=n,i=e.charCodeAt(0);if(Array.isArray(a))for(var o=0,l=a.length;o<l;o++){var d=a[o];if(i>=d.start&&i<=d.end){u=d.weight;break}}return u};function Yc(t,e){Zo(t,e,!0)}var Jc=Nr,Qc=pt,Kc=fa,ef=Et,tf=function(t,e,r,n,a){Jc(e);var u=Qc(t),i=Kc(u),o=ef(u.length),l=a?o-1:0,d=a?-1:1;if(r<2)for(;;){if(l in i){n=i[l],l+=d;break}if(l+=d,a?l<0:o<=l)throw TypeError("Reduce of empty array with no initial value")}for(;a?l>=0:o>l;l+=d)l in i&&(n=e(n,i[l],l,u));return n},mn=Ve,rf=tf;mn(mn.P+mn.F*!ur([].reduce,!0),"Array",{reduce:function(e){return rf(this,e,arguments.length,arguments[1],!1)}});var Zn=Ie("unscopables"),Vn=Array.prototype;Vn[Zn]==null&&vt(Vn,Zn,{});var nf=function(t){Vn[Zn][t]=!0},af=function(t,e){return{value:e,done:!!t}},lr={},uf=lo,of=va,dr=Object.keys||function(e){return uf(e,of)},bn,Du;function Qo(){if(Du)return bn;Du=1;var t=rt,e=Je,r=dr;return bn=nt?Object.defineProperties:function(a,u){e(a);for(var i=r(u),o=i.length,l=0,d;o>l;)t.f(a,d=i[l++],u[d]);return a},bn}var yn,Mu;function sf(){if(Mu)return yn;Mu=1;var t=tt.document;return yn=t&&t.documentElement,yn}var lf=Je,df=Qo(),Lu=va,cf=pa("IE_PROTO"),wn=function(){},Xn="prototype",Cr=function(){var t=ro()("iframe"),e=Lu.length,r="<",n=">",a;for(t.style.display="none",sf().appendChild(t),t.src="javascript:",a=t.contentWindow.document,a.open(),a.write(r+"script"+n+"document.F=Object"+r+"/script"+n),a.close(),Cr=a.F;e--;)delete Cr[Xn][Lu[e]];return Cr()},Ko=Object.create||function(e,r){var n;return e!==null?(wn[Xn]=lf(e),n=new wn,wn[Xn]=null,n[cf]=e):n=Cr(),r===void 0?n:df(n,r)},ff=rt.f,hf=Ot,ju=Ie("toStringTag"),Ra=function(t,e,r){t&&!hf(t=r?t:t.prototype,ju)&&ff(t,ju,{configurable:!0,value:e})},pf=Ko,vf=ar,gf=Ra,es={};vt(es,Ie("iterator"),function(){return this});var mf=function(t,e,r){t.prototype=pf(es,{next:vf(1,r)}),gf(t,e+" Iterator")},bf=Ot,yf=pt,Ru=pa("IE_PROTO"),wf=Object.prototype,_f=Object.getPrototypeOf||function(t){return t=yf(t),bf(t,Ru)?t[Ru]:typeof t.constructor=="function"&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?wf:null},_n=Ve,kf=ft,Nu=vt,Fu=lr,xf=mf,Sf=Ra,Cf=_f,Xt=Ie("iterator"),kn=!([].keys&&"next"in[].keys()),Ef="@@iterator",zu="keys",br="values",Bu=function(){return this},ts=function(t,e,r,n,a,u,i){xf(r,e,n);var o=function(j){if(!kn&&j in h)return h[j];switch(j){case zu:return function(){return new r(this,j)};case br:return function(){return new r(this,j)}}return function(){return new r(this,j)}},l=e+" Iterator",d=a==br,f=!1,h=t.prototype,v=h[Xt]||h[Ef]||a&&h[a],b=v||o(a),w=a?d?o("entries"):b:void 0,_=e=="Array"&&h.entries||v,y,k,P;if(_&&(P=Cf(_.call(new t)),P!==Object.prototype&&P.next&&(Sf(P,l,!0),typeof P[Xt]!="function"&&Nu(P,Xt,Bu))),d&&v&&v.name!==br&&(f=!0,b=function(){return v.call(this)}),(kn||f||!h[Xt])&&Nu(h,Xt,b),Fu[e]=b,Fu[l]=Bu,a)if(y={values:d?b:o(br),keys:u?b:o(zu),entries:w},i)for(k in y)k in h||kf(h,k,y[k]);else _n(_n.P+_n.F*(kn||f),e,y);return y},Na=nf,yr=af,Wu=lr,Of=Tt,Tf=ts(Array,"Array",function(t,e){this._t=Of(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,yr(1)):e=="keys"?yr(0,r):e=="values"?yr(0,t[r]):yr(0,[r,t[r]])},"values");Wu.Arguments=Wu.Array;Na("keys");Na("values");Na("entries");var Hu=Tf,Uf=dr,Pf=ft,$f=tt,Gu=vt,rs=lr,ns=Ie,Zu=ns("iterator"),Vu=ns("toStringTag"),Xu=rs.Array,qu={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1};for(var Yu=Uf(qu),xn=0;xn<Yu.length;xn++){var wr=Yu[xn],Af=qu[wr],Ju=$f[wr],mt=Ju&&Ju.prototype,_r;if(mt&&(mt[Zu]||Gu(mt,Zu,Xu),mt[Vu]||Gu(mt,Vu,wr),rs[wr]=Xu,Af))for(_r in Hu)mt[_r]||Pf(mt,_r,Hu[_r],!0)}var Sn=Ve,If=zt,Df=it,Mf=function(t,e){var r=(If.Object||{})[t]||Object[t],n={};n[t]=e(r),Sn(Sn.S+Sn.F*Df(function(){r(1)}),"Object",n)},Lf=pt,jf=dr;Mf("keys",function(){return function(e){return jf(Lf(e))}});var as=be(/[#{invalidCharsGroup}]/,{invalidCharsGroup:Gr});function Fa(t){return as.test(t)}var cr={},za={};Object.defineProperty(za,"__esModule",{value:!0});za.default=/(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddb0-\uddb3])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a-\udc6d\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\udeeb\udeec\udef4-\udef9]|\ud83e[\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd40-\udd45\udd47-\udd70\udd73-\udd76\udd7a\udd7c-\udda2\uddb4\uddb7\uddc0-\uddc2\uddd0\uddde-\uddff]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g;Object.defineProperty(cr,"__esModule",{value:!0});cr.TypeName=void 0;var Rf=cr.parse=Bf;cr.toCodePoints=us;var Nf=za,Cn=Ff(Nf);function Ff(t){return t&&t.__esModule?t:{default:t}}var zf=cr.TypeName="emoji";function Bf(t,e){var r=e&&e.assetType?e.assetType:"svg",n=e&&e.buildUrl?e.buildUrl:function(l,d){return d==="png"?"https://twemoji.maxcdn.com/2/72x72/"+l+".png":"https://twemoji.maxcdn.com/2/svg/"+l+".svg"},a=[];for(Cn.default.lastIndex=0;;){var u=Cn.default.exec(t);if(!u)break;var i=u[0],o=us(Gf(i)).join("-");a.push({url:o?n(o,r):"",indices:[u.index,Cn.default.lastIndex],text:i,type:zf})}return a}var Wf=/\uFE0F/g,Hf="‍",Gf=function(e){return e.indexOf(Hf)<0?e.replace(Wf,""):e};function us(t){for(var e=[],r=0,n=0,a=0;a<t.length;)r=t.charCodeAt(a++),n?(e.push((65536+(n-55296<<10)+(r-56320)).toString(16)),n=0):r>55296&&r<=56319?n=r:e.push(r.toString(16));return e}var Zf=/^https:\/\//i,is=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.defaults,n=Object.keys(r).length?r:Ft.defaults,a=n.defaultWeight,u=n.emojiParsingEnabled,i=n.scale,o=n.maxWeightedTweetLength,l=n.transformedURLLength,d=typeof String.prototype.normalize=="function"?e.normalize():e,f=Qu(Bt(d)),h=u?Qu(Rf(d)):[],v=d.length,b=0,w=0,_=!0,y=0;y<v;y++){if(f[y]){var k=f[y],P=k.url;k.indices,b+=l*i,y+=P.length-1}else if(u&&h[y]){var j=h[y],L=j.text;j.indices,b+=a,y+=L.length-1}else y+=Vf(d,y)?1:0,b+=qc(d.charAt(y),n);_&&(_=!Fa(d.substring(y,y+1))),_&&b<=o*i&&(w=y)}b=b/i,_=_&&b>0&&b<=o;var F=Math.floor(b/o*1e3),q=e.length-d.length;return w+=q,{weightedLength:b,valid:_,permillage:F,validRangeStart:0,validRangeEnd:w,displayRangeStart:0,displayRangeEnd:e.length>0?e.length-1:0}},Qu=function(e){return e.reduce(function(r,n){return r[n.indices[0]]=n,r},{})},Vf=function(e,r){if(r<e.length-1){var n=e.charCodeAt(r),a=e.charCodeAt(r+1);return 55296<=n&&n<=56319&&56320<=a&&a<=57343}return!1},os=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.defaults;return is(e,r).weightedLength};function ss(t){return t.replace(Zr," ").length}function ls(t){for(var e=t.split("<"),r,n=[],a,u=0;u<e.length;u+=1)if(a=e[u],!a)n.push("");else{r=a.split(">");for(var i=0;i<r.length;i+=1)n.push(r[i])}return n}function Xf(t,e,r){var n="em";if(e=e||[],r=r||{},e.length===0)return t;var a=r.tag||n,u=["<".concat(a,">"),"</".concat(a,">")],i=ls(t),o,l,d="",f=0,h=i[0],v=0,b=0,w=!1,_=h,y=[],k,P,j,L,F;for(o=0;o<e.length;o+=1)for(l=0;l<e[o].length;l+=1)y.push(e[o][l]);for(k=0;k<y.length;k+=1){for(P=y[k],j=u[k%2],L=!1;h!=null&&P>=v+h.length;)d+=_.slice(b),w&&P===v+_.length&&(d+=j,L=!0),i[f+1]&&(d+="<".concat(i[f+1],">")),v+=_.length,b=0,f+=2,h=i[f],_=h,w=!1;!L&&h!=null?(F=P-v,d+=_.slice(b,F)+j,b=F,k%2===0?w=!0:w=!1):L||(L=!0,d+=j)}if(h!=null)for(b<_.length&&(d+=_.slice(b)),k=f+1;k<i.length;k+=1)d+=k%2===0?i[k]:"<".concat(i[k],">");return d}var En=Ve;En(En.S+En.F*!nt,"Object",{defineProperty:rt.f});var On=Ve;On(On.S+On.F*!nt,"Object",{defineProperties:Qo()});var Yr={};Yr.f=Object.getOwnPropertySymbols;var qf=ir,Yf=Yr,Jf=Je,Ku=tt.Reflect,Qf=Ku&&Ku.ownKeys||function(e){var r=qf.f(Jf(e)),n=Yf.f;return n?r.concat(n(e)):r},Kf=rt,e0=ar,ds=function(t,e,r){e in t?Kf.f(t,e,e0(0,r)):t[e]=r},ei=Ve,t0=Qf,r0=Tt,n0=zr,a0=ds;ei(ei.S,"Object",{getOwnPropertyDescriptors:function(e){for(var r=r0(e),n=n0.f,a=t0(r),u={},i=0,o,l;a.length>i;)l=n(r,o=a[i++]),l!==void 0&&a0(u,o,l);return u}});var u0=ct,ti=ja,i0=Ie("species"),o0=function(t){var e;return ti(t)&&(e=t.constructor,typeof e=="function"&&(e===Array||ti(e.prototype))&&(e=void 0),u0(e)&&(e=e[i0],e===null&&(e=void 0))),e===void 0?Array:e},s0=o0,l0=function(t,e){return new(s0(t))(e)},d0=Fr,c0=fa,f0=pt,h0=Et,p0=l0,cs=function(t,e){var r=t==1,n=t==2,a=t==3,u=t==4,i=t==6,o=t==5||i,l=e||p0;return function(d,f,h){for(var v=f0(d),b=c0(v),w=d0(f,h,3),_=h0(b.length),y=0,k=r?l(d,_):n?l(d,0):void 0,P,j;_>y;y++)if((o||y in b)&&(P=b[y],j=w(P,y,v),t)){if(r)k[y]=j;else if(j)switch(t){case 3:return!0;case 5:return P;case 6:return y;case 2:k.push(P)}else if(u)return!1}return i?-1:a||u?u:k}},Tn=Ve,v0=cs(0),g0=ur([].forEach,!0);Tn(Tn.P+Tn.F*!g0,"Array",{forEach:function(e){return v0(this,e,arguments[1])}});var Un=Ve,m0=cs(2);Un(Un.P+Un.F*!ur([].filter,!0),"Array",{filter:function(e){return m0(this,e,arguments[1])}});var fs={exports:{}},kt=nr("meta"),b0=ct,Ba=Ot,y0=rt.f,w0=0,Jr=Object.isExtensible||function(){return!0},_0=!it(function(){return Jr(Object.preventExtensions({}))}),Wa=function(t){y0(t,kt,{value:{i:"O"+ ++w0,w:{}}})},k0=function(t,e){if(!b0(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!Ba(t,kt)){if(!Jr(t))return"F";if(!e)return"E";Wa(t)}return t[kt].i},x0=function(t,e){if(!Ba(t,kt)){if(!Jr(t))return!0;if(!e)return!1;Wa(t)}return t[kt].w},S0=function(t){return _0&&C0.NEED&&Jr(t)&&!Ba(t,kt)&&Wa(t),t},C0=fs.exports={KEY:kt,NEED:!1,fastKey:k0,getWeak:x0,onFreeze:S0},E0=fs.exports,Ha={};Ha.f=Ie;var O0=tt,ri=zt,T0=Ha,U0=rt.f,P0=function(t){var e=ri.Symbol||(ri.Symbol=O0.Symbol||{});t.charAt(0)!="_"&&!(t in e)&&U0(e,t,{value:T0.f(t)})},$0=dr,A0=Yr,I0=Br,D0=function(t){var e=$0(t),r=A0.f;if(r)for(var n=r(t),a=I0.f,u=0,i;n.length>u;)a.call(t,i=n[u++])&&e.push(i);return e},hs={},M0=Tt,ps=ir.f,L0={}.toString,vs=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],j0=function(t){try{return ps(t)}catch{return vs.slice()}};hs.f=function(e){return vs&&L0.call(e)=="[object Window]"?j0(e):ps(M0(e))};var Qr=tt,Ae=Ot,qn=nt,Ne=Ve,ni=ft,R0=E0.KEY,Ga=it,Za=jr,Va=Ra,N0=nr,fr=Ie,F0=Ha,z0=P0,B0=D0,W0=ja,Yn=Je,H0=ct,G0=pt,Kr=Tt,Xa=la,Jn=ar,tr=Ko,gs=hs,ms=zr,en=Yr,bs=rt,Z0=dr,ys=ms.f,bt=bs.f,ws=gs.f,Ze=Qr.Symbol,$r=Qr.JSON,kr=$r&&$r.stringify,ht="prototype",Ge=fr("_hidden"),ai=fr("toPrimitive"),V0={}.propertyIsEnumerable,qt=Za("symbol-registry"),dt=Za("symbols"),hr=Za("op-symbols"),et=Object[ht],Ht=typeof Ze=="function"&&!!en.f,Pn=Qr.QObject,Qn=!Pn||!Pn[ht]||!Pn[ht].findChild,Kn=qn&&Ga(function(){return tr(bt({},"a",{get:function(){return bt(this,"a",{value:7}).a}})).a!=7})?function(t,e,r){var n=ys(et,e);n&&delete et[e],bt(t,e,r),n&&t!==et&&bt(et,e,n)}:bt,ui=function(t){var e=dt[t]=tr(Ze[ht]);return e._k=t,e},ea=Ht&&typeof Ze.iterator=="symbol"?function(t){return typeof t=="symbol"}:function(t){return t instanceof Ze},tn=function(e,r,n){return e===et&&tn(hr,r,n),Yn(e),r=Xa(r,!0),Yn(n),Ae(dt,r)?(n.enumerable?(Ae(e,Ge)&&e[Ge][r]&&(e[Ge][r]=!1),n=tr(n,{enumerable:Jn(0,!1)})):(Ae(e,Ge)||bt(e,Ge,Jn(1,{})),e[Ge][r]=!0),Kn(e,r,n)):bt(e,r,n)},_s=function(e,r){Yn(e);for(var n=B0(r=Kr(r)),a=0,u=n.length,i;u>a;)tn(e,i=n[a++],r[i]);return e},X0=function(e,r){return r===void 0?tr(e):_s(tr(e),r)},ii=function(e){var r=V0.call(this,e=Xa(e,!0));return this===et&&Ae(dt,e)&&!Ae(hr,e)?!1:r||!Ae(this,e)||!Ae(dt,e)||Ae(this,Ge)&&this[Ge][e]?r:!0},ks=function(e,r){if(e=Kr(e),r=Xa(r,!0),!(e===et&&Ae(dt,r)&&!Ae(hr,r))){var n=ys(e,r);return n&&Ae(dt,r)&&!(Ae(e,Ge)&&e[Ge][r])&&(n.enumerable=!0),n}},xs=function(e){for(var r=ws(Kr(e)),n=[],a=0,u;r.length>a;)!Ae(dt,u=r[a++])&&u!=Ge&&u!=R0&&n.push(u);return n},Ss=function(e){for(var r=e===et,n=ws(r?hr:Kr(e)),a=[],u=0,i;n.length>u;)Ae(dt,i=n[u++])&&(!r||Ae(et,i))&&a.push(dt[i]);return a};Ht||(Ze=function(){if(this instanceof Ze)throw TypeError("Symbol is not a constructor!");var e=N0(arguments.length>0?arguments[0]:void 0),r=function(n){this===et&&r.call(hr,n),Ae(this,Ge)&&Ae(this[Ge],e)&&(this[Ge][e]=!1),Kn(this,e,Jn(1,n))};return qn&&Qn&&Kn(et,e,{configurable:!0,set:r}),ui(e)},ni(Ze[ht],"toString",function(){return this._k}),ms.f=ks,bs.f=tn,ir.f=gs.f=xs,Br.f=ii,en.f=Ss,qn&&!_l&&ni(et,"propertyIsEnumerable",ii,!0),F0.f=function(t){return ui(fr(t))});Ne(Ne.G+Ne.W+Ne.F*!Ht,{Symbol:Ze});for(var oi="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),si=0;oi.length>si;)fr(oi[si++]);for(var li=Z0(fr.store),di=0;li.length>di;)z0(li[di++]);Ne(Ne.S+Ne.F*!Ht,"Symbol",{for:function(t){return Ae(qt,t+="")?qt[t]:qt[t]=Ze(t)},keyFor:function(e){if(!ea(e))throw TypeError(e+" is not a symbol!");for(var r in qt)if(qt[r]===e)return r},useSetter:function(){Qn=!0},useSimple:function(){Qn=!1}});Ne(Ne.S+Ne.F*!Ht,"Object",{create:X0,defineProperty:tn,defineProperties:_s,getOwnPropertyDescriptor:ks,getOwnPropertyNames:xs,getOwnPropertySymbols:Ss});var q0=Ga(function(){en.f(1)});Ne(Ne.S+Ne.F*q0,"Object",{getOwnPropertySymbols:function(e){return en.f(G0(e))}});$r&&Ne(Ne.S+Ne.F*(!Ht||Ga(function(){var t=Ze();return kr([t])!="[null]"||kr({a:t})!="{}"||kr(Object(t))!="{}"})),"JSON",{stringify:function(e){for(var r=[e],n=1,a,u;arguments.length>n;)r.push(arguments[n++]);if(u=a=r[1],!(!H0(a)&&e===void 0||ea(e)))return W0(a)||(a=function(i,o){if(typeof u=="function"&&(o=u.call(this,i,o)),!ea(o))return o}),r[1]=a,kr.apply($r,r)}});Ze[ht][ai]||vt(Ze[ht],ai,Ze[ht].valueOf);Va(Ze,"Symbol");Va(Math,"Math",!0);Va(Qr.JSON,"JSON",!0);function rr(t){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rr(t)}function Y0(t,e){if(rr(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rr(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function J0(t){var e=Y0(t,"string");return rr(e)=="symbol"?e:e+""}function Q0(t,e,r){return(e=J0(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ci(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function K0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ci(r,!0).forEach(function(n){Q0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ci(r).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Cs(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ft.defaults;if(!t)return"empty";var r=K0({},Ft.defaults,{},e),n=r.maxWeightedTweetLength;return os(t,r)>n?"too_long":Fa(t)?"invalid_characters":!1}function eh(t){if(!t)return!1;var e=Xo(t);return e.length===1&&e[0]===t.slice(1)}var th=be(/^#{validMentionOrList}$/,{validMentionOrList:Da});function rh(t){var e=t.match(th);return!!(e&&e[1]==""&&e[4])}function nh(t,e){return!Cs(t,e)}var qa=/[a-z\u0400-\u04FF0-9\-._~]/i,Ya=/(?:%[0-9a-f]{2})/i,Ja=/[!$&'()*+,;=]/i,Qa=be("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|:)*",{validateUrlUnreserved:qa,validateUrlPctEncoded:Ya,validateUrlSubDelims:Ja},"i"),Es=/(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?)/i,Os=/(?:[a-z](?:[a-z0-9\-]*[a-z0-9])?)/i,Ts=/(?:[a-z0-9](?:[a-z0-9_\-]*[a-z0-9])?)/i,Us=be(/(?:(?:#{validateUrlSubDomainSegment}\.)*(?:#{validateUrlDomainSegment}\.)#{validateUrlDomainTld})/i,{validateUrlSubDomainSegment:Ts,validateUrlDomainSegment:Es,validateUrlDomainTld:Os}),Ps=/(?:[0-9]|(?:[1-9][0-9])|(?:1[0-9]{2})|(?:2[0-4][0-9])|(?:25[0-5]))/i,$s=be(/(?:#{validateUrlDecOctet}(?:\.#{validateUrlDecOctet}){3})/i,{validateUrlDecOctet:Ps}),As=/(?:\[[a-f0-9:\.]+\])/i,Ka=be("(?:#{validateUrlIpv4}|#{validateUrlIpv6})",{validateUrlIpv4:$s,validateUrlIpv6:As},"i"),Is=be("(?:#{validateUrlIp}|#{validateUrlDomain})",{validateUrlIp:Ka,validateUrlDomain:Us},"i"),eu=/[0-9]{1,5}/,Ds=be("(?:(#{validateUrlUserinfo})@)?(#{validateUrlHost})(?::(#{validateUrlPort}))?",{validateUrlUserinfo:Qa,validateUrlHost:Is,validateUrlPort:eu},"i"),rn=be("(?:#{validateUrlUnreserved}|#{validateUrlPctEncoded}|#{validateUrlSubDelims}|[:|@])",{validateUrlUnreserved:qa,validateUrlPctEncoded:Ya,validateUrlSubDelims:Ja},"i"),Ms=be(/(#{validateUrlPchar}|\/|\?)*/i,{validateUrlPchar:rn}),Ls=be(/(\/#{validateUrlPchar}*)*/i,{validateUrlPchar:rn}),js=be(/(#{validateUrlPchar}|\/|\?)*/i,{validateUrlPchar:rn}),Rs=/(?:[a-z][a-z0-9+\-.]*)/i,Ns=be("^(?:([^:/?#]+):\\/\\/)?([^/?#]*)([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$","i"),Fs=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9_\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,zs=/(?:(?:[a-z0-9]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,Bs=/(?:(?:[a-z]|[^\u0000-\u007f])(?:(?:[a-z0-9\-]|[^\u0000-\u007f])*(?:[a-z0-9]|[^\u0000-\u007f]))?)/i,Ws=be(/(?:(?:#{validateUrlUnicodeSubDomainSegment}\.)*(?:#{validateUrlUnicodeDomainSegment}\.)#{validateUrlUnicodeDomainTld})/i,{validateUrlUnicodeSubDomainSegment:Fs,validateUrlUnicodeDomainSegment:zs,validateUrlUnicodeDomainTld:Bs}),Hs=be("(?:#{validateUrlIp}|#{validateUrlUnicodeDomain})",{validateUrlIp:Ka,validateUrlUnicodeDomain:Ws},"i"),Gs=be("(?:(#{validateUrlUserinfo})@)?(#{validateUrlUnicodeHost})(?::(#{validateUrlPort}))?",{validateUrlUserinfo:Qa,validateUrlUnicodeHost:Hs,validateUrlPort:eu},"i");function At(t,e,r){return r?!t||t.match(e)&&RegExp["$&"]===t:typeof t=="string"&&t.match(e)&&RegExp["$&"]===t}function ah(t,e,r){if(e==null&&(e=!0),r==null&&(r=!0),!t)return!1;var n=t.match(Ns);if(!n||n[0]!==t)return!1;var a=n[1],u=n[2],i=n[3],o=n[4],l=n[5];return(!r||At(a,Rs)&&a.match(/^https?$/i))&&At(i,Ls)&&At(o,js,!0)&&At(l,Ms,!0)?e&&At(u,Gs)||!e&&At(u,Ds):!1}function uh(t){if(!t)return!1;var e=Yo(t);return e.length===1&&e[0]===t.slice(1)}const ih={astralLetterAndMarks:Pa,astralNumerals:Oo,atSigns:Wt,bmpLetterAndMarks:$a,bmpNumerals:To,cashtag:so,codePoint:Po,cyrillicLettersAndMarks:xa,endHashtagMatch:po,endMentionMatch:Ia,extractUrl:Hn,hashSigns:Hr,hashtagAlpha:Eo,hashtagAlphaNumeric:Aa,hashtagBoundary:$o,hashtagSpecialChars:Uo,invalidChars:as,invalidCharsGroup:Gr,invalidDomainChars:go,invalidUrlWithoutProtocolPrecedingChars:So,latinAccentChars:or,nonBmpCodePairs:Zr,punct:ha,rtlChars:Fo,spaces:ma,spacesGroup:ga,urlHasHttps:Zf,urlHasProtocol:Wo,validAsciiDomain:Ta,validateUrlAuthority:Ds,validateUrlDecOctet:Ps,validateUrlDomain:Us,validateUrlDomainSegment:Es,validateUrlDomainTld:Os,validateUrlFragment:Ms,validateUrlHost:Is,validateUrlIp:Ka,validateUrlIpv4:$s,validateUrlIpv6:As,validateUrlPath:Ls,validateUrlPchar:rn,validateUrlPctEncoded:Ya,validateUrlPort:eu,validateUrlQuery:js,validateUrlScheme:Rs,validateUrlSubDelims:Ja,validateUrlSubDomainSegment:Ts,validateUrlUnencoded:Ns,validateUrlUnicodeAuthority:Gs,validateUrlUnicodeDomain:Ws,validateUrlUnicodeDomainSegment:zs,validateUrlUnicodeDomainTld:Bs,validateUrlUnicodeHost:Hs,validateUrlUnicodeSubDomainSegment:Fs,validateUrlUnreserved:qa,validateUrlUserinfo:Qa,validCashtag:ho,validCCTLD:ba,validDomain:yo,validDomainChars:wa,validDomainName:mo,validGeneralUrlPathChars:Sa,validGTLD:_a,validHashtag:Ao,validMentionOrList:Da,validMentionPrecedingChars:Io,validPortNumber:wo,validPunycode:ka,validReply:Jo,validSubdomain:bo,validTcoUrl:Co,validUrlBalancedParens:Ca,validUrlPath:ko,validUrlPathEndingChars:_o,validUrlPrecedingChars:xo,validUrlQueryChars:Ea,validUrlQueryEndingChars:Oa};var oh=Yi(!0);ts(String,"String",function(t){this._t=String(t),this._i=0},function(){var t=this._t,e=this._i,r;return e>=t.length?{value:void 0,done:!0}:(r=oh(t,e),this._i+=r.length,{value:r,done:!1})});var fi=Je,sh=function(t,e,r,n){try{return n?e(fi(r)[0],r[1]):e(r)}catch(u){var a=t.return;throw a!==void 0&&fi(a.call(t)),u}},lh=lr,dh=Ie("iterator"),ch=Array.prototype,fh=function(t){return t!==void 0&&(lh.Array===t||ch[dh]===t)},hh=ia,ph=Ie("iterator"),vh=lr,gh=zt.getIteratorMethod=function(t){if(t!=null)return t[ph]||t["@@iterator"]||vh[hh(t)]},$n,hi;function mh(){if(hi)return $n;hi=1;var t=Ie("iterator"),e=!1;try{var r=[7][t]();r.return=function(){e=!0},Array.from(r,function(){throw 2})}catch{}return $n=function(n,a){if(!a&&!e)return!1;var u=!1;try{var i=[7],o=i[t]();o.next=function(){return{done:u=!0}},i[t]=function(){return o},n(i)}catch{}return u},$n}var bh=Fr,An=Ve,yh=pt,wh=sh,_h=fh,kh=Et,pi=ds,xh=gh;An(An.S+An.F*!mh()(function(t){Array.from(t)}),"Array",{from:function(e){var r=yh(e),n=typeof this=="function"?this:Array,a=arguments.length,u=a>1?arguments[1]:void 0,i=u!==void 0,o=0,l=xh(r),d,f,h,v;if(i&&(u=bh(u,a>2?arguments[2]:void 0,2)),l!=null&&!(n==Array&&_h(l)))for(v=l.call(r),f=new n;!(h=v.next()).done;o++)pi(f,o,i?wh(v,u,[h.value,o],!0):h.value);else for(d=kh(r.length),f=new n(d);d>o;o++)pi(f,o,i?u(r[o],o):r[o]);return f.length=o,f}});function Sh(t,e,r){var n=ss(t),a=t.length-n;if(a>0){var u=Array.from(t),i=e===0?"":u.slice(0,e).join(""),o=u.slice(e,r).join("");return[i.length,i.length+o.length]}return[e,r]}const Ch={autoLink:Rc,autoLinkCashtags:Nc,autoLinkEntities:Ut,autoLinkHashtags:Fc,autoLinkUrlsCustom:zc,autoLinkUsernamesOrLists:Bc,autoLinkWithJSON:Wc,configs:Ft,convertUnicodeIndices:Hc,extractCashtags:Gc,extractCashtagsWithIndices:Wr,extractEntitiesWithIndices:Do,extractHashtags:Xo,extractHashtagsWithIndices:Vr,extractHtmlAttrsFromOptions:Mo,extractMentions:Yo,extractMentionsOrListsWithIndices:Xr,extractMentionsWithIndices:qo,extractReplies:Zc,extractUrls:Vc,extractUrlsWithIndices:Bt,getTweetLength:os,getUnicodeTextLength:ss,hasInvalidCharacters:Fa,hitHighlight:Xf,htmlEscape:ut,isInvalidTweet:Cs,isValidHashtag:eh,isValidList:rh,isValidTweetText:nh,isValidUrl:ah,isValidUsername:uh,linkTextWithEntity:Bo,linkToCashtag:No,linkToHashtag:zo,linkToMentionAndList:Go,linkToText:Pr,linkToTextWithSymbol:qr,linkToUrl:Ho,modifyIndicesFromUTF16ToUnicode:Yc,modifyIndicesFromUnicodeToUTF16:Vo,regexen:ih,removeOverlappingEntities:Ua,parseTweet:is,splitTags:ls,standardizeIndices:Sh,tagAttrs:Ro};var Eh={VITE_API_ENDPOINT:"https://pppost-api.netlify.app/.netlify/functions",VITE_TWITTER_REDIRECT_URL:"https://amay077.github.io/pppost",VITE_MASTODON_SERVER01:"Mastodon.cloud(prod) mastodon.cloud c8QPP8GMhQek0m_e8Djb5sz9L69Pl94QQjzxpxKZrEk",VITE_MASTODON_SERVER02:"Mstdn.jp mstdn.jp gIAagB7-8KP6XEW1xHW3Wh3UjOH9A-ircwMlZX-80xw",BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Be=(()=>{const t=["Mastodon.cloud(prod) mastodon.cloud c8QPP8GMhQek0m_e8Djb5sz9L69Pl94QQjzxpxKZrEk","Mstdn.jp mstdn.jp gIAagB7-8KP6XEW1xHW3Wh3UjOH9A-ircwMlZX-80xw",Eh.VITE_MASTODON_SERVER03].filter(e=>(e==null?void 0:e.length)>0).map(e=>{const[r,n,a]=`${e}`.split(" ");return{name:r,server:n,client_id:a}});return console.log(t),{API_ENDPOINT:"https://pppost-api.netlify.app/.netlify/functions",post_targets:{mastodon:t,twitter:{redirect_uri:"https://amay077.github.io/pppost"}}}})();console.log(Be);function Gt(t){localStorage.setItem(`ppp_setting_${t.type}`,JSON.stringify(t))}function lt(t){const e=localStorage.getItem(`ppp_setting_${t}`);return((e==null?void 0:e.length)??0)<=0?null:JSON.parse(e)}function tu(t){localStorage.removeItem(`ppp_setting_${t}`)}function Oh(t){localStorage.setItem("ppp_message",JSON.stringify(t))}function Th(){const t=localStorage.getItem("ppp_message");return((t==null?void 0:t.length)??0)<=0?null:JSON.parse(t)}function vi(t,e,r){const n=t.slice();return n[12]=e[r],n}function Uh(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-down"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function Ph(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-right"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function gi(t){let e;function r(u,i){return u[3]!=null?Ah:$h}let n=r(t),a=n(t);return{c(){e=x("div"),a.c(),c(e,"class","p-1")},m(u,i){X(u,e,i),a.m(e,null)},p(u,i){n===(n=r(u))&&a?a.p(u,i):(a.d(1),a=n(u),a&&(a.c(),a.m(e,null)))},d(u){u&&V(e),a.d()}}}function $h(t){let e,r,n,a,u,i,o,l,d,f,h,v,b,w,_,y,k,P,j,L,F=Nt(t[5]),q=[];for(let U=0;U<F.length;U+=1)q[U]=mi(vi(t,F,U));return{c(){var U;e=x("div"),r=x("div"),n=x("span"),n.textContent="1.Mastodon サーバーに接続",a=W(),u=x("div"),i=x("select");for(let Y=0;Y<q.length;Y+=1)q[Y].c();o=W(),l=x("button"),l.textContent="接続",d=W(),f=x("div"),h=x("span"),h.textContent="2.認証コードを貼り付けて設定",v=W(),b=x("div"),w=x("input"),_=W(),y=x("button"),k=Ee("設定"),c(i,"class","form-select form-select-sm"),t[1]===void 0&&er(()=>t[10].call(i)),c(l,"class","btn btn-sm btn-primary"),me(l,"width","60px"),c(u,"class","d-flex flex-row gap-1"),c(r,"class","d-flex flex-column gap-1"),c(w,"class","form-control form-control-sm"),c(w,"type","text"),c(y,"class","btn btn-sm btn-primary"),y.disabled=P=((U=t[2])==null?void 0:U.length)<=0,me(y,"width","60px"),c(b,"class","d-flex flex-row gap-1"),c(f,"class","d-flex flex-column gap-1"),c(e,"class","d-flex flex-column gap-1")},m(U,Y){X(U,e,Y),m(e,r),m(r,n),m(r,a),m(r,u),m(u,i);for(let oe=0;oe<q.length;oe+=1)q[oe]&&q[oe].m(i,null);Er(i,t[1],!0),m(u,o),m(u,l),m(e,d),m(e,f),m(f,h),m(f,v),m(f,b),m(b,w),Pe(w,t[2]),m(b,_),m(b,y),m(y,k),j||(L=[le(i,"change",t[10]),le(l,"click",t[6]),le(w,"input",t[11]),le(y,"click",t[7])],j=!0)},p(U,Y){var oe;if(Y&32){F=Nt(U[5]);let K;for(K=0;K<F.length;K+=1){const ee=vi(U,F,K);q[K]?q[K].p(ee,Y):(q[K]=mi(ee),q[K].c(),q[K].m(i,null))}for(;K<q.length;K+=1)q[K].d(1);q.length=F.length}Y&34&&Er(i,U[1]),Y&4&&w.value!==U[2]&&Pe(w,U[2]),Y&4&&P!==(P=((oe=U[2])==null?void 0:oe.length)<=0)&&(y.disabled=P)},d(U){U&&V(e),Wi(q,U),j=!1,Ye(L)}}}function Ah(t){let e,r,n,a,u,i;return{c(){e=x("div"),r=x("span"),r.textContent="接続済み",n=W(),a=x("button"),a.textContent="切断",c(a,"class","btn btn-sm btn-outline-primary"),me(a,"width","60px"),c(e,"class","d-flex flex-row gap-2 align-items-center")},m(o,l){X(o,e,l),m(e,r),m(e,n),m(e,a),u||(i=le(a,"click",t[9]),u=!0)},p:$e,d(o){o&&V(e),u=!1,i()}}}function mi(t){let e,r=t[12].name+"",n,a,u=t[12].server+"",i,o;return{c(){e=x("option"),n=Ee(r),a=Ee(" (https://"),i=Ee(u),o=Ee(")"),e.__value=t[12].server,Pe(e,e.__value)},m(l,d){X(l,e,d),m(e,n),m(e,a),m(e,i),m(e,o)},p:$e,d(l){l&&V(e)}}}function Ih(t){let e,r,n,a,u,i,o;function l(v,b){return v[0]?Uh:Ph}let d=l(t),f=d(t),h=t[0]&&gi(t);return{c(){e=x("div"),r=x("div"),n=x("h5"),n.textContent="Mastodon",a=W(),f.c(),u=W(),h&&h.c(),c(n,"class","mb-0"),c(r,"class","d-flex flex-row gap-1 align-items-center"),me(r,"cursor","pointer")},m(v,b){X(v,e,b),m(e,r),m(r,n),m(r,a),f.m(r,null),m(e,u),h&&h.m(e,null),i||(o=le(r,"click",t[8]),i=!0)},p(v,[b]){d!==(d=l(v))&&(f.d(1),f=d(v),f&&(f.c(),f.m(r,null))),v[0]?h?h.p(v,b):(h=gi(v),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:$e,o:$e,d(v){v&&V(e),f.d(),h&&h.d(),i=!1,o()}}}function Dh(t,e,r){const n=Ir();let a=!1;const u=Be.post_targets.mastodon;let i="mastodon.cloud",o="",l=lt("mastodon");const d=()=>{const _=u.find(k=>k.server===i);if(_==null){console.error("onApplyMastodonAccessToken -> settings:",_);return}const y=`https://${_.server}/oauth/authorize?client_id=${_.client_id}&response_type=code&redirect_uri=urn:ietf:wg:oauth:2.0:oob&scope=read+write`;window.open(y,"_blank")},f=async()=>{console.log("onApplyMastodonAccessToken -> mastodonCode:",o);const _=u.find(P=>P.server===i);if(_==null){console.error("onApplyMastodonAccessToken -> settings:",_);return}const y=await fetch(`${Be.API_ENDPOINT}/mastodon_token?server=${_.server}&code=${o}`);if(!y.ok){console.error("failed to fetch:",y);return}const k=await y.json();r(3,l={type:"mastodon",title:"Mastodon",enabled:!0,server:_.server,token_data:k}),Gt(l),n("onChange"),alert("Mastodon に接続しました。")},h=()=>{r(0,a=!a)},v=()=>{r(3,l=null),tu("mastodon"),n("onChange")};function b(){i=Hi(this),r(1,i),r(5,u)}function w(){o=this.value,r(2,o)}return[a,i,o,l,n,u,d,f,h,v,b,w]}class Mh extends Ct{constructor(e){super(),St(this,e,Dh,Ih,xt,{})}}function Lh(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-down"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function jh(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-right"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function bi(t){let e;function r(u,i){return u[1]!=null?Nh:Rh}let n=r(t),a=n(t);return{c(){e=x("div"),a.c(),c(e,"class","p-2")},m(u,i){X(u,e,i),a.m(e,null)},p(u,i){n===(n=r(u))&&a?a.p(u,i):(a.d(1),a=n(u),a&&(a.c(),a.m(e,null)))},d(u){u&&V(e),a.d()}}}function Rh(t){let e,r,n,a,u,i,o,l,d,f,h,v,b,w,_;return{c(){var y,k;e=x("div"),r=x("div"),n=x("span"),n.textContent="1.ユーザーIDとアプリパスワードを入力",a=W(),u=x("div"),i=x("input"),o=W(),l=x("div"),d=x("input"),f=W(),h=x("button"),v=Ee("接続"),c(i,"class","form-control form-control-sm"),c(i,"placeholder","Identifier(e.g. e-mail)"),c(i,"type","text"),c(u,"class","d-flex flex-row gap-1"),c(d,"class","form-control form-control-sm"),c(d,"type","password"),c(d,"placeholder","App Password"),c(h,"class","btn btn-sm btn-primary"),h.disabled=b=((y=t[2])==null?void 0:y.length)<=0||((k=t[3])==null?void 0:k.length)<=0,me(h,"width","60px"),c(l,"class","d-flex flex-row gap-1"),c(r,"class","d-flex flex-column gap-1"),c(e,"class","d-flex flex-column gap-1")},m(y,k){X(y,e,k),m(e,r),m(r,n),m(r,a),m(r,u),m(u,i),Pe(i,t[2]),m(r,o),m(r,l),m(l,d),Pe(d,t[3]),m(l,f),m(l,h),m(h,v),w||(_=[le(i,"input",t[8]),le(d,"input",t[9]),le(h,"click",t[5])],w=!0)},p(y,k){var P,j;k&4&&i.value!==y[2]&&Pe(i,y[2]),k&8&&d.value!==y[3]&&Pe(d,y[3]),k&12&&b!==(b=((P=y[2])==null?void 0:P.length)<=0||((j=y[3])==null?void 0:j.length)<=0)&&(h.disabled=b)},d(y){y&&V(e),w=!1,Ye(_)}}}function Nh(t){let e,r,n,a,u,i;return{c(){e=x("div"),r=x("span"),r.textContent="接続済み",n=W(),a=x("button"),a.textContent="切断",c(a,"class","btn btn-sm btn-outline-primary"),me(a,"width","60px"),c(e,"class","d-flex flex-row gap-2 align-items-center")},m(o,l){X(o,e,l),m(e,r),m(e,n),m(e,a),u||(i=le(a,"click",t[7]),u=!0)},p:$e,d(o){o&&V(e),u=!1,i()}}}function Fh(t){let e,r,n,a,u,i,o;function l(v,b){return v[0]?Lh:jh}let d=l(t),f=d(t),h=t[0]&&bi(t);return{c(){e=x("div"),r=x("h5"),r.textContent="Bluesky",n=W(),f.c(),a=W(),h&&h.c(),u=Ar(),c(r,"class","mb-0"),c(e,"class","d-flex flex-row gap-1 align-items-center"),me(e,"cursor","pointer"),me(e,"width","100%")},m(v,b){X(v,e,b),m(e,r),m(e,n),f.m(e,null),X(v,a,b),h&&h.m(v,b),X(v,u,b),i||(o=le(e,"click",t[6]),i=!0)},p(v,[b]){d!==(d=l(v))&&(f.d(1),f=d(v),f&&(f.c(),f.m(e,null))),v[0]?h?h.p(v,b):(h=bi(v),h.c(),h.m(u.parentNode,u)):h&&(h.d(1),h=null)},i:$e,o:$e,d(v){v&&(V(e),V(a),V(u)),f.d(),h&&h.d(v),i=!1,o()}}}function zh(t,e,r){var b,w;const n=Ir();let a=!1,u=lt("bluesky"),i=((w=(b=u==null?void 0:u.data)==null?void 0:b.sessionData)==null?void 0:w.email)??"",o="";const l=async()=>{console.log("onApplyBSkySettings -> user:",i);try{const _=await fetch(`${Be.API_ENDPOINT}/bluesky_login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:i,password:o})});if(!_.ok){const P=await _.json();console.error("onApplyBSkySettings -> error:",P),alert("Bluesky に接続できませんでした。");return}const k=(await _.json()).sessionData;r(1,u={type:"bluesky",title:"Bluesky",enabled:!0,data:{sessionData:k}}),Gt(u),n("onChange"),alert("Bluesky に接続しました。")}catch(_){console.error("onApplyBSkySettings -> error:",_),alert("Bluesky に接続できませんでした。")}},d=()=>{r(0,a=!a)},f=()=>{r(1,u=null),tu("bluesky"),n("onChange")};function h(){i=this.value,r(2,i)}function v(){o=this.value,r(3,o)}return[a,u,i,o,n,l,d,f,h,v]}class Bh extends Ct{constructor(e){super(),St(this,e,zh,Fh,xt,{})}}function Wh(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-down"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function Hh(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-right"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function yi(t){let e;function r(u,i){return u[2]!=null?Zh:Gh}let n=r(t),a=n(t);return{c(){e=x("div"),a.c(),c(e,"class","p-1")},m(u,i){X(u,e,i),a.m(e,null)},p(u,i){n===(n=r(u))&&a?a.p(u,i):(a.d(1),a=n(u),a&&(a.c(),a.m(e,null)))},d(u){u&&V(e),a.d()}}}function Gh(t){let e,r,n,a,u,i,o,l,d,f,h,v,b,w,_,y,k,P;return{c(){var j;e=x("div"),r=x("div"),n=x("div"),a=x("span"),a.textContent="1.",u=W(),i=x("button"),i.textContent="接続",o=W(),l=x("div"),d=x("span"),d.textContent="2.PINコードを貼り付けて設定",f=W(),h=x("div"),v=x("input"),b=W(),w=x("button"),_=Ee("設定"),c(i,"class","btn btn-sm btn-primary"),me(i,"width","60px"),c(n,"class","d-flex flex-row align-items-center gap-1"),c(r,"class","d-flex flex-column gap-1"),c(v,"class","form-control form-control-sm"),c(v,"type","text"),c(w,"class","btn btn-sm btn-primary"),w.disabled=y=((j=t[3])==null?void 0:j.length)<=0,me(w,"width","60px"),c(h,"class","d-flex flex-row gap-1"),c(l,"class","d-flex flex-column gap-1"),c(e,"class","d-flex flex-column gap-1")},m(j,L){X(j,e,L),m(e,r),m(r,n),m(n,a),m(n,u),m(n,i),m(e,o),m(e,l),m(l,d),m(l,f),m(l,h),m(h,v),Pe(v,t[3]),m(h,b),m(h,w),m(w,_),k||(P=[le(i,"click",t[5]),le(v,"input",t[8]),le(w,"click",t[0])],k=!0)},p(j,L){var F;L&8&&v.value!==j[3]&&Pe(v,j[3]),L&8&&y!==(y=((F=j[3])==null?void 0:F.length)<=0)&&(w.disabled=y)},d(j){j&&V(e),k=!1,Ye(P)}}}function Zh(t){let e,r,n,a,u,i;return{c(){e=x("div"),r=x("span"),r.textContent="接続済み",n=W(),a=x("button"),a.textContent="切断",c(a,"class","btn btn-sm btn-outline-primary"),me(a,"width","60px"),c(e,"class","d-flex flex-row gap-2 align-items-center")},m(o,l){X(o,e,l),m(e,r),m(e,n),m(e,a),u||(i=le(a,"click",t[7]),u=!0)},p:$e,d(o){o&&V(e),u=!1,i()}}}function Vh(t){let e,r,n,a,u,i,o;function l(v,b){return v[1]?Wh:Hh}let d=l(t),f=d(t),h=t[1]&&yi(t);return{c(){e=x("div"),r=x("div"),n=x("h5"),n.textContent="Twitter",a=W(),f.c(),u=W(),h&&h.c(),c(n,"class","mb-0"),c(r,"class","d-flex flex-row gap-1 align-items-center"),me(r,"cursor","pointer")},m(v,b){X(v,e,b),m(e,r),m(r,n),m(r,a),f.m(r,null),m(e,u),h&&h.m(e,null),i||(o=le(r,"click",t[6]),i=!0)},p(v,[b]){d!==(d=l(v))&&(f.d(1),f=d(v),f&&(f.c(),f.m(r,null))),v[1]?h?h.p(v,b):(h=yi(v),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:$e,o:$e,d(v){v&&V(e),f.d(),h&&h.d(),i=!1,o()}}}function Xh(t,e,r){const n=Ir();let a=!1,u=lt("twitter"),i="",o="",l="";const d=async()=>{const w=await fetch(`${Be.API_ENDPOINT}/twitter_auth`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({})}),{url:_,oauth_token:y,data:k}=await w.json();i=y,l=k,window.open(_,"_blank")};async function f(){const w=await fetch(`${Be.API_ENDPOINT}/twitter_token?code=${o}&oauth_token=${i}&data=${l}`);if(r(3,o=""),w.ok){const _=await w.json();r(2,u={type:"twitter",title:"Twitter",enabled:!0,token_data:{token:_.token}}),Gt(u),n("onChange"),alert("Twitter に接続しました。")}else console.error("twitter 接続エラー -> res:",w),alert("Twitter に接続できませんでした。")}const h=()=>{r(1,a=!a)},v=()=>{r(2,u=null),tu("twitter"),n("onChange")};function b(){o=this.value,r(3,o)}return[f,a,u,o,n,d,h,v,b]}class qh extends Ct{constructor(e){super(),St(this,e,Xh,Vh,xt,{onApplyTwitterPinCode:0})}get onApplyTwitterPinCode(){return this.$$.ctx[0]}}var Zs={exports:{}};(function(t,e){(function(r,n){t.exports=n()})(Jt,function(){var r=1e3,n=6e4,a=36e5,u="millisecond",i="second",o="minute",l="hour",d="day",f="week",h="month",v="quarter",b="year",w="date",_="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,k=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,P={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var $=["th","st","nd","rd"],D=A%100;return"["+A+($[(D-20)%10]||$[D]||$[0])+"]"}},j=function(A,$,D){var Z=String(A);return!Z||Z.length>=$?A:""+Array($+1-Z.length).join(D)+A},L={s:j,z:function(A){var $=-A.utcOffset(),D=Math.abs($),Z=Math.floor(D/60),M=D%60;return($<=0?"+":"-")+j(Z,2,"0")+":"+j(M,2,"0")},m:function A($,D){if($.date()<D.date())return-A(D,$);var Z=12*(D.year()-$.year())+(D.month()-$.month()),M=$.clone().add(Z,h),ne=D-M<0,O=$.clone().add(Z+(ne?-1:1),h);return+(-(Z+(D-M)/(ne?M-O:O-M))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:h,y:b,w:f,d,D:w,h:l,m:o,s:i,ms:u,Q:v}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},F="en",q={};q[F]=P;var U="$isDayjsObject",Y=function(A){return A instanceof ge||!(!A||!A[U])},oe=function A($,D,Z){var M;if(!$)return F;if(typeof $=="string"){var ne=$.toLowerCase();q[ne]&&(M=ne),D&&(q[ne]=D,M=ne);var O=$.split("-");if(!M&&O.length>1)return A(O[0])}else{var R=$.name;q[R]=$,M=R}return!Z&&M&&(F=M),M||!Z&&F},K=function(A,$){if(Y(A))return A.clone();var D=typeof $=="object"?$:{};return D.date=A,D.args=arguments,new ge(D)},ee=L;ee.l=oe,ee.i=Y,ee.w=function(A,$){return K(A,{locale:$.$L,utc:$.$u,x:$.$x,$offset:$.$offset})};var ge=function(){function A(D){this.$L=oe(D.locale,null,!0),this.parse(D),this.$x=this.$x||D.x||{},this[U]=!0}var $=A.prototype;return $.parse=function(D){this.$d=function(Z){var M=Z.date,ne=Z.utc;if(M===null)return new Date(NaN);if(ee.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var O=M.match(y);if(O){var R=O[2]-1||0,z=(O[7]||"0").substring(0,3);return ne?new Date(Date.UTC(O[1],R,O[3]||1,O[4]||0,O[5]||0,O[6]||0,z)):new Date(O[1],R,O[3]||1,O[4]||0,O[5]||0,O[6]||0,z)}}return new Date(M)}(D),this.init()},$.init=function(){var D=this.$d;this.$y=D.getFullYear(),this.$M=D.getMonth(),this.$D=D.getDate(),this.$W=D.getDay(),this.$H=D.getHours(),this.$m=D.getMinutes(),this.$s=D.getSeconds(),this.$ms=D.getMilliseconds()},$.$utils=function(){return ee},$.isValid=function(){return this.$d.toString()!==_},$.isSame=function(D,Z){var M=K(D);return this.startOf(Z)<=M&&M<=this.endOf(Z)},$.isAfter=function(D,Z){return K(D)<this.startOf(Z)},$.isBefore=function(D,Z){return this.endOf(Z)<K(D)},$.$g=function(D,Z,M){return ee.u(D)?this[Z]:this.set(M,D)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(D,Z){var M=this,ne=!!ee.u(Z)||Z,O=ee.p(D),R=function(ve,se){var ye=ee.w(M.$u?Date.UTC(M.$y,se,ve):new Date(M.$y,se,ve),M);return ne?ye:ye.endOf(d)},z=function(ve,se){return ee.w(M.toDate()[ve].apply(M.toDate("s"),(ne?[0,0,0,0]:[23,59,59,999]).slice(se)),M)},ae=this.$W,H=this.$M,J=this.$D,Q="set"+(this.$u?"UTC":"");switch(O){case b:return ne?R(1,0):R(31,11);case h:return ne?R(1,H):R(0,H+1);case f:var ue=this.$locale().weekStart||0,de=(ae<ue?ae+7:ae)-ue;return R(ne?J-de:J+(6-de),H);case d:case w:return z(Q+"Hours",0);case l:return z(Q+"Minutes",1);case o:return z(Q+"Seconds",2);case i:return z(Q+"Milliseconds",3);default:return this.clone()}},$.endOf=function(D){return this.startOf(D,!1)},$.$set=function(D,Z){var M,ne=ee.p(D),O="set"+(this.$u?"UTC":""),R=(M={},M[d]=O+"Date",M[w]=O+"Date",M[h]=O+"Month",M[b]=O+"FullYear",M[l]=O+"Hours",M[o]=O+"Minutes",M[i]=O+"Seconds",M[u]=O+"Milliseconds",M)[ne],z=ne===d?this.$D+(Z-this.$W):Z;if(ne===h||ne===b){var ae=this.clone().set(w,1);ae.$d[R](z),ae.init(),this.$d=ae.set(w,Math.min(this.$D,ae.daysInMonth())).$d}else R&&this.$d[R](z);return this.init(),this},$.set=function(D,Z){return this.clone().$set(D,Z)},$.get=function(D){return this[ee.p(D)]()},$.add=function(D,Z){var M,ne=this;D=Number(D);var O=ee.p(Z),R=function(H){var J=K(ne);return ee.w(J.date(J.date()+Math.round(H*D)),ne)};if(O===h)return this.set(h,this.$M+D);if(O===b)return this.set(b,this.$y+D);if(O===d)return R(1);if(O===f)return R(7);var z=(M={},M[o]=n,M[l]=a,M[i]=r,M)[O]||1,ae=this.$d.getTime()+D*z;return ee.w(ae,this)},$.subtract=function(D,Z){return this.add(-1*D,Z)},$.format=function(D){var Z=this,M=this.$locale();if(!this.isValid())return M.invalidDate||_;var ne=D||"YYYY-MM-DDTHH:mm:ssZ",O=ee.z(this),R=this.$H,z=this.$m,ae=this.$M,H=M.weekdays,J=M.months,Q=M.meridiem,ue=function(se,ye,pe,xe){return se&&(se[ye]||se(Z,ne))||pe[ye].slice(0,xe)},de=function(se){return ee.s(R%12||12,se,"0")},ve=Q||function(se,ye,pe){var xe=se<12?"AM":"PM";return pe?xe.toLowerCase():xe};return ne.replace(k,function(se,ye){return ye||function(pe){switch(pe){case"YY":return String(Z.$y).slice(-2);case"YYYY":return ee.s(Z.$y,4,"0");case"M":return ae+1;case"MM":return ee.s(ae+1,2,"0");case"MMM":return ue(M.monthsShort,ae,J,3);case"MMMM":return ue(J,ae);case"D":return Z.$D;case"DD":return ee.s(Z.$D,2,"0");case"d":return String(Z.$W);case"dd":return ue(M.weekdaysMin,Z.$W,H,2);case"ddd":return ue(M.weekdaysShort,Z.$W,H,3);case"dddd":return H[Z.$W];case"H":return String(R);case"HH":return ee.s(R,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return ve(R,z,!0);case"A":return ve(R,z,!1);case"m":return String(z);case"mm":return ee.s(z,2,"0");case"s":return String(Z.$s);case"ss":return ee.s(Z.$s,2,"0");case"SSS":return ee.s(Z.$ms,3,"0");case"Z":return O}return null}(se)||O.replace(":","")})},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(D,Z,M){var ne,O=this,R=ee.p(Z),z=K(D),ae=(z.utcOffset()-this.utcOffset())*n,H=this-z,J=function(){return ee.m(O,z)};switch(R){case b:ne=J()/12;break;case h:ne=J();break;case v:ne=J()/3;break;case f:ne=(H-ae)/6048e5;break;case d:ne=(H-ae)/864e5;break;case l:ne=H/a;break;case o:ne=H/n;break;case i:ne=H/r;break;default:ne=H}return M?ne:ee.a(ne)},$.daysInMonth=function(){return this.endOf(h).$D},$.$locale=function(){return q[this.$L]},$.locale=function(D,Z){if(!D)return this.$L;var M=this.clone(),ne=oe(D,Z,!0);return ne&&(M.$L=ne),M},$.clone=function(){return ee.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},A}(),he=ge.prototype;return K.prototype=he,[["$ms",u],["$s",i],["$m",o],["$H",l],["$W",d],["$M",h],["$y",b],["$D",w]].forEach(function(A){he[A[1]]=function($){return this.$g($,A[0],A[1])}}),K.extend=function(A,$){return A.$i||(A($,ge,K),A.$i=!0),K},K.locale=oe,K.isDayjs=Y,K.unix=function(A){return K(1e3*A)},K.en=q[F],K.Ls=q,K.p={},K})})(Zs);var Yh=Zs.exports;const Jh=aa(Yh);async function Qh(t,e="image.png"){try{const r=await fetch(`${Be.API_ENDPOINT}/supabase_presigned_url`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e})});if(!r.ok)return console.error("Failed to get presigned URL:",r.status),null;const{uploadUrl:n,publicUrl:a,token:u}=await r.json(),i=t.replace(/^data:image\/\w+;base64,/,""),o=atob(i),l=new Array(o.length);for(let b=0;b<o.length;b++)l[b]=o.charCodeAt(b);const d=new Uint8Array(l),f=e.split(".").pop()||"png",h=new Blob([d],{type:`image/${f}`}),v=await fetch(n,{method:"PUT",headers:{Authorization:`Bearer ${u}`,"Content-Type":`image/${f}`},body:h});return v.ok?a:(console.error("Failed to upload image:",v.status),null)}catch(r){return console.error("Error uploading to Supabase:",r),null}}async function Kh(t){if(!t||t.length===0)return!0;try{const e=await fetch(`${Be.API_ENDPOINT}/supabase_delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({urls:t})});if(!e.ok){const n=await e.text();return console.error("Failed to delete images:",n),!1}const r=await e.json();return r.errors&&r.errors.length>0&&console.error("Some images failed to delete:",r.errors),r.success}catch(e){return console.error("Error deleting images from Supabase:",e),!1}}const _e={mastodon:lt("mastodon"),bluesky:lt("bluesky"),twitter:lt("twitter")};var Ri,Ni,Fi;const Xe={mastodon:((Ri=_e==null?void 0:_e.mastodon)==null?void 0:Ri.enabled)??!1,bluesky:((Ni=_e==null?void 0:_e.bluesky)==null?void 0:Ni.enabled)??!1,twitter:((Fi=_e==null?void 0:_e.twitter)==null?void 0:Fi.enabled)??!1};async function ep(){const t=await fetch(`${Be.API_ENDPOINT}/ver`);return t.ok?await t.json():{build_at:"unknown",env_ver:"unknown"}}const tp=async()=>{const t=Array.from(Object.entries(Xe)).filter(([o,l])=>l).map(([o,l])=>o),e=[];for(const o of t)switch(o){case"mastodon":e.push(ip().then(l=>({type:"mastodon",posts:l})));break;case"bluesky":e.push(ap().then(l=>({type:"bluesky",posts:l})));break;case"twitter":e.push(up().then(l=>({type:"twitter",posts:l})));break}const n=(await Promise.allSettled(e)).filter(o=>o.status=="fulfilled").map(o=>o.value).reduce((o,l)=>(((l==null?void 0:l.posts)??[]).forEach(d=>{o.push({type:l.type,post:d})}),o),[]),a=o=>o.length>50?o.substring(0,50)+"...":o,i=(o=>{const l={};return o.forEach(({type:d,post:f})=>{const h=f.text.substring(0,10);l[h]||(l[h]={display_posted_at:Jh(f.posted_at).format("M/DD H:MM"),trimmed_text:a(f.text),postOfType:{mastodon:void 0,twitter:void 0,bluesky:void 0}}),l[h].postOfType[d]=f}),Object.values(l)})(n??[]);return console.log(i),i},rp=async(t,e,r)=>{var o,l,d;const n=[],a=[];if(e.length>0)for(let f=0;f<e.length;f++){const v=e[f].split(",")[1],b=`image_${f+1}.png`,w=await sp(v,b);if(w!=null)a.push(w);else return console.error(`Failed to upload image ${f+1}`),{errors:["画像のアップロードに失敗しました"]}}const u=Array.from(Object.entries(Xe)).filter(([f,h])=>h).map(([f,h])=>f),i=[];for(const f of u){switch(f){case"mastodon":i.push(np(t,a,(o=r==null?void 0:r.reply_to_ids)==null?void 0:o.mastodon).then(h=>{h||n.push("Mastodon")}));break;case"bluesky":i.push(op(t,a,(l=r==null?void 0:r.reply_to_ids)==null?void 0:l.bluesky).then(h=>{h||n.push("Bluesky")}));break;case"twitter":i.push(lp(t,a,(d=r==null?void 0:r.reply_to_ids)==null?void 0:d.twitter).then(h=>{h||n.push("Twitter")}));break}await Promise.allSettled(i)}if(n.length==0){a.length>0&&(console.log("Deleting temporary images from Supabase..."),await Kh(a)?console.log("Temporary images deleted successfully"):console.error("Failed to delete some temporary images"));for(const[f,h]of Object.entries(_e)){const v=f;h!=null&&(h.enabled=Xe[v]==!0,Gt(h))}}else console.log("Post failed, keeping temporary images for retry");return{errors:n}},np=async(t,e,r)=>{try{const n=_e.mastodon,a=n.server,u=n.token_data.access_token,i=t;return!!(await fetch(`${Be.API_ENDPOINT}/mastodon_post`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({host:a,token:n.token_data.access_token,status:i,images:e,reply_to_id:r})})).ok}catch(n){return console.error("postToMastodon -> error:",n),!1}},ap=async()=>{var t,e;try{const r=(e=(t=_e.bluesky)==null?void 0:t.data)==null?void 0:e.sessionData;if(!r)return console.error("Bluesky session data not found"),[];const n=await fetch(`${Be.API_ENDPOINT}/bluesky_posts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:r})});if(n.ok){const a=await n.json();return a.sessionData&&(_e.bluesky={type:"bluesky",title:"Bluesky",enabled:!0,data:{sessionData:a.sessionData}},Gt(_e.bluesky)),a.posts||[]}else return[]}catch(r){return console.error("loadMyPostsBluesky -> error:",r),[]}},up=async()=>{try{const e=_e.twitter.token_data.token,r=await fetch(`${Be.API_ENDPOINT}/twitter_posts`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({token:e})});if(r.ok){const n=await r.json();return console.log("FIXME 後で消す  -> loadMyPostsTwritter -> resJson:",n),n}else return[]}catch(t){return console.error("loadMyPostsTwritter -> error:",t),[]}},ip=async()=>{try{const t=_e.mastodon,e=t.server,r=t.token_data.access_token,n=await fetch(`${Be.API_ENDPOINT}/mastodon_posts`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({host:e,token:r})});if(n.ok){const a=await n.json();return console.log("FIXME 後で消す  -> loadMyPostsMastodon -> resJson:",a),a}else return[]}catch(t){return console.error("loadMyPostsMastodon -> error:",t),[]}},op=async(t,e,r)=>{var n,a;try{const u=(a=(n=_e.bluesky)==null?void 0:n.data)==null?void 0:a.sessionData;if(!u)return console.error("Bluesky session data not found"),!1;const i=await fetch(`${Be.API_ENDPOINT}/bluesky_post`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:u,text:t,images:e,reply_to_id:r})});if(i.ok){const o=await i.json();return console.log("postToBluesky response:",o),o.sessionData&&(_e.bluesky={type:"bluesky",title:"Bluesky",enabled:!0,data:{sessionData:o.sessionData}},Gt(_e.bluesky)),!0}else{const o=await i.json();return console.error("Bluesky post failed:",o),!1}}catch(u){return console.error("postToBluesky -> error:",u),!1}},sp=async(t,e="image.png")=>await Qh(t,e),lp=async(t,e,r)=>{try{const a=_e.twitter.token_data.token,u=await fetch(`${Be.API_ENDPOINT}/twitter_post`,{method:"POST",headers:{"Content-Type":"text/plain"},body:JSON.stringify({token:a,text:t,images:e,reply_to_id:r})});if(u.ok){const i=await u.json();console.log("FIXME 後で消す  -> postToTwritter -> resJson:",i)}else return!1;return!0}catch(n){return console.error("postToMastodon -> error:",n),!1}};function wi(t){return new Promise(e=>{const r=new FileReader;r.onload=n=>{e(n.target.result)},r.readAsDataURL(t)})}var ta={exports:{}};(function(t,e){(function(r,n){typeof e.nodeName!="string"?t.exports=n():r.Croppie=n()})(typeof self<"u"?self:Jt,function(){if(typeof Promise!="function"){/*! promise-polyfill 3.1.0 */(function(s){function g(I,te){return function(){I.apply(te,arguments)}}function p(I){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof I!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],G(I,g(C,this),g(E,this))}function S(I){var te=this;return this._state===null?void this._deferreds.push(I):void ce(function(){var N=te._state?I.onFulfilled:I.onRejected;if(N===null)return void(te._state?I.resolve:I.reject)(te._value);var re;try{re=N(te._value)}catch(fe){return void I.reject(fe)}I.resolve(re)})}function C(I){try{if(I===this)throw new TypeError("A promise cannot be resolved with itself.");if(I&&(typeof I=="object"||typeof I=="function")){var te=I.then;if(typeof te=="function")return void G(g(te,I),g(C,this),g(E,this))}this._state=!0,this._value=I,B.call(this)}catch(N){E.call(this,N)}}function E(I){this._state=!1,this._value=I,B.call(this)}function B(){for(var I=0,te=this._deferreds.length;te>I;I++)S.call(this,this._deferreds[I]);this._deferreds=null}function T(I,te,N,re){this.onFulfilled=typeof I=="function"?I:null,this.onRejected=typeof te=="function"?te:null,this.resolve=N,this.reject=re}function G(I,te,N){var re=!1;try{I(function(fe){re||(re=!0,te(fe))},function(fe){re||(re=!0,N(fe))})}catch(fe){if(re)return;re=!0,N(fe)}}var ie=setTimeout,ce=typeof setImmediate=="function"&&setImmediate||function(I){ie(I,1)},we=Array.isArray||function(I){return Object.prototype.toString.call(I)==="[object Array]"};p.prototype.catch=function(I){return this.then(null,I)},p.prototype.then=function(I,te){var N=this;return new p(function(re,fe){S.call(N,new T(I,te,re,fe))})},p.all=function(){var I=Array.prototype.slice.call(arguments.length===1&&we(arguments[0])?arguments[0]:arguments);return new p(function(te,N){function re(Oe,Te){try{if(Te&&(typeof Te=="object"||typeof Te=="function")){var He=Te.then;if(typeof He=="function")return void He.call(Te,function(je){re(Oe,je)},N)}I[Oe]=Te,--fe===0&&te(I)}catch(je){N(je)}}if(I.length===0)return te([]);for(var fe=I.length,Se=0;Se<I.length;Se++)re(Se,I[Se])})},p.resolve=function(I){return I&&typeof I=="object"&&I.constructor===p?I:new p(function(te){te(I)})},p.reject=function(I){return new p(function(te,N){N(I)})},p.race=function(I){return new p(function(te,N){for(var re=0,fe=I.length;fe>re;re++)I[re].then(te,N)})},p._setImmediateFn=function(I){ce=I},t.exports?t.exports=p:s.Promise||(s.Promise=p)})(this)}typeof window<"u"&&typeof window.CustomEvent!="function"&&function(){function s(g,p){p=p||{bubbles:!1,cancelable:!1,detail:void 0};var S=document.createEvent("CustomEvent");return S.initCustomEvent(g,p.bubbles,p.cancelable,p.detail),S}s.prototype=window.Event.prototype,window.CustomEvent=s}(),typeof HTMLCanvasElement<"u"&&!HTMLCanvasElement.prototype.toBlob&&Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(s,g,p){for(var S=atob(this.toDataURL(g,p).split(",")[1]),C=S.length,E=new Uint8Array(C),B=0;B<C;B++)E[B]=S.charCodeAt(B);s(new Blob([E],{type:g||"image/png"}))}});var r=["Webkit","Moz","ms"],n=typeof document<"u"?document.createElement("div").style:{},a=[1,8,3,6],u=[2,7,4,5],i,o,l;function d(s){if(s in n)return s;for(var g=s[0].toUpperCase()+s.slice(1),p=r.length;p--;)if(s=r[p]+g,s in n)return s}o=d("transform"),i=d("transformOrigin"),l=d("userSelect");function f(s,g){var p=a.indexOf(s)>-1?a:u,S=p.indexOf(s),C=g/90%p.length;return p[(p.length+S+C%p.length)%p.length]}function h(s,g){s=s||{};for(var p in g)g[p]&&g[p].constructor&&g[p].constructor===Object?(s[p]=s[p]||{},h(s[p],g[p])):s[p]=g[p];return s}function v(s){return h({},s)}function b(s,g,p){var S;return function(){var C=this,E=arguments,B=function(){S=null,s.apply(C,E)};clearTimeout(S),S=setTimeout(B,g)}}function w(s){if("createEvent"in document){var g=document.createEvent("HTMLEvents");g.initEvent("change",!1,!0),s.dispatchEvent(g)}else s.fireEvent("onchange")}function _(s,g,p){if(typeof g=="string"){var S=g;g={},g[S]=p}for(var C in g)s.style[C]=g[C]}function y(s,g){s.classList?s.classList.add(g):s.className+=" "+g}function k(s,g){s.classList?s.classList.remove(g):s.className=s.className.replace(g,"")}function P(s,g){for(var p in g)s.setAttribute(p,g[p])}function j(s){return parseInt(s,10)}function L(s,g){if(!s)throw"Source image missing";var p=new Image;return p.style.opacity="0",new Promise(function(S,C){function E(){p.style.opacity="1",setTimeout(function(){S(p)},1)}p.removeAttribute("crossOrigin"),s.match(/^https?:\/\/|^\/\//)&&p.setAttribute("crossOrigin","anonymous"),p.onload=function(){g?EXIF.getData(p,function(){E()}):E()},p.onerror=function(B){p.style.opacity=1,setTimeout(function(){C(B)},1)},p.src=s})}function F(s,g){var p=s.naturalWidth,S=s.naturalHeight,C=g||oe(s);if(C&&C>=5){var E=p;p=S,S=E}return{width:p,height:S}}var q={translate3d:{suffix:", 0px"},translate:{suffix:""}},U=function(s,g,p){this.x=parseFloat(s),this.y=parseFloat(g),this.scale=parseFloat(p)};U.parse=function(s){return s.style?U.parse(s.style[o]):s.indexOf("matrix")>-1||s.indexOf("none")>-1?U.fromMatrix(s):U.fromString(s)},U.fromMatrix=function(s){var g=s.substring(7).split(",");return(!g.length||s==="none")&&(g=[1,0,0,1,0,0]),new U(j(g[4]),j(g[5]),parseFloat(g[0]))},U.fromString=function(s){var g=s.split(") "),p=g[0].substring(Ue.globals.translate.length+1).split(","),S=g.length>1?g[1].substring(6):1,C=p.length>1?p[0]:0,E=p.length>1?p[1]:0;return new U(C,E,S)},U.prototype.toString=function(){var s=q[Ue.globals.translate].suffix||"";return Ue.globals.translate+"("+this.x+"px, "+this.y+"px"+s+") scale("+this.scale+")"};var Y=function(s){if(!s||!s.style[i]){this.x=0,this.y=0;return}var g=s.style[i].split(" ");this.x=parseFloat(g[0]),this.y=parseFloat(g[1])};Y.prototype.toString=function(){return this.x+"px "+this.y+"px"};function oe(s){return s.exifdata&&s.exifdata.Orientation?j(s.exifdata.Orientation):1}function K(s,g,p){var S=g.width,C=g.height,E=s.getContext("2d");switch(s.width=g.width,s.height=g.height,E.save(),p){case 2:E.translate(S,0),E.scale(-1,1);break;case 3:E.translate(S,C),E.rotate(180*Math.PI/180);break;case 4:E.translate(0,C),E.scale(1,-1);break;case 5:s.width=C,s.height=S,E.rotate(90*Math.PI/180),E.scale(1,-1);break;case 6:s.width=C,s.height=S,E.rotate(90*Math.PI/180),E.translate(0,-C);break;case 7:s.width=C,s.height=S,E.rotate(-90*Math.PI/180),E.translate(-S,C),E.scale(1,-1);break;case 8:s.width=C,s.height=S,E.translate(0,S),E.rotate(-90*Math.PI/180);break}E.drawImage(g,0,0,S,C),E.restore()}function ee(){var s=this,g="croppie-container",p=s.options.viewport.type?"cr-vp-"+s.options.viewport.type:null,S,C,E,B,T,G;s.options.useCanvas=s.options.enableOrientation||ge.call(s),s.data={},s.elements={},S=s.elements.boundary=document.createElement("div"),E=s.elements.viewport=document.createElement("div"),C=s.elements.img=document.createElement("img"),B=s.elements.overlay=document.createElement("div"),s.options.useCanvas?(s.elements.canvas=document.createElement("canvas"),s.elements.preview=s.elements.canvas):s.elements.preview=C,y(S,"cr-boundary"),S.setAttribute("aria-dropeffect","none"),T=s.options.boundary.width,G=s.options.boundary.height,_(S,{width:T+(isNaN(T)?"":"px"),height:G+(isNaN(G)?"":"px")}),y(E,"cr-viewport"),p&&y(E,p),_(E,{width:s.options.viewport.width+"px",height:s.options.viewport.height+"px"}),E.setAttribute("tabindex",0),y(s.elements.preview,"cr-image"),P(s.elements.preview,{alt:"preview","aria-grabbed":"false"}),y(B,"cr-overlay"),s.element.appendChild(S),S.appendChild(s.elements.preview),S.appendChild(E),S.appendChild(B),y(s.element,g),s.options.customClass&&y(s.element,s.options.customClass),ne.call(this),s.options.enableZoom&&$.call(s),s.options.enableResize&&he.call(s)}function ge(){return this.options.enableExif&&window.EXIF}function he(){var s=this,g=document.createElement("div"),p=!1,S,C,E,B=50,T,G,ie,ce;y(g,"cr-resizer"),_(g,{width:this.options.viewport.width+"px",height:this.options.viewport.height+"px"}),this.options.resizeControls.height&&(ie=document.createElement("div"),y(ie,"cr-resizer-vertical"),g.appendChild(ie)),this.options.resizeControls.width&&(ce=document.createElement("div"),y(ce,"cr-resizer-horisontal"),g.appendChild(ce));function we(N){if(!(N.button!==void 0&&N.button!==0)&&(N.preventDefault(),!p)){var re=s.elements.overlay.getBoundingClientRect();if(p=!0,C=N.pageX,E=N.pageY,S=N.currentTarget.className.indexOf("vertical")!==-1?"v":"h",T=re.width,G=re.height,N.touches){var fe=N.touches[0];C=fe.pageX,E=fe.pageY}window.addEventListener("mousemove",I),window.addEventListener("touchmove",I),window.addEventListener("mouseup",te),window.addEventListener("touchend",te),document.body.style[l]="none"}}function I(N){var re=N.pageX,fe=N.pageY;if(N.preventDefault(),N.touches){var Se=N.touches[0];re=Se.pageX,fe=Se.pageY}var Oe=re-C,Te=fe-E,He=s.options.viewport.height+Te,je=s.options.viewport.width+Oe;S==="v"&&He>=B&&He<=G?(_(g,{height:He+"px"}),s.options.boundary.height+=Te,_(s.elements.boundary,{height:s.options.boundary.height+"px"}),s.options.viewport.height+=Te,_(s.elements.viewport,{height:s.options.viewport.height+"px"})):S==="h"&&je>=B&&je<=T&&(_(g,{width:je+"px"}),s.options.boundary.width+=Oe,_(s.elements.boundary,{width:s.options.boundary.width+"px"}),s.options.viewport.width+=Oe,_(s.elements.viewport,{width:s.options.viewport.width+"px"})),O.call(s),J.call(s),M.call(s),z.call(s),E=fe,C=re}function te(){p=!1,window.removeEventListener("mousemove",I),window.removeEventListener("touchmove",I),window.removeEventListener("mouseup",te),window.removeEventListener("touchend",te),document.body.style[l]=""}ie&&(ie.addEventListener("mousedown",we),ie.addEventListener("touchstart",we)),ce&&(ce.addEventListener("mousedown",we),ce.addEventListener("touchstart",we)),this.elements.boundary.appendChild(g)}function A(s){if(this.options.enableZoom){var g=this.elements.zoomer,p=Ce(s,4);g.value=Math.max(parseFloat(g.min),Math.min(parseFloat(g.max),p)).toString()}}function $(){var s=this,g=s.elements.zoomerWrap=document.createElement("div"),p=s.elements.zoomer=document.createElement("input");y(g,"cr-slider-wrap"),y(p,"cr-slider"),p.type="range",p.step="0.0001",p.value="1",p.style.display=s.options.showZoomer?"":"none",p.setAttribute("aria-label","zoom"),s.element.appendChild(g),g.appendChild(p),s._currentZoom=1;function S(){D.call(s,{value:parseFloat(p.value),origin:new Y(s.elements.preview),viewportRect:s.elements.viewport.getBoundingClientRect(),transform:U.parse(s.elements.preview)})}function C(E){var B,T;if(s.options.mouseWheelZoom==="ctrl"&&E.ctrlKey!==!0)return 0;E.wheelDelta?B=E.wheelDelta/1200:E.deltaY?B=E.deltaY/1060:E.detail?B=E.detail/-60:B=0,T=s._currentZoom+B*s._currentZoom,E.preventDefault(),A.call(s,T),S.call(s)}s.elements.zoomer.addEventListener("input",S),s.elements.zoomer.addEventListener("change",S),s.options.mouseWheelZoom&&(s.elements.boundary.addEventListener("mousewheel",C),s.elements.boundary.addEventListener("DOMMouseScroll",C))}function D(s){var g=this,p=s?s.transform:U.parse(g.elements.preview),S=s?s.viewportRect:g.elements.viewport.getBoundingClientRect(),C=s?s.origin:new Y(g.elements.preview);function E(){var ie={};ie[o]=p.toString(),ie[i]=C.toString(),_(g.elements.preview,ie)}if(g._currentZoom=s?s.value:g._currentZoom,p.scale=g._currentZoom,g.elements.zoomer.setAttribute("aria-valuenow",g._currentZoom),E(),g.options.enforceBoundary){var B=Z.call(g,S),T=B.translate,G=B.origin;p.x>=T.maxX&&(C.x=G.minX,p.x=T.maxX),p.x<=T.minX&&(C.x=G.maxX,p.x=T.minX),p.y>=T.maxY&&(C.y=G.minY,p.y=T.maxY),p.y<=T.minY&&(C.y=G.maxY,p.y=T.minY)}E(),R.call(g),z.call(g)}function Z(s){var g=this,p=g._currentZoom,S=s.width,C=s.height,E=g.elements.boundary.clientWidth/2,B=g.elements.boundary.clientHeight/2,T=g.elements.preview.getBoundingClientRect(),G=T.width,ie=T.height,ce=S/2,we=C/2,I=(ce/p-E)*-1,te=I-(G*(1/p)-S*(1/p)),N=(we/p-B)*-1,re=N-(ie*(1/p)-C*(1/p)),fe=1/p*ce,Se=G*(1/p)-fe,Oe=1/p*we,Te=ie*(1/p)-Oe;return{translate:{maxX:I,minX:te,maxY:N,minY:re},origin:{maxX:Se,minX:fe,maxY:Te,minY:Oe}}}function M(s){var g=this,p=g._currentZoom,S=g.elements.preview.getBoundingClientRect(),C=g.elements.viewport.getBoundingClientRect(),E=U.parse(g.elements.preview.style[o]),B=new Y(g.elements.preview),T=C.top-S.top+C.height/2,G=C.left-S.left+C.width/2,ie={},ce={};if(s){var we=B.x,I=B.y,te=E.x,N=E.y;ie.y=we,ie.x=I,E.y=te,E.x=N}else ie.y=T/p,ie.x=G/p,ce.y=(ie.y-B.y)*(1-p),ce.x=(ie.x-B.x)*(1-p),E.x-=ce.x,E.y-=ce.y;var re={};re[i]=ie.x+"px "+ie.y+"px",re[o]=E.toString(),_(g.elements.preview,re)}function ne(){var s=this,g=!1,p,S,C,E,B;function T(N,re){var fe=s.elements.preview.getBoundingClientRect(),Se=B.y+re,Oe=B.x+N;s.options.enforceBoundary?(E.top>fe.top+re&&E.bottom<fe.bottom+re&&(B.y=Se),E.left>fe.left+N&&E.right<fe.right+N&&(B.x=Oe)):(B.y=Se,B.x=Oe)}function G(N){s.elements.preview.setAttribute("aria-grabbed",N),s.elements.boundary.setAttribute("aria-dropeffect",N?"move":"none")}function ie(N){var re=37,fe=38,Se=39,Oe=40;if(N.shiftKey&&(N.keyCode===fe||N.keyCode===Oe)){var Te;N.keyCode===fe?Te=parseFloat(s.elements.zoomer.value)+parseFloat(s.elements.zoomer.step):Te=parseFloat(s.elements.zoomer.value)-parseFloat(s.elements.zoomer.step),s.setZoom(Te)}else if(s.options.enableKeyMovement&&N.keyCode>=37&&N.keyCode<=40){N.preventDefault();var He=je(N.keyCode);B=U.parse(s.elements.preview),document.body.style[l]="none",E=s.elements.viewport.getBoundingClientRect(),ce(He)}function je(Pt){switch(Pt){case re:return[1,0];case fe:return[0,1];case Se:return[-1,0];case Oe:return[0,-1]}}}function ce(N){var re=N[0],fe=N[1],Se={};T(re,fe),Se[o]=B.toString(),_(s.elements.preview,Se),O.call(s),document.body.style[l]="",M.call(s),z.call(s),C=0}function we(N){if(!(N.button!==void 0&&N.button!==0)&&(N.preventDefault(),!g)){if(g=!0,p=N.pageX,S=N.pageY,N.touches){var re=N.touches[0];p=re.pageX,S=re.pageY}G(g),B=U.parse(s.elements.preview),window.addEventListener("mousemove",I),window.addEventListener("touchmove",I),window.addEventListener("mouseup",te),window.addEventListener("touchend",te),document.body.style[l]="none",E=s.elements.viewport.getBoundingClientRect()}}function I(N){N.preventDefault();var re=N.pageX,fe=N.pageY;if(N.touches){var Se=N.touches[0];re=Se.pageX,fe=Se.pageY}var Oe=re-p,Te=fe-S,He={};if(N.type==="touchmove"&&N.touches.length>1){var je=N.touches[0],Pt=N.touches[1],ru=Math.sqrt((je.pageX-Pt.pageX)*(je.pageX-Pt.pageX)+(je.pageY-Pt.pageY)*(je.pageY-Pt.pageY));C||(C=ru/s._currentZoom);var Vs=ru/C;A.call(s,Vs),w(s.elements.zoomer);return}T(Oe,Te),He[o]=B.toString(),_(s.elements.preview,He),O.call(s),S=fe,p=re}function te(){g=!1,G(g),window.removeEventListener("mousemove",I),window.removeEventListener("touchmove",I),window.removeEventListener("mouseup",te),window.removeEventListener("touchend",te),document.body.style[l]="",M.call(s),z.call(s),C=0}s.elements.overlay.addEventListener("mousedown",we),s.elements.viewport.addEventListener("keydown",ie),s.elements.overlay.addEventListener("touchstart",we)}function O(){if(this.elements){var s=this,g=s.elements.boundary.getBoundingClientRect(),p=s.elements.preview.getBoundingClientRect();_(s.elements.overlay,{width:p.width+"px",height:p.height+"px",top:p.top-g.top+"px",left:p.left-g.left+"px"})}}var R=b(O,500);function z(){var s=this,g=s.get();if(ae.call(s))if(s.options.update.call(s,g),s.$&&typeof Prototype>"u")s.$(s.element).trigger("update.croppie",g);else{var p;window.CustomEvent?p=new CustomEvent("update",{detail:g}):(p=document.createEvent("CustomEvent"),p.initCustomEvent("update",!0,!0,g)),s.element.dispatchEvent(p)}}function ae(){return this.elements.preview.offsetHeight>0&&this.elements.preview.offsetWidth>0}function H(){var s=this,g=1,p={},S=s.elements.preview,C,E=new U(0,0,g),B=new Y,T=ae.call(s);!T||s.data.bound||(s.data.bound=!0,p[o]=E.toString(),p[i]=B.toString(),p.opacity=1,_(S,p),C=s.elements.preview.getBoundingClientRect(),s._originalImageWidth=C.width,s._originalImageHeight=C.height,s.data.orientation=ge.call(s)?oe(s.elements.img):s.data.orientation,s.options.enableZoom?J.call(s,!0):s._currentZoom=g,E.scale=s._currentZoom,p[o]=E.toString(),_(S,p),s.data.points.length?Q.call(s,s.data.points):ue.call(s),M.call(s),O.call(s))}function J(s){var g=this,p=Math.max(g.options.minZoom,0)||0,S=g.options.maxZoom||1.5,C,E,B=g.elements.zoomer,T=parseFloat(B.value),G=g.elements.boundary.getBoundingClientRect(),ie=F(g.elements.img,g.data.orientation),ce=g.elements.viewport.getBoundingClientRect(),we,I;g.options.enforceBoundary&&(we=ce.width/ie.width,I=ce.height/ie.height,p=Math.max(we,I)),p>=S&&(S=p+1),B.min=Ce(p,4),B.max=Ce(S,4),!s&&(T<B.min||T>B.max)?A.call(g,T<B.min?B.min:B.max):s&&(E=Math.max(G.width/ie.width,G.height/ie.height),C=g.data.boundZoom!==null?g.data.boundZoom:E,A.call(g,C)),w(B)}function Q(s){if(s.length!==4)throw"Croppie - Invalid number of points supplied: "+s;var g=this,p=s[2]-s[0],S=g.elements.viewport.getBoundingClientRect(),C=g.elements.boundary.getBoundingClientRect(),E={left:S.left-C.left,top:S.top-C.top},B=S.width/p,T=s[1],G=s[0],ie=-1*s[1]+E.top,ce=-1*s[0]+E.left,we={};we[i]=G+"px "+T+"px",we[o]=new U(ce,ie,B).toString(),_(g.elements.preview,we),A.call(g,B),g._currentZoom=B}function ue(){var s=this,g=s.elements.preview.getBoundingClientRect(),p=s.elements.viewport.getBoundingClientRect(),S=s.elements.boundary.getBoundingClientRect(),C=p.left-S.left,E=p.top-S.top,B=C-(g.width-p.width)/2,T=E-(g.height-p.height)/2,G=new U(B,T,s._currentZoom);_(s.elements.preview,o,G.toString())}function de(s){var g=this,p=g.elements.canvas,S=g.elements.img,C=p.getContext("2d");C.clearRect(0,0,p.width,p.height),p.width=S.width,p.height=S.height;var E=g.options.enableOrientation&&s||oe(S);K(p,S,E)}function ve(s){var g=this,p=s.points,S=j(p[0]),C=j(p[1]),E=j(p[2]),B=j(p[3]),T=E-S,G=B-C,ie=s.circle,ce=document.createElement("canvas"),we=ce.getContext("2d"),I=s.outputWidth||T,te=s.outputHeight||G;ce.width=I,ce.height=te,s.backgroundColor&&(we.fillStyle=s.backgroundColor,we.fillRect(0,0,I,te));var N=S,re=C,fe=T,Se=G,Oe=0,Te=0,He=I,je=te;return S<0&&(N=0,Oe=Math.abs(S)/T*I),fe+N>g._originalImageWidth&&(fe=g._originalImageWidth-N,He=fe/T*I),C<0&&(re=0,Te=Math.abs(C)/G*te),Se+re>g._originalImageHeight&&(Se=g._originalImageHeight-re,je=Se/G*te),we.drawImage(this.elements.preview,N,re,fe,Se,Oe,Te,He,je),ie&&(we.fillStyle="#fff",we.globalCompositeOperation="destination-in",we.beginPath(),we.arc(ce.width/2,ce.height/2,ce.width/2,0,Math.PI*2,!0),we.closePath(),we.fill()),ce}function se(s){var g=s.points,p=document.createElement("div"),S=document.createElement("img"),C=g[2]-g[0],E=g[3]-g[1];return y(p,"croppie-result"),p.appendChild(S),_(S,{left:-1*g[0]+"px",top:-1*g[1]+"px"}),S.src=s.url,_(p,{width:C+"px",height:E+"px"}),p}function ye(s){return ve.call(this,s).toDataURL(s.format,s.quality)}function pe(s){var g=this;return new Promise(function(p){ve.call(g,s).toBlob(function(S){p(S)},s.format,s.quality)})}function xe(s){this.elements.img.parentNode&&(Array.prototype.forEach.call(this.elements.img.classList,function(g){s.classList.add(g)}),this.elements.img.parentNode.replaceChild(s,this.elements.img),this.elements.preview=s),this.elements.img=s}function De(s,g){var p=this,S,C=[],E=null,B=ge.call(p);if(typeof s=="string")S=s,s={};else if(Array.isArray(s))C=s.slice();else{if(typeof s>"u"&&p.data.url)return H.call(p),z.call(p),null;S=s.url,C=s.points||[],E=typeof s.zoom>"u"?null:s.zoom}return p.data.bound=!1,p.data.url=S||p.data.url,p.data.boundZoom=E,L(S,B).then(function(T){if(xe.call(p,T),C.length)p.options.relative&&(C=[C[0]*T.naturalWidth/100,C[1]*T.naturalHeight/100,C[2]*T.naturalWidth/100,C[3]*T.naturalHeight/100]);else{var G=F(T),ie=p.elements.viewport.getBoundingClientRect(),ce=ie.width/ie.height,we=G.width/G.height,I,te;we>ce?(te=G.height,I=te*ce):(I=G.width,te=G.height/ce);var N=(G.width-I)/2,re=(G.height-te)/2,fe=N+I,Se=re+te;p.data.points=[N,re,fe,Se]}p.data.orientation=s.orientation||1,p.data.points=C.map(function(Oe){return parseFloat(Oe)}),p.options.useCanvas&&de.call(p,p.data.orientation),H.call(p),z.call(p),g&&g()})}function Ce(s,g){return parseFloat(s).toFixed(g||0)}function Fe(){var s=this,g=s.elements.preview.getBoundingClientRect(),p=s.elements.viewport.getBoundingClientRect(),S=p.left-g.left,C=p.top-g.top,E=(p.width-s.elements.viewport.offsetWidth)/2,B=(p.height-s.elements.viewport.offsetHeight)/2,T=S+s.elements.viewport.offsetWidth+E,G=C+s.elements.viewport.offsetHeight+B,ie=s._currentZoom;(ie===1/0||isNaN(ie))&&(ie=1);var ce=s.options.enforceBoundary?0:Number.NEGATIVE_INFINITY;return S=Math.max(ce,S/ie),C=Math.max(ce,C/ie),T=Math.max(ce,T/ie),G=Math.max(ce,G/ie),{points:[Ce(S),Ce(C),Ce(T),Ce(G)],zoom:ie,orientation:s.data.orientation}}var Me={type:"canvas",format:"png",quality:1},st=["jpeg","webp","png"];function Le(s){var g=this,p=Fe.call(g),S=h(v(Me),v(s)),C=typeof s=="string"?s:S.type||"base64",E=S.size||"viewport",B=S.format,T=S.quality,G=S.backgroundColor,ie=typeof S.circle=="boolean"?S.circle:g.options.viewport.type==="circle",ce=g.elements.viewport.getBoundingClientRect(),we=ce.width/ce.height,I;return E==="viewport"?(p.outputWidth=ce.width,p.outputHeight=ce.height):typeof E=="object"&&(E.width&&E.height?(p.outputWidth=E.width,p.outputHeight=E.height):E.width?(p.outputWidth=E.width,p.outputHeight=E.width/we):E.height&&(p.outputWidth=E.height*we,p.outputHeight=E.height)),st.indexOf(B)>-1&&(p.format="image/"+B,p.quality=T),p.circle=ie,p.url=g.data.url,p.backgroundColor=G,I=new Promise(function(te){switch(C.toLowerCase()){case"rawcanvas":te(ve.call(g,p));break;case"canvas":case"base64":te(ye.call(g,p));break;case"blob":pe.call(g,p).then(te);break;default:te(se.call(g,p));break}}),I}function We(){H.call(this)}function at(s){if(!this.options.useCanvas||!this.options.enableOrientation)throw"Croppie: Cannot rotate without enableOrientation && EXIF.js included";var g=this,p=g.elements.canvas;if(g.data.orientation=f(g.data.orientation,s),K(p,g.elements.img,g.data.orientation),M.call(g,!0),J.call(g),Math.abs(s)/90%2===1){var S=g._originalImageHeight,C=g._originalImageWidth;g._originalImageWidth=S,g._originalImageHeight=C}}function pr(){var s=this;s.element.removeChild(s.elements.boundary),k(s.element,"croppie-container"),s.options.enableZoom&&s.element.removeChild(s.elements.zoomerWrap),delete s.elements}if(typeof window<"u"&&window.jQuery){var Qe=window.jQuery;Qe.fn.croppie=function(s){var g=typeof s;if(g==="string"){var p=Array.prototype.slice.call(arguments,1),S=Qe(this).data("croppie");return s==="get"?S.get():s==="result"?S.result.apply(S,p):s==="bind"?S.bind.apply(S,p):this.each(function(){var C=Qe(this).data("croppie");if(C){var E=C[s];if(Qe.isFunction(E))E.apply(C,p),s==="destroy"&&Qe(this).removeData("croppie");else throw"Croppie "+s+" method not found"}})}else return this.each(function(){var C=new Ue(this,s);C.$=Qe,Qe(this).data("croppie",C)})}}function Ue(s,g){if(s.className.indexOf("croppie-container")>-1)throw new Error("Croppie: Can't initialize croppie more than once");if(this.element=s,this.options=h(v(Ue.defaults),g),this.element.tagName.toLowerCase()==="img"){var p=this.element;y(p,"cr-original-image"),P(p,{"aria-hidden":"true",alt:""});var S=document.createElement("div");this.element.parentNode.appendChild(S),S.appendChild(p),this.element=S,this.options.url=this.options.url||p.src}if(ee.call(this),this.options.url){var C={url:this.options.url,points:this.options.points};delete this.options.url,delete this.options.points,De.call(this,C)}}return Ue.defaults={viewport:{width:100,height:100,type:"square"},boundary:{},orientationControls:{enabled:!0,leftClass:"",rightClass:""},resizeControls:{width:!0,height:!0},customClass:"",showZoomer:!0,enableZoom:!0,enableResize:!1,mouseWheelZoom:!0,enableExif:!1,enforceBoundary:!0,enableOrientation:!1,enableKeyMovement:!0,update:function(){}},Ue.globals={translate:"translate3d"},h(Ue.prototype,{bind:function(s,g){return De.call(this,s,g)},get:function(){var s=Fe.call(this),g=s.points;return this.options.relative&&(g[0]/=this.elements.img.naturalWidth/100,g[1]/=this.elements.img.naturalHeight/100,g[2]/=this.elements.img.naturalWidth/100,g[3]/=this.elements.img.naturalHeight/100),s},result:function(s){return Le.call(this,s)},refresh:function(){return We.call(this)},setZoom:function(s){A.call(this,s),w(this.elements.zoomer)},rotate:function(s){at.call(this,s)},destroy:function(){return pr.call(this)}}),Ue})})(ta,ta.exports);var dp=ta.exports;const In=aa(dp);function _i(t){let e,r,n,a,u,i,o,l,d,f,h,v,b,w,_,y,k,P,j,L,F,q,U,Y,oe,K,ee,ge,he,A,$,D,Z,M,ne,O,R,z,ae,H,J,Q,ue,de,ve,se,ye,pe,xe,De,Ce,Fe,Me,st,Le;return{c(){e=x("div"),r=x("div"),n=x("div"),a=x("div"),u=x("h5"),u.textContent="画像をクロップ",i=W(),o=x("button"),l=W(),d=x("div"),f=x("div"),h=x("div"),v=W(),b=x("div"),w=x("div"),_=x("button"),_.textContent="1:1",y=W(),k=x("button"),k.textContent="4:3",P=W(),j=x("button"),j.textContent="16:9",L=W(),F=x("button"),F.textContent="3:4",q=W(),U=x("button"),U.textContent="9:16",Y=W(),oe=x("div"),K=x("div"),ee=x("span"),ee.textContent="幅:",ge=W(),he=x("button"),A=x("span"),A.textContent="−",D=W(),Z=x("button"),M=x("span"),M.textContent="+",O=W(),R=x("div"),z=x("span"),z.textContent="高さ:",ae=W(),H=x("button"),J=x("span"),J.textContent="−",ue=W(),de=x("button"),ve=x("span"),ve.textContent="+",ye=W(),pe=x("div"),xe=x("button"),xe.textContent="戻す",De=W(),Ce=x("button"),Ce.textContent="キャンセル",Fe=W(),Me=x("button"),Me.textContent="確定",c(u,"class","modal-title svelte-1dy3sam"),c(u,"id","cropModalTitle"),c(o,"type","button"),c(o,"class","btn-close svelte-1dy3sam"),c(o,"aria-label","Close"),c(a,"class","modal-header svelte-1dy3sam"),c(_,"type","button"),c(_,"class","btn btn-sm btn-outline-primary"),c(k,"type","button"),c(k,"class","btn btn-sm btn-outline-primary"),c(j,"type","button"),c(j,"class","btn btn-sm btn-outline-primary"),c(F,"type","button"),c(F,"class","btn btn-sm btn-outline-primary"),c(U,"type","button"),c(U,"class","btn btn-sm btn-outline-primary"),c(w,"class","aspect-ratio-buttons svelte-1dy3sam"),c(ee,"class","dimension-label svelte-1dy3sam"),c(A,"aria-hidden","true"),c(he,"type","button"),c(he,"class","btn btn-sm btn-outline-secondary"),he.disabled=$=t[2].width<=100,c(M,"aria-hidden","true"),c(Z,"type","button"),c(Z,"class","btn btn-sm btn-outline-secondary"),Z.disabled=ne=t[2].width>=400,c(K,"class","viewport-dimension svelte-1dy3sam"),c(z,"class","dimension-label svelte-1dy3sam"),c(J,"aria-hidden","true"),c(H,"type","button"),c(H,"class","btn btn-sm btn-outline-secondary"),H.disabled=Q=t[2].height<=100,c(ve,"aria-hidden","true"),c(de,"type","button"),c(de,"class","btn btn-sm btn-outline-secondary"),de.disabled=se=t[2].height>=400,c(R,"class","viewport-dimension svelte-1dy3sam"),c(oe,"class","size-controls svelte-1dy3sam"),c(b,"class","viewport-controls svelte-1dy3sam"),c(f,"class","cropper-container svelte-1dy3sam"),c(d,"class","modal-body svelte-1dy3sam"),c(xe,"type","button"),c(xe,"class","btn btn-warning svelte-1dy3sam"),c(Ce,"type","button"),c(Ce,"class","btn btn-secondary svelte-1dy3sam"),c(Me,"type","button"),c(Me,"class","btn btn-primary svelte-1dy3sam"),c(pe,"class","modal-footer svelte-1dy3sam"),c(n,"class","modal-content svelte-1dy3sam"),c(r,"class","modal-dialog svelte-1dy3sam"),c(r,"role","dialog"),c(r,"aria-modal","true"),c(r,"aria-labelledby","cropModalTitle"),c(e,"class","modal-backdrop svelte-1dy3sam")},m(We,at){X(We,e,at),m(e,r),m(r,n),m(n,a),m(a,u),m(a,i),m(a,o),m(n,l),m(n,d),m(d,f),m(f,h),t[11](h),m(f,v),m(f,b),m(b,w),m(w,_),m(w,y),m(w,k),m(w,P),m(w,j),m(w,L),m(w,F),m(w,q),m(w,U),m(b,Y),m(b,oe),m(oe,K),m(K,ee),m(K,ge),m(K,he),m(he,A),m(K,D),m(K,Z),m(Z,M),m(oe,O),m(oe,R),m(R,z),m(R,ae),m(R,H),m(H,J),m(R,ue),m(R,de),m(de,ve),m(n,ye),m(n,pe),m(pe,xe),m(pe,De),m(pe,Ce),m(pe,Fe),m(pe,Me),st||(Le=[le(o,"click",t[4]),le(_,"click",t[12]),le(k,"click",t[13]),le(j,"click",t[14]),le(F,"click",t[15]),le(U,"click",t[16]),le(he,"click",t[17]),le(Z,"click",t[18]),le(H,"click",t[19]),le(de,"click",t[20]),le(xe,"click",t[5]),le(Ce,"click",t[4]),le(Me,"click",t[3]),le(e,"click",Js(t[4]))],st=!0)},p(We,at){at&4&&$!==($=We[2].width<=100)&&(he.disabled=$),at&4&&ne!==(ne=We[2].width>=400)&&(Z.disabled=ne),at&4&&Q!==(Q=We[2].height<=100)&&(H.disabled=Q),at&4&&se!==(se=We[2].height>=400)&&(de.disabled=se)},d(We){We&&V(e),t[11](null),st=!1,Ye(Le)}}}function cp(t){let e,r=t[0]&&_i(t);return{c(){r&&r.c(),e=Ar()},m(n,a){r&&r.m(n,a),X(n,e,a)},p(n,[a]){n[0]?r?r.p(n,a):(r=_i(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:$e,o:$e,d(n){n&&V(e),r&&r.d(n)}}}function fp(t,e,r){let{imageUrl:n}=e,{showModal:a=!1}=e,{initialCropInfo:u=void 0}=e;const i=Ir();let o=null,l,d=u?{width:u.viewportWidth,height:u.viewportHeight}:{width:300,height:300};const f={viewport:{width:d.width,height:d.height},boundary:{width:400,height:400},enableExif:!0,enableResize:!1,showZoomer:!0,enableOrientation:!0};na(()=>{a&&l&&n&&h()});function h(){o&&v(),l?(r(10,o=new In(l,f)),o.bind({url:n,zoom:(u==null?void 0:u.zoom)??0,orientation:(u==null?void 0:u.orientation)??1,points:u==null?void 0:u.points})):console.error("Cropper element not found during initialization.")}function v(){o&&(o.destroy(),r(10,o=null))}el(()=>{v()});async function b(){if(o)try{const ge=o.get(),he=await o.result({type:"canvas",size:"original",format:"png",quality:1,circle:!1});i("cropComplete",{croppedUrl:he,cropInfo:{points:ge.points||[],zoom:ge.zoom||0,orientation:ge.orientation||1,viewportWidth:d.width,viewportHeight:d.height}})}catch(ge){console.error("Cropping failed:",ge),alert("画像のクロップに失敗しました。"),w()}}function w(){i("cropCancel")}function _(){i("resetCrop")}function y(ge,he){if(!o)return;const A={...d};ge==="width"?A.width=Math.max(100,Math.min(400,d.width+he)):A.height=Math.max(100,Math.min(400,d.height+he)),r(2,d=A);const $=o.get();v();const D={...f,viewport:{width:A.width,height:A.height}};l&&(r(10,o=new In(l,D)),o.bind({url:n,zoom:$.zoom||0,orientation:$.orientation||1,points:$.points}))}function k(ge){if(!o)return;let he=d.width,A=d.height;switch(ge){case"1:1":A=he;break;case"4:3":A=Math.round(he*3/4);break;case"16:9":A=Math.round(he*9/16);break;case"3:4":A=Math.round(he*4/3);break;case"9:16":A=Math.round(he*16/9);break}if(A>400)switch(A=400,ge){case"1:1":he=A;break;case"4:3":he=Math.round(A*4/3);break;case"16:9":he=Math.round(A*16/9);break;case"3:4":he=Math.round(A*3/4);break;case"9:16":he=Math.round(A*9/16);break}he=Math.max(100,Math.min(400,he)),A=Math.max(100,Math.min(400,A)),r(2,d={width:he,height:A});const $=o.get();v();const D={...f,viewport:{width:he,height:A}};l&&(r(10,o=new In(l,D)),o.bind({url:n,zoom:$.zoom||0,orientation:$.orientation||1,points:$.points}))}function P(ge){Rt[ge?"unshift":"push"](()=>{l=ge,r(1,l)})}const j=()=>k("1:1"),L=()=>k("4:3"),F=()=>k("16:9"),q=()=>k("3:4"),U=()=>k("9:16"),Y=()=>y("width",-25),oe=()=>y("width",25),K=()=>y("height",-25),ee=()=>y("height",25);return t.$$set=ge=>{"imageUrl"in ge&&r(8,n=ge.imageUrl),"showModal"in ge&&r(0,a=ge.showModal),"initialCropInfo"in ge&&r(9,u=ge.initialCropInfo)},t.$$.update=()=>{t.$$.dirty&1795&&(a&&l&&n?o?o.bind({url:n,zoom:(u==null?void 0:u.zoom)??0,orientation:(u==null?void 0:u.orientation)??1,points:u==null?void 0:u.points}):h():!a&&o&&v())},[a,l,d,b,w,_,y,k,n,u,o,P,j,L,F,q,U,Y,oe,K,ee]}class hp extends Ct{constructor(e){super(),St(this,e,fp,cp,xt,{imageUrl:8,showModal:0,initialCropInfo:9})}}function ki(t,e,r){const n=t.slice();return n[17]=e[r],n[19]=r,n}function xi(t,e){let r,n,a,u,i,o,l,d,f,h,v,b,w,_,y,k;function P(){return e[12](e[19])}function j(){return e[13](e[19])}return{key:t,first:null,c(){r=x("div"),n=x("img"),i=W(),o=x("button"),l=Ee("×"),f=W(),h=x("button"),v=ke("svg"),b=ke("path"),_=W(),au(n.src,a=e[17].croppedUrl??e[17].originalUrl)||c(n,"src",a),c(n,"alt",u=`preview ${e[19]+1}`),me(n,"height","100px"),me(n,"width","auto"),me(n,"object-fit","contain"),me(n,"display","block"),c(o,"class","btn btn-danger btn-sm position-absolute top-0 end-0 p-0 m-1 d-flex justify-content-center align-items-center"),me(o,"line-height","1"),me(o,"width","1.2rem"),me(o,"height","1.2rem"),me(o,"border-radius","50%"),me(o,"font-size","0.8rem"),c(o,"aria-label",d=`画像を削除 ${e[19]+1}`),c(b,"d","M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"),c(v,"xmlns","http://www.w3.org/2000/svg"),c(v,"width","1em"),c(v,"height","1em"),c(v,"fill","currentColor"),c(v,"class","bi bi-pencil-fill"),c(v,"viewBox","0 0 16 16"),c(h,"class","btn btn-secondary btn-sm position-absolute bottom-0 end-0 p-0 m-1 d-flex justify-content-center align-items-center"),me(h,"line-height","1"),me(h,"width","1.2rem"),me(h,"height","1.2rem"),me(h,"border-radius","50%"),me(h,"font-size","0.7rem"),c(h,"aria-label",w=`画像を編集 ${e[19]+1}`),c(r,"class","position-relative d-flex align-items-center justify-content-center"),me(r,"min-height","100px"),me(r,"border","1px solid #DFDFDF"),me(r,"border-radius","3px"),this.first=r},m(L,F){X(L,r,F),m(r,n),m(r,i),m(r,o),m(o,l),m(r,f),m(r,h),m(h,v),m(v,b),m(r,_),y||(k=[le(o,"click",P),le(h,"click",j)],y=!0)},p(L,F){e=L,F&1&&!au(n.src,a=e[17].croppedUrl??e[17].originalUrl)&&c(n,"src",a),F&1&&u!==(u=`preview ${e[19]+1}`)&&c(n,"alt",u),F&1&&d!==(d=`画像を削除 ${e[19]+1}`)&&c(o,"aria-label",d),F&1&&w!==(w=`画像を編集 ${e[19]+1}`)&&c(h,"aria-label",w)},d(L){L&&V(r),y=!1,Ye(k)}}}function Si(t){let e,r,n;function a(i){t[14](i)}let u={imageUrl:t[3].originalUrl,initialCropInfo:t[3].cropInfo};return t[2]!==void 0&&(u.showModal=t[2]),e=new hp({props:u}),Rt.push(()=>qi(e,"showModal",a)),e.$on("cropComplete",t[6]),e.$on("cropCancel",t[7]),e.$on("resetCrop",t[8]),{c(){Mt(e.$$.fragment)},m(i,o){wt(e,i,o),n=!0},p(i,o){const l={};o&8&&(l.imageUrl=i[3].originalUrl),o&8&&(l.initialCropInfo=i[3].cropInfo),!r&&o&4&&(r=!0,l.showModal=i[2],Gi(()=>r=!1)),e.$set(l)},i(i){n||(qe(e.$$.fragment,i),n=!0)},o(i){ot(e.$$.fragment,i),n=!1},d(i){_t(e,i)}}}function pp(t){let e,r,n,a,u,i,o,l=[],d=new Map,f,h,v,b,w=Nt(t[0]);const _=k=>k[17].id;for(let k=0;k<w.length;k+=1){let P=ki(t,w,k),j=_(P);d.set(j,l[k]=xi(j,P))}let y=t[2]&&t[3]&&Si(t);return{c(){e=x("div"),r=x("div"),n=x("input"),a=W(),u=x("button"),u.innerHTML='<i class="fa fa-plus" aria-hidden="true"></i> 画像を追加',i=W(),o=x("div");for(let k=0;k<l.length;k+=1)l[k].c();f=W(),y&&y.c(),c(n,"type","file"),me(n,"display","none"),c(n,"accept","image/*"),n.multiple=!0,c(u,"class","btn btn-sm btn-block btn-primary"),c(r,"class","d-flex flex-row align-items-center justify-content-between mb-2"),c(o,"class","d-flex flex-row gap-2 flex-wrap"),c(e,"class","d-flex flex-column")},m(k,P){X(k,e,P),m(e,r),m(r,n),t[10](n),m(r,a),m(r,u),m(e,i),m(e,o);for(let j=0;j<l.length;j+=1)l[j]&&l[j].m(o,null);m(e,f),y&&y.m(e,null),h=!0,v||(b=[le(n,"change",t[4]),le(u,"click",t[11])],v=!0)},p(k,[P]){P&545&&(w=Nt(k[0]),l=il(l,P,_,1,k,w,d,o,ul,xi,null,ki)),k[2]&&k[3]?y?(y.p(k,P),P&12&&qe(y,1)):(y=Si(k),y.c(),qe(y,1),y.m(e,null)):y&&(Vi(),ot(y,1,1,()=>{y=null}),Xi())},i(k){h||(qe(y),h=!0)},o(k){ot(y),h=!1},d(k){k&&V(e),t[10](null);for(let P=0;P<l.length;P+=1)l[P].d();y&&y.d(),v=!1,Ye(b)}}}function vp(t,e,r){let{images:n=[]}=e,a,u=!1,i=null,o=null;na(()=>{document.addEventListener("paste",async L=>{if(L.clipboardData)for(const F of L.clipboardData.items){if(!F.type.startsWith("image/"))continue;const q=F.getAsFile();if(!q)continue;const U=await wi(q),Y={id:crypto.randomUUID(),originalUrl:U,croppedUrl:null};r(0,n=[...n,Y])}})});const l=async L=>{const F=L.target,q=F.files??[];if(q.length===0)return;const U=[];for(const Y of q){const oe=await wi(Y);U.push({id:crypto.randomUUID(),originalUrl:oe,croppedUrl:null})}r(0,n=[...n,...U]),F.value=""},d=L=>{o=L;const F=n[L];r(3,i={originalUrl:F.originalUrl,cropInfo:F.cropInfo}),r(2,u=!0)},f=L=>{if(o===null)return;const{croppedUrl:F,cropInfo:q}=L.detail,U=[...n];U[o]={...U[o],croppedUrl:F,cropInfo:q},r(0,n=U),b()},h=()=>{b()},v=()=>{if(o===null)return;const L=[...n];L[o]={...L[o],croppedUrl:null,cropInfo:void 0},r(0,n=L),b()},b=()=>{r(2,u=!1),r(3,i=null),o=null},w=L=>{r(0,n=n.filter((F,q)=>q!==L))};function _(L){Rt[L?"unshift":"push"](()=>{a=L,r(1,a)})}const y=()=>{a.click()},k=L=>w(L),P=L=>d(L);function j(L){u=L,r(2,u)}return t.$$set=L=>{"images"in L&&r(0,n=L.images)},[n,a,u,i,l,d,f,h,v,w,_,y,k,P,j]}class gp extends Ct{constructor(e){super(),St(this,e,vp,pp,xt,{images:0})}}function Ci(t,e,r){const n=t.slice();return n[21]=e[r],n}function mp(t){let e,r,n,a,u,i,o,l,d,f,h,v,b,w,_,y,k,P,j,L,F,q,U,Y,oe,K,ee,ge,he,A,$,D,Z,M,ne,O,R,z,ae,H,J,Q,ue,de,ve,se,ye,pe,xe,De,Ce,Fe,Me,st,Le,We,at;o=new Mh({}),o.$on("onChange",t[17]),w=new Bh({}),w.$on("onChange",t[17]),F=new qh({}),F.$on("onChange",t[17]);function pr(T,G){return T[7]?wp:yp}let Qe=pr(t),Ue=Qe(t);function s(T,G){return T[9]?_p:kp}let g=s(t),p=g(t),S=t[6]&&Ui(),C=t[9]&&Pi(t);function E(T){t[34](T)}let B={};return t[8]!==void 0&&(B.images=t[8]),Me=new gp({props:B}),Rt.push(()=>qi(Me,"images",E)),{c(){e=x("div"),r=x("div"),n=x("input"),u=W(),i=x("div"),Mt(o.$$.fragment),l=W(),d=x("div"),f=x("input"),v=W(),b=x("div"),Mt(w.$$.fragment),_=W(),y=x("div"),k=x("input"),j=W(),L=x("div"),Mt(F.$$.fragment),q=W(),U=x("div"),Y=x("div"),oe=x("span"),oe.textContent="Message:",K=W(),ee=x("textarea"),ge=W(),he=x("div"),A=x("div"),$=x("button"),Ue.c(),Z=W(),M=x("button"),ne=Ee("Clear"),R=W(),z=x("span"),ae=Ee(t[14]),H=Ee(" / "),J=Ee(Dn),Q=Ee(" 文字"),ue=W(),de=x("div"),ve=x("div"),se=x("span"),se.textContent="Reply:",ye=W(),pe=x("div"),p.c(),xe=W(),S&&S.c(),De=W(),C&&C.c(),Ce=W(),Fe=x("div"),Mt(Me.$$.fragment),c(n,"class","mt-1 form-check-input"),c(n,"type","checkbox"),c(n,"id","mastodon"),n.disabled=a=t[1].mastodon==null,c(i,"class","w-100"),c(r,"class","form-check mb-0 d-flex flex-row align-items-start gap-1"),c(f,"class","mt-1 form-check-input"),c(f,"type","checkbox"),c(f,"id","bluesky"),f.disabled=h=t[1].bluesky==null,c(b,"class","w-100"),c(d,"class","form-check mb-0 d-flex flex-row align-items-start gap-1"),c(k,"class","mt-1 form-check-input"),c(k,"type","checkbox"),c(k,"id","twitter"),k.disabled=P=t[1].twitter==null,c(L,"class","w-100"),c(y,"class","form-check mb-0 d-flex flex-row align-items-start gap-1"),c(e,"class","d-flex flex-column gap-2"),c(oe,"class","h5"),c(ee,"class","form-control"),c(ee,"id","message"),c(ee,"rows","5"),ee.disabled=t[7],c(Y,"class","mb-3"),c($,"class","btn btn-primary"),$.disabled=D=t[7]||t[0].length<=0||Array.from(Object.values(t[2])).every(ji),c(M,"class","btn btn-primary-outline"),M.disabled=O=t[0].length<=0&&t[8].length<=0,c(A,"class","d-flex flex-row gap-2"),uu(z,"text-danger",t[14]>Dn),c(he,"class","d-flex justify-content-between align-items-center"),c(U,"class","mt-4"),c(se,"class","h5"),c(pe,"class","d-flex flex-row gap-1 align-items-center"),c(ve,"class","d-flex flex-row align-items-center gap-1"),me(ve,"cursor","pointer"),c(de,"class","mt-4 d-flex flex-column align-items-start gap-1"),c(Fe,"class","mt-4")},m(T,G){X(T,e,G),m(e,r),m(r,n),n.checked=t[2].mastodon,m(r,u),m(r,i),wt(o,i,null),m(e,l),m(e,d),m(d,f),f.checked=t[2].bluesky,m(d,v),m(d,b),wt(w,b,null),m(e,_),m(e,y),m(y,k),k.checked=t[2].twitter,m(y,j),m(y,L),wt(F,L,null),X(T,q,G),X(T,U,G),m(U,Y),m(Y,oe),m(Y,K),m(Y,ee),Pe(ee,t[0]),m(U,ge),m(U,he),m(he,A),m(A,$),Ue.m($,null),m(A,Z),m(A,M),m(M,ne),m(he,R),m(he,z),m(z,ae),m(z,H),m(z,J),m(z,Q),X(T,ue,G),X(T,de,G),m(de,ve),m(ve,se),m(ve,ye),m(ve,pe),p.m(pe,null),m(pe,xe),S&&S.m(pe,null),m(de,De),C&&C.m(de,null),X(T,Ce,G),X(T,Fe,G),wt(Me,Fe,null),Le=!0,We||(at=[le(n,"change",t[22]),le(f,"change",t[23]),le(k,"change",t[24]),le(ee,"input",t[25]),le(ee,"change",t[26]),le($,"click",t[27]),le(M,"click",t[28]),le(ve,"click",t[29])],We=!0)},p(T,G){(!Le||G[0]&2&&a!==(a=T[1].mastodon==null))&&(n.disabled=a),G[0]&4&&(n.checked=T[2].mastodon),(!Le||G[0]&2&&h!==(h=T[1].bluesky==null))&&(f.disabled=h),G[0]&4&&(f.checked=T[2].bluesky),(!Le||G[0]&2&&P!==(P=T[1].twitter==null))&&(k.disabled=P),G[0]&4&&(k.checked=T[2].twitter),(!Le||G[0]&128)&&(ee.disabled=T[7]),G[0]&1&&Pe(ee,T[0]),Qe===(Qe=pr(T))&&Ue?Ue.p(T,G):(Ue.d(1),Ue=Qe(T),Ue&&(Ue.c(),Ue.m($,null))),(!Le||G[0]&133&&D!==(D=T[7]||T[0].length<=0||Array.from(Object.values(T[2])).every(ji)))&&($.disabled=D),(!Le||G[0]&257&&O!==(O=T[0].length<=0&&T[8].length<=0))&&(M.disabled=O),(!Le||G[0]&16384)&&Lt(ae,T[14]),(!Le||G[0]&16384)&&uu(z,"text-danger",T[14]>Dn),g!==(g=s(T))&&(p.d(1),p=g(T),p&&(p.c(),p.m(pe,xe))),T[6]?S||(S=Ui(),S.c(),S.m(pe,null)):S&&(S.d(1),S=null),T[9]?C?C.p(T,G):(C=Pi(T),C.c(),C.m(de,null)):C&&(C.d(1),C=null);const ie={};!st&&G[0]&256&&(st=!0,ie.images=T[8],Gi(()=>st=!1)),Me.$set(ie)},i(T){Le||(qe(o.$$.fragment,T),qe(w.$$.fragment,T),qe(F.$$.fragment,T),qe(Me.$$.fragment,T),Le=!0)},o(T){ot(o.$$.fragment,T),ot(w.$$.fragment,T),ot(F.$$.fragment,T),ot(Me.$$.fragment,T),Le=!1},d(T){T&&(V(e),V(q),V(U),V(ue),V(de),V(Ce),V(Fe)),_t(o),_t(w),_t(F),Ue.d(),p.d(),S&&S.d(),C&&C.d(),_t(Me),We=!1,Ye(at)}}}function bp(t){let e;return{c(){e=x("span"),e.textContent="loading..",c(e,"class","loading")},m(r,n){X(r,e,n)},p:$e,i:$e,o:$e,d(r){r&&V(e)}}}function yp(t){let e,r,n,a,u,i=t[1].mastodon!=null&&t[2].mastodon&&Ei(),o=t[1].bluesky!=null&&t[2].bluesky&&Oi(),l=t[1].twitter!=null&&t[2].twitter&&Ti();return{c(){e=x("div"),i&&i.c(),r=W(),o&&o.c(),n=W(),l&&l.c(),a=W(),u=x("span"),u.textContent="Post",c(e,"class","d-flex flex-row align-items-center gap-1")},m(d,f){X(d,e,f),i&&i.m(e,null),m(e,r),o&&o.m(e,null),m(e,n),l&&l.m(e,null),m(e,a),m(e,u)},p(d,f){d[1].mastodon!=null&&d[2].mastodon?i||(i=Ei(),i.c(),i.m(e,r)):i&&(i.d(1),i=null),d[1].bluesky!=null&&d[2].bluesky?o||(o=Oi(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),d[1].twitter!=null&&d[2].twitter?l||(l=Ti(),l.c(),l.m(e,a)):l&&(l.d(1),l=null)},d(d){d&&V(e),i&&i.d(),o&&o.d(),l&&l.d()}}}function wp(t){let e,r,n;return{c(){e=x("div"),e.innerHTML='<span class="visually-hidden">Loading...</span>',r=W(),n=x("span"),n.textContent="Posting...",c(e,"class","spinner-border spinner-border-sm"),c(e,"role","status")},m(a,u){X(a,e,u),X(a,r,u),X(a,n,u)},p:$e,d(a){a&&(V(e),V(r),V(n))}}}function Ei(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"d","M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","14"),c(e,"height","14"),c(e,"fill","currentColor"),c(e,"class","bi bi-mastodon"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function Oi(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill","currentColor"),c(r,"d","M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"viewBox","0 -3.268 64 68.414"),c(e,"width","16"),c(e,"height","16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function Ti(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"d","M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"),me(e,"margin-top","-2px"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","16"),c(e,"height","16"),c(e,"fill","currentColor"),c(e,"class","bi bi-twitter"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function _p(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-down"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function kp(t){let e,r;return{c(){e=ke("svg"),r=ke("path"),c(r,"fill-rule","evenodd"),c(r,"d","M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","18"),c(e,"height","18"),c(e,"fill","currentColor"),c(e,"class","bi bi-chevron-right"),c(e,"viewBox","0 0 16 16")},m(n,a){X(n,e,a),m(e,r)},d(n){n&&V(e)}}}function Ui(t){let e;return{c(){e=x("div"),e.innerHTML='<span class="visually-hidden">Loading...</span>',c(e,"class","spinner-border spinner-border-sm"),c(e,"role","status")},m(r,n){X(r,e,n)},d(r){r&&V(e)}}}function Pi(t){let e,r,n,a,u,i,o=Nt(t[4]),l=[];for(let f=0;f<o.length;f+=1)l[f]=$i(Ci(t,o,f));let d=t[13].display_posted_at==null&&Ai(t);return{c(){e=x("select"),r=x("option"),r.textContent="Manual reply";for(let f=0;f<l.length;f+=1)l[f].c();n=W(),d&&d.c(),a=Ar(),r.__value="Manual reply",Pe(r,r.__value),c(e,"class","form-select form-select-sm"),t[13]===void 0&&er(()=>t[30].call(e))},m(f,h){X(f,e,h),m(e,r);for(let v=0;v<l.length;v+=1)l[v]&&l[v].m(e,null);Er(e,t[13],!0),X(f,n,h),d&&d.m(f,h),X(f,a,h),u||(i=le(e,"change",t[30]),u=!0)},p(f,h){if(h[0]&1048592){o=Nt(f[4]);let v;for(v=0;v<o.length;v+=1){const b=Ci(f,o,v);l[v]?l[v].p(b,h):(l[v]=$i(b),l[v].c(),l[v].m(e,null))}for(;v<l.length;v+=1)l[v].d(1);l.length=o.length}h[0]&8208&&Er(e,f[13]),f[13].display_posted_at==null?d?d.p(f,h):(d=Ai(f),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null)},d(f){f&&(V(e),V(n),V(a)),Wi(l,f),d&&d.d(f),u=!1,i()}}}function $i(t){let e,r=t[21].display_posted_at+"",n,a,u=t[21].trimmed_text+"",i,o,l=t[20](t[21])+"",d,f;return{c(){e=x("option"),n=Ee(r),a=Ee(" - "),i=Ee(u),o=W(),d=Ee(l),e.__value=f=t[21],Pe(e,e.__value)},m(h,v){X(h,e,v),m(e,n),m(e,a),m(e,i),m(e,o),m(e,d)},p(h,v){v[0]&16&&r!==(r=h[21].display_posted_at+"")&&Lt(n,r),v[0]&16&&u!==(u=h[21].trimmed_text+"")&&Lt(i,u),v[0]&16&&l!==(l=h[20](h[21])+"")&&Lt(d,l),v[0]&16&&f!==(f=h[21])&&(e.__value=f,Pe(e,e.__value))},d(h){h&&V(e)}}}function Ai(t){let e,r,n,a,u,i=t[1].mastodon!=null&&t[2].mastodon&&Ii(t),o=t[1].bluesky!=null&&t[2].bluesky&&Di(t),l=t[1].twitter!=null&&t[2].twitter&&Mi(t);return{c(){e=x("div"),e.textContent="- OR -",r=W(),i&&i.c(),n=W(),o&&o.c(),a=W(),l&&l.c(),u=Ar(),c(e,"class","my-2")},m(d,f){X(d,e,f),X(d,r,f),i&&i.m(d,f),X(d,n,f),o&&o.m(d,f),X(d,a,f),l&&l.m(d,f),X(d,u,f)},p(d,f){d[1].mastodon!=null&&d[2].mastodon?i?i.p(d,f):(i=Ii(d),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),d[1].bluesky!=null&&d[2].bluesky?o?o.p(d,f):(o=Di(d),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null),d[1].twitter!=null&&d[2].twitter?l?l.p(d,f):(l=Mi(d),l.c(),l.m(u.parentNode,u)):l&&(l.d(1),l=null)},d(d){d&&(V(e),V(r),V(n),V(a),V(u)),i&&i.d(d),o&&o.d(d),l&&l.d(d)}}}function Ii(t){let e,r,n,a,u,i,o;return{c(){e=x("div"),r=ke("svg"),n=ke("path"),a=W(),u=x("input"),c(n,"d","M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"),me(r,"width","18px"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"width","14"),c(r,"height","14"),c(r,"fill","currentColor"),c(r,"class","bi bi-mastodon"),c(r,"viewBox","0 0 16 16"),c(u,"class","form-control"),c(u,"type","text"),c(u,"placeholder","Toot URL or ID"),me(e,"width","100%"),c(e,"class","d-flex flex-row align-items-center gap-1")},m(l,d){X(l,e,d),m(e,r),m(r,n),m(e,a),m(e,u),Pe(u,t[10]),i||(o=le(u,"input",t[31]),i=!0)},p(l,d){d[0]&1024&&u.value!==l[10]&&Pe(u,l[10])},d(l){l&&V(e),i=!1,o()}}}function Di(t){let e,r,n,a,u,i,o;return{c(){e=x("div"),r=ke("svg"),n=ke("path"),a=W(),u=x("input"),c(n,"fill","currentColor"),c(n,"d","M13.873 3.805C21.21 9.332 29.103 20.537 32 26.55v15.882c0-.338-.13.044-.41.867-1.512 4.456-7.418 21.847-20.923 7.944-7.111-7.32-3.819-14.64 9.125-16.85-7.405 1.264-15.73-.825-18.014-9.015C1.12 23.022 0 8.51 0 6.55 0-3.268 8.579-.182 13.873 3.805zm36.254 0C42.79 9.332 34.897 20.537 32 26.55v15.882c0-.338.13.044.41.867 1.512 4.456 7.418 21.847 20.923 7.944 7.111-7.32 3.819-14.64-9.125-16.85 7.405 1.264 15.73-.825 18.014-9.015C62.88 23.022 64 8.51 64 6.55c0-9.818-8.578-6.732-13.873-2.745z"),me(r,"width","18px"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"viewBox","0 -3.268 64 68.414"),c(r,"width","16"),c(r,"height","16"),c(u,"class","form-control"),c(u,"type","text"),c(u,"placeholder","Post URL or ID"),me(e,"width","100%"),c(e,"class","d-flex flex-row align-items-center gap-1")},m(l,d){X(l,e,d),m(e,r),m(r,n),m(e,a),m(e,u),Pe(u,t[11]),i||(o=le(u,"input",t[32]),i=!0)},p(l,d){d[0]&2048&&u.value!==l[11]&&Pe(u,l[11])},d(l){l&&V(e),i=!1,o()}}}function Mi(t){let e,r,n,a,u,i,o;return{c(){e=x("div"),r=ke("svg"),n=ke("path"),a=W(),u=x("input"),c(n,"d","M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"),me(r,"width","18px"),me(r,"margin-top","-2px"),c(r,"xmlns","http://www.w3.org/2000/svg"),c(r,"width","16"),c(r,"height","16"),c(r,"fill","currentColor"),c(r,"class","bi bi-twitter"),c(r,"viewBox","0 0 16 16"),c(u,"class","form-control"),c(u,"type","text"),c(u,"placeholder","Tweet URL or ID"),me(e,"width","100%"),c(e,"class","d-flex flex-row align-items-center gap-1")},m(l,d){X(l,e,d),m(e,r),m(r,n),m(e,a),m(e,u),Pe(u,t[12]),i||(o=le(u,"input",t[33]),i=!0)},p(l,d){d[0]&4096&&u.value!==l[12]&&Pe(u,l[12])},d(l){l&&V(e),i=!1,o()}}}function Li(t){let e,r,n,a,u=t[3].build_at+"",i,o,l,d,f=t[3].env_ver+"",h;return{c(){e=x("span"),e.textContent=`spa_build: ${t[15]}`,r=W(),n=x("span"),a=Ee("api_build: "),i=Ee(u),o=W(),l=x("span"),d=Ee("api_ver: "),h=Ee(f)},m(v,b){X(v,e,b),X(v,r,b),X(v,n,b),m(n,a),m(n,i),X(v,o,b),X(v,l,b),m(l,d),m(l,h)},p(v,b){b[0]&8&&u!==(u=v[3].build_at+"")&&Lt(i,u),b[0]&8&&f!==(f=v[3].env_ver+"")&&Lt(h,f)},d(v){v&&(V(e),V(r),V(n),V(o),V(l))}}}function xp(t){var w;let e,r,n,a,u,i,o,l,d;const f=[bp,mp],h=[];function v(_,y){return _[5]?0:1}e=v(t),r=h[e]=f[e](t);let b=((w=t[3].env_ver)==null?void 0:w.length)>0&&Li(t);return{c(){r.c(),n=W(),a=x("div"),u=x("button"),u.textContent="version",i=W(),b&&b.c(),c(u,"class","btn btn-sm btn-block btn-link"),c(a,"class","mt-4 d-flex flex-column align-items-end"),me(a,"font-size","90%")},m(_,y){h[e].m(_,y),X(_,n,y),X(_,a,y),m(a,u),m(a,i),b&&b.m(a,null),o=!0,l||(d=le(u,"click",t[18]),l=!0)},p(_,y){var P;let k=e;e=v(_),e===k?h[e].p(_,y):(Vi(),ot(h[k],1,1,()=>{h[k]=null}),Xi(),r=h[e],r?r.p(_,y):(r=h[e]=f[e](_),r.c()),qe(r,1),r.m(n.parentNode,n)),((P=_[3].env_ver)==null?void 0:P.length)>0?b?b.p(_,y):(b=Li(_),b.c(),b.m(a,null)):b&&(b.d(1),b=null)},i(_){o||(qe(r),o=!0)},o(_){ot(r),o=!1},d(_){_&&(V(n),V(a)),h[e].d(_),b&&b.d(),l=!1,d()}}}const Dn=140,ji=t=>!t;function Sp(t,e,r){var ae;let n;const a=window.built_at??"";let u={build_at:"",env_ver:""},i=[],o=!0,l=!1,d=!1,f=((ae=Th())==null?void 0:ae.message)??"",h=[],v=!1,b="",w="",_="",y={display_posted_at:void 0,trimmed_text:"",postOfType:{mastodon:void 0,bluesky:void 0,twitter:void 0}};const k=async H=>{let J=!1;try{r(5,o=!0);const ue=await fetch(`https://pppost-api.netlify.app/.netlify/functions/foursquare_scrape?url=${encodeURIComponent(H)}`);if(ue.ok){const de=await ue.json();de.success&&de.data?(r(0,f=de.data.postText),console.log("Swarm scraping successful:",f),J=!0):console.error("Swarm scraping failed:",de.error)}else console.error("Failed to scrape Swarm URL:",ue.status)}catch(Q){console.error("Error scraping Swarm URL:",Q)}finally{r(5,o=!1)}return J},P=H=>{if(!H)return null;const J=H.trim();if(J.length===0)return null;const Q=J.replace(/[、。，．。,.．〜～\s]+$/gu,"");return/^https?:\/\/\S+$/i.test(Q)?Q:null},j=async H=>{const J="https://pppost-api.netlify.app/.netlify/functions";try{r(5,o=!0);const Q=await fetch(`${J}/fetch_title?url=${encodeURIComponent(H)}`);if(!Q.ok)return console.warn("Failed to fetch title:",Q.status),null;const ue=await Q.json();if(ue.success&&typeof ue.title=="string"&&ue.title.trim().length>0)return ue.title.trim();ue.error&&console.warn("Title API responded with error:",ue.error)}catch(Q){console.error("Error fetching title for URL:",Q)}finally{r(5,o=!1)}return null};na(async()=>{console.log("onMount");try{const H=new URLSearchParams(window.location.search),J=H.get("text"),Q=H.get("url");let ue=null;((J==null?void 0:J.length)??0)>0?(r(0,f=J??""),ue=J??""):((Q==null?void 0:Q.length)??0)>0&&(r(0,f=Q??""),ue=Q??"");const de=/https:\/\/(ja\.)?swarmapp\.com\/user\/\d+\/checkin\/[a-zA-Z0-9]+(\?[^\s、〜～]*)?/,ve=f.match(de);let se=!1;if(ve&&(console.log("Swarm URL detected:",ve[0]),console.log("Original text:",f),se=await k(ve[0])),!se&&ue){const ye=P(ue);if(ye){const pe=await j(ye);pe&&(r(0,f=`${pe} - ${ye}`),console.log("Title fetched for URL:",f))}}}finally{r(5,o=!1)}});const L=()=>{Oh({message:f})},F=async()=>{var H,J,Q;try{r(7,d=!0);const ue=se=>{if(((se==null?void 0:se.length)??0)==0)return"";const pe=new URL(se).pathname.split("/");return pe[pe.length-1]},de=h.map(se=>se.croppedUrl??se.originalUrl),ve=await rp(f,de,{reply_to_ids:{mastodon:ue(((H=y==null?void 0:y.postOfType.mastodon)==null?void 0:H.url)??b),twitter:ue(((J=y==null?void 0:y.postOfType.twitter)==null?void 0:J.url)??_),bluesky:ue(((Q=y==null?void 0:y.postOfType.bluesky)==null?void 0:Q.url)??w)}});ve.errors.length==0?(r(0,f=""),L(),r(8,h=[]),r(10,b=""),r(11,w=""),r(12,_=""),r(13,y={display_posted_at:void 0,trimmed_text:"",postOfType:{mastodon:void 0,bluesky:void 0,twitter:void 0}}),alert("投稿しました。")):alert(`${ve.errors.join(", ")}に投稿できませんでした。`)}catch{}finally{r(7,d=!1)}},q=()=>{r(1,_e.mastodon=lt("mastodon"),_e),r(1,_e.bluesky=lt("bluesky"),_e),r(1,_e.twitter=lt("twitter"),_e),Object.entries(Xe).forEach(([H,J])=>{var Q;r(2,Xe[H]=((Q=_e==null?void 0:_e[H])==null?void 0:Q.enabled)??!1,Xe)})},U=async()=>{r(3,u=await ep())},Y=async()=>{r(4,i=[]),r(6,l=!0),r(4,i=await tp()),r(6,l=!1)},oe=H=>{const J=Object.entries(H.postOfType).filter(([Q,ue])=>ue!=null).map(([Q,ue])=>Q);return J.length>0?`(${J.join(", ")})`:""};function K(){Xe.mastodon=this.checked,r(2,Xe)}function ee(){Xe.bluesky=this.checked,r(2,Xe)}function ge(){Xe.twitter=this.checked,r(2,Xe)}function he(){f=this.value,r(0,f)}const A=()=>L(),$=()=>F(),D=()=>{r(0,f=""),r(8,h=[]),r(10,b=""),r(11,w=""),r(12,_=""),r(13,y={display_posted_at:void 0,trimmed_text:"",postOfType:{mastodon:void 0,bluesky:void 0,twitter:void 0}}),L()},Z=async()=>{r(9,v=!v),v&&!l&&await Y()};function M(){y=Hi(this),r(13,y),r(4,i)}function ne(){b=this.value,r(10,b)}function O(){w=this.value,r(11,w)}function R(){_=this.value,r(12,_)}function z(H){h=H,r(8,h)}return t.$$.update=()=>{t.$$.dirty[0]&1&&r(14,n=Ch.parseTweet(f).weightedLength/2)},[f,_e,Xe,u,i,o,l,d,h,v,b,w,_,y,n,a,L,q,U,Y,oe,F,K,ee,ge,he,A,$,D,Z,M,ne,O,R,z]}class Cp extends Ct{constructor(e){super(),St(this,e,Sp,xp,xt,{},null,[-1,-1])}}function Ep(t){let e,r,n,a,u;return a=new Cp({}),{c(){e=x("div"),e.innerHTML='<h1 class="app-title svelte-8yggca">PPPOST</h1>',r=W(),n=x("main"),Mt(a.$$.fragment),c(e,"class","app-header svelte-8yggca"),c(n,"class","container-md app-main svelte-8yggca")},m(i,o){X(i,e,o),X(i,r,o),X(i,n,o),wt(a,n,null),u=!0},p:$e,i(i){u||(qe(a.$$.fragment,i),u=!0)},o(i){ot(a.$$.fragment,i),u=!1},d(i){i&&(V(e),V(r),V(n)),_t(a)}}}class Op extends Ct{constructor(e){super(),St(this,e,null,Ep,xt,{})}}new Op({target:document.getElementById("app")});
